function ia(a,c,d){var g=new XMLHttpRequest;g.open("GET",a,!0);g.withCredentials=!1;g.onreadystatechange=function(){4===g.readyState&&(200===g.status?c(g.responseText):"undefined"!==typeof d&&d(g.status))};g.send()}
function ja(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function ma(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}
function pa(a){var c=JSON.parse(a);a=c.ne;var d=c.nf,g=c.n,h="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data),e=h.length,l;c=new Uint8Array(e);for(l=0;l<e;++l)c[l]=h.charCodeAt(l);h=new Float32Array(g);e=new Float32Array(d);l=a+d+1;var k,r;for(k=0;k<g;++k){var f=l*k;var p=0===ma(c,f)?1:-1;var t=f+1;var w=1,A=0;for(r=t+a-1;r>=t;--r)A+=w*ma(c,r),w*=2;r=A;t=c;w=f+1+a;A=e;var F=0,D=A.length;for(f=w;f<w+D;++f)A[F]=ma(t,f),++F;for(f=t=0;f<d;++f)t+=e[f]*Math.pow(2,-f-
1);p=0===t&&0===r?0:p*(1+t)*Math.pow(2,1+r-Math.pow(2,a-1));h[k]=p}return h}
var n=function(){function a(a,c){a=b.createShader(a);b.shaderSource(a,c);b.compileShader(a);return b.getShaderParameter(a,b.COMPILE_STATUS)?a:!1}function c(y,c){y=a(b.VERTEX_SHADER,y);c=a(b.FRAGMENT_SHADER,c);var d=b.createProgram();b.attachShader(d,y);b.attachShader(d,c);b.linkProgram(d);return d}function d(a){void 0===a.fa&&(a.fa="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===a.$&&(a.$=["a0"]);void 0===a.T&&(a.T=
[2]);if(void 0===a.precision||"highp"===a.precision)a.precision=r;a.id=l++;void 0!==a.jc&&a.jc.forEach(function(c,d){a.c=a.c.replace(c,a.na[d])});a.Ma=0;a.T.forEach(function(c){a.Ma+=4*c});a.ma=c(a.fa,"precision "+a.precision+" float;\n"+a.c);a.o={};a.f.forEach(function(c){a.o[c]=b.getUniformLocation(a.ma,c)});a.attributes={};a.aa=[];a.$.forEach(function(c){var d=b.getAttribLocation(a.ma,c);a.attributes[c]=d;a.aa.push(d)});if(a.g){b.useProgram(a.ma);e=a;h=a.id;for(var d in a.g)b.uniform1i(a.o[d],
a.g[d])}a.Xc=!0}function g(a){ra.oc(u);h!==a.id&&(u.S(),h=a.id,e=a,b.useProgram(a.ma),a.aa.forEach(function(a){0!==a&&b.enableVertexAttribArray(a)}))}var h=-1,e=!1,l=0,k=!1,r="highp",f=["u1"],p=["u0"],t={u1:0},w={u0:0},A={u1:0,u2:1},F={u3:0},D={s0:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:f,g:t},s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:f,g:t,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
f:["u1","u2"],g:A},s3:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:f,g:t},s4:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",f:["u1","mask"],g:A},s5:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:f,g:t},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
f:f,g:t},s7:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],g:w},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",f:["u0","u4"],g:w},s9:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
f:f,g:t},s10:{c:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",f:["u1","u5","u6"],g:{u1:0,u5:1}},s11:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",f:["u1","u7"],g:t},s12:{c:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
f:["u1","u8"],g:t},s13:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:p,g:w},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",f:p,g:w},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",f:p,g:w},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
f:p,g:w},s17:{c:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u6","u9"],g:{u0:0,u6:1,u9:2}},s18:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",f:p,g:w},s19:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
f:p,g:w},s20:{c:"uniform sampler2D u0;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=exp(a);}",f:["u0","u10"],g:w},s21:{c:"uniform sampler2D u0,u11;uniform float u12;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,f);float b=u12*u12;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u13","u12"],g:{u0:0,u13:1}},s22:{c:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),g=floor(u14.x*fract(b*u14.y)),f=(g*u14.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
f:["u1","u14"],g:t},s23:{c:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),e=texture2D(u16,c);gl_FragColor=d*e;}",f:["u15","u16","u17"],g:{u16:0,u15:1,u17:2}},s24:{c:"uniform float u18;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 a=fract(vv0*u18);vec4 b=texture2D(u15,vv0),c=texture2D(u16,a);gl_FragColor=b*c;}",f:["u16","u15","u18"],g:{u16:0,u15:1}},s25:{c:"uniform float u18;uniform sampler2D u15,u16,u19,u20,u21,u22;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u18,m=floor(i),c=i-m;vec4 n=texture2D(u15,vv0),d=texture2D(u16,c),a=texture2D(u22,vv0);a=a*255.;vec4 o=texture2D(u19,c),p=texture2D(u20,c),q=texture2D(u21,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
f:"u15 u16 u18 u22 u19 u20 u21".split(" "),g:{u16:0,u15:1,u22:3,u19:4,u20:5,u21:6}},s26:{c:"uniform sampler2D u15,u16,u23;uniform float u18,u24,u25,u26;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u24*vv0),g=u24*vv0-a;float b=u18/u24;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u24;float l=u24*u26/u18;vec2 m=l*c,i=(m+d*u25)/u26,e=step(i,j);vec4 n=texture2D(u15,h),o=texture2D(u16,i),p=n*o*e.x*e.y,k=texture2D(u23,h);gl_FragColor=p*u25*u25+k;}",f:"u15 u16 u18 u24 u25 u26 u23".split(" "),g:{u16:0,
u15:1,u23:2}},s27:{c:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",f:["u15","u16"],g:{u16:0,u15:1}},s28:{c:"uniform sampler2D u1,u23;uniform float u27;varying vec2 vv0;void main(){gl_FragColor=texture2D(u23,vv0)+u27*texture2D(u1,vv0);}",f:["u1","u23","u27"],g:{u1:0,u23:1}},s29:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
f:f,g:t,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
f:["u1","u2","u28"],g:A},s31:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u28,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u1,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,c).r-i/g)*j;}",f:["u1","u2","u28"],g:A},s32:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
f:["u3","u7"],g:F},s33:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u7"],g:F},s34:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
f:["u1"],g:t,precision:"lowp"},s35:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",f:["u7","u1"],g:t,precision:"lowp"},s36:{c:"uniform sampler2D u1,u29,u30;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u29,vv0),b=texture2D(u30,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
f:["u1","u29","u30"],g:{u1:0,u29:1,u30:2}}},G={s37:{c:"uniform float u18,u31;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 o=vec2(0.,0.),h=vec2(1.,1.),i=vec2(.5,.5),m=vec2(.01,.01);void main(){vec4 j=texture2D(u23,vv0);float f=1.1111;vec2 a,l,b=o,c=m/u18,k=floor(vv0*u18+c);float p=f*u18;vec2 n=h*(f-1.)/2.;for(float d=0.;d<1.1111;d+=1.){b.x=d;for(float e=0.;e<1.1111;e+=1.)b.y=e,a=(k+i+u31*(b-n))/u18,a+=step(a,-c),a-=step(h-c,a),l=(k*f+b+i)/p,j+=texture2D(u15,l)*texture2D(u16,a);}gl_FragColor=j,gl_FragColor*=2.2222;}",
f:["u18","u15","u16","u23","u31"],na:["1.1111","gl_FragColor\\*=2.2222;"]},s38:{c:"uniform float u18,u31,u26;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 m=vec2(0.,0.),j=vec2(1.,1.),n=vec2(.5,.5),u=vec2(.01,.01);void main(){vec4 p=texture2D(u23,vv0);float q=1.1111,i=3.3333;vec2 a,s,t,r,b=m,c=m,d=u/u26,o=floor(vv0*u18+d);float k=q*u26;vec2 v=j*(q-1.)/2.;float w=k/u18;vec2 x=o*i;for(float g=0.;g<1.1111;g+=1.){b.x=g;for(float f=0.;f<1.1111;f+=1.){b.y=f;for(float h=0.;h<3.3333;h+=1.){c.x=h;for(float e=0.;e<3.3333;e+=1.)c.y=e,t=x+c+i*u31*(b-v),a=(t+n)/u26,a+=step(a,-d),a-=step(j-d,a),r=b*i+c,s=(o*w+r+n)/k,p+=texture2D(u15,s)*texture2D(u16,a);}}}gl_FragColor=p,gl_FragColor*=2.2222;}",
f:"u18 u26 u15 u16 u23 u31".split(" "),na:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},u={Da:function(){return k},m:function(){if(!k){r="highp";for(var a in D)d(D[a],a);n.set("s0");b.enableVertexAttribArray(0);a=va.m();k=!0;return a}},pb:function(a){a.forEach(function(a){u.Pa(a)})},Pa:function(a){D[a.id]=a;d(a,a.id)},Za:function(a,c,f){c||(c=a);D[c]=Object.create(G[a]);G[a].na&&G[a].na.forEach(function(a,d){D[c].c=D[c].c.replace(new RegExp(a,"g"),f[d])});d(D[c],c)},set:function(a){g(D[a])},Hb:function(a){return"undefined"!==
typeof D[a]},Kc:function(){return e.Hc},S:function(){-1!==h&&(h=-1,e.aa.forEach(function(a){0!==a&&b.disableVertexAttribArray(a)}))},Ha:function(){var a=0;e.aa.forEach(function(c,d){d=e.T[d];b.vertexAttribPointer(c,d,b.FLOAT,!1,e.Ma,a);a+=4*d})},Gc:function(){b.enableVertexAttribArray(0)},Ia:function(){b.vertexAttribPointer(e.aa[0],2,b.FLOAT,!1,8,0)},kd:function(a,c){b.uniform1i(e.o[a],c)},G:function(a,c){b.uniform1f(e.o[a],c)},L:function(a,c,d){b.uniform2f(e.o[a],c,d)},ld:function(a,c){b.uniform2fv(e.o[a],
c)},nd:function(a,c){b.uniform3fv(e.o[a],c)},md:function(a,c,d,f){b.uniform3f(e.o[a],c,d,f)},oa:function(a,c){b.uniform4fv(e.o[a],c)},od:function(a,c){b.uniformMatrix2fv(e.o[a],!1,c)},pd:function(a,c){b.uniformMatrix3fv(e.o[a],!1,c)},qd:function(a,c){b.uniformMatrix4fv(e.o[a],!1,c)},H:function(a,c){u.set(a);c.forEach(function(a){switch(a.type){case "4f":b.uniform4fv(e.o[a.name],a.value);break;case "3f":b.uniform3fv(e.o[a.name],a.value);break;case "2f":b.uniform2fv(e.o[a.name],a.value);break;case "1f":b.uniform1f(e.o[a.name],
a.value);break;case "1i":b.uniform1i(e.o[a.name],a.value);break;case "mat2":b.uniformMatrix2fv(e.o[a.name],!1,a.value);break;case "mat3":b.uniformMatrix3fv(e.o[a.name],!1,a.value);break;case "mat4":b.uniformMatrix4fv(e.o[a.name],!1,a.value)}})}};return u}(),b=!1,wa=function(){function a(a){console.log("ERROR in ContextFeedForward : ",a);return!1}var c=!1,d=!1,g=!1,h=!1,e=!0,l=!1,k={v:function(){return c.width},K:function(){return c.height},Lc:function(){return c},Jc:function(){return b},s:function(){return e},
flush:function(){b.flush()},Lb:function(){l||(l=new Uint8Array(c.width*c.height*4));b.readPixels(0,0,c.width,c.height,b.RGBA,b.UNSIGNED_BYTE,l);return l},Nc:function(){return c.toDataURL("image/jpeg")},Oc:function(){B.I();d||(d=document.createElement("canvas"),g=d.getContext("2d"));d.width=c.width;d.height=c.height;var a=k.Lb(),f=g.createImageData(d.width,d.height),e,h,l=d.width,A=d.height,F=f.data;for(h=0;h<A;++h){var D=A-h-1;for(e=0;e<l;++e){var G=4*(h*l+e);var u=4*(D*l+e);F[G]=a[u];F[G+1]=a[u+
1];F[G+2]=a[u+2];F[G+3]=a[u+3]}}g.putImageData(f,0,0);return d.toDataURL("image/png")},Mc:function(a){!d&&a&&(d=document.createElement("canvas"),g=d.getContext("2d"));var f=a?d:document.createElement("canvas");f.width=c.width;f.height=c.height;(a?g:f.getContext("2d")).drawImage(c,0,0);return f},m:function(d){d.zb&&!d.ba?c=document.getElementById(d.zb):d.ba&&(c=d.ba);c||(c=document.createElement("canvas"));c.width=d&&void 0!==d.width?d.width:512;c.height=d&&void 0!==d.height?d.height:512;"undefined"===
typeof d&&(d={});void 0===d.premultipliedAlpha&&(d.premultipliedAlpha=!1);void 0===d.ab&&(d.ab=!0);void 0===d.antialias&&(d.antialias=!1);var f={antialias:d.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:d.premultipliedAlpha,stencil:!1,depth:d.ab},k;if(k=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream)k=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),k=12===parseInt(k[1],10);k||(b=c.getContext("webgl2",f));b?e=!0:((b=c.getContext("webgl",f))||(b=c.getContext("experimental-webgl",
f)),e=!1);if(!b)return a("WebGL is not enabled");(h=b.getExtension("WEBGL_lose_context"))&&c.addEventListener("webglcontextlost",d.fc,!1);if(!C.m())return a("Not enough capabilities");if(!C.ub()&&e)return a("Your configuration cannot process color buffer float");b.clearColor(0,0,0,0);b.disable(b.DEPTH_TEST);b.disable(b.BLEND);b.disable(b.DITHER);b.disable(b.STENCIL_TEST);b.GENERATE_MIPMAP_HINT&&b.hint(b.GENERATE_MIPMAP_HINT,b.FASTEST);b.disable(b.SAMPLE_ALPHA_TO_COVERAGE);b.disable(b.SAMPLE_COVERAGE);
return!0},Ub:function(){if(!n.m())return!1;b.depthFunc(b.LEQUAL);b.clearDepth(1);return!0}};return k}(),ra=function(){var a="undefined"===typeof n?JEShaders:n;return{oc:function(c){a!==c&&(a.S(),a=c)},Da:function(){return a.Da()},Ia:function(){a.Ia()},Ha:function(){a.Ha()},S:function(){a.S()},set:function(c){a.set(c)}}}(),H=function(){var a,c,d=0,g=-2,h=-2,e=!1,l={reset:function(){h=g=-2},m:function(){e||(a=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,a),b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,
-1,3,-1,-1,3]),b.STATIC_DRAW),c=b.createBuffer(),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c),b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),b.STATIC_DRAW),l.ta(),e=!0)},a:function(a){var c=d++,f=a.W.length,e=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,e);b.bufferData(b.ARRAY_BUFFER,a.nb instanceof Float32Array?a.nb:new Float32Array(a.nb),b.STATIC_DRAW);g=c;if(a.W){var k=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,k);if(65536>a.W.length){var l=Uint16Array;var A=b.UNSIGNED_SHORT;
var F=2}else l=Uint32Array,A=b.UNSIGNED_INT,F=4;b.bufferData(b.ELEMENT_ARRAY_BUFFER,a.W instanceof l?a.W:new l(a.W),b.STATIC_DRAW);h=c}var D={tb:function(a){g!==c&&(b.bindBuffer(b.ARRAY_BUFFER,e),g=c);a&&ra.Ha()},rb:function(){h!==c&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,k),h=c)},bind:function(a){D.tb(a);D.rb()},Ec:function(){b.drawElements(b.TRIANGLES,f,A,0)},Fc:function(a,c){b.drawElements(b.TRIANGLES,a,A,c*F)},remove:function(){b.deleteBuffer(e);a.W&&b.deleteBuffer(k);D=null}};return D},ta:function(){-1!==
g&&(b.bindBuffer(b.ARRAY_BUFFER,a),g=-1);-1!==h&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c),h=-1)},i:function(a,c){a&&H.ta();c&&ra.Ia();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},Kb:function(){b.deleteBuffer(a);b.deleteBuffer(c)}};return l}(),B=function(){var a,c,d,g=!1,h={u:-2,Ib:1};return{m:function(){if(!g){a=b.createFramebuffer();var e=C.s();c=e&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=e&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;g=!0}},Qc:function(){return c},Aa:function(){return d},
U:function(){return b.FRAMEBUFFER},Sc:function(){return h},Ic:function(){return a},a:function(d){void 0===d.$a&&(d.$a=!1);var e=d.Y?d.Y:!1,g=d.width,r=void 0!==d.height?d.height:d.width,f=a,p=!1,t=!1,w=0;e&&(g=g?g:e.v(),r=r?r:e.K());var A={lb:function(){t||(f=b.createFramebuffer(),t=!0,w=h.Ib++)},ob:function(){A.lb();A.l();p=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,p);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,g,r);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,
p);b.clearDepth(1)},bind:function(a,d){w!==h.u&&(b.bindFramebuffer(c,f),h.u=w);e&&e.l();d&&b.viewport(0,0,g,r);a&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},xc:function(){w!==h.u&&(b.bindFramebuffer(c,f),h.u=w)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},Ac:function(){b.clear(b.COLOR_BUFFER_BIT)},Bc:function(){b.clear(b.DEPTH_BUFFER_BIT)},pc:function(){b.viewport(0,0,g,r)},l:function(){w!==h.u&&(b.bindFramebuffer(c,f),h.u=w)},rtt:function(a){e=a;h.u!==w&&(b.bindFramebuffer(b.FRAMEBUFFER,
f),h.u=w);a.l()},I:function(){b.bindFramebuffer(c,null);h.u=-1},resize:function(a,c){g=a;r=c;p&&(b.bindRenderbuffer(b.RENDERBUFFER,p),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,g,r))},remove:function(){b.bindFramebuffer(c,f);b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0);p&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null);b.bindFramebuffer(c,null);b.deleteFramebuffer(f);p&&b.deleteRenderbuffer(p);A=null}};d.$a&&A.ob();return A},I:function(){b.bindFramebuffer(c,
null);h.u=-1},tc:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.viewport(0,0,C.v(),C.K());h.u=-1},reset:function(){h.u=-2},N:function(){0!==h.u&&(b.bindFramebuffer(c,a),h.u=0)},clear:function(){b.viewport(0,0,C.v(),C.K());b.clear(b.COLOR_BUFFER_BIT)}}}(),T=function(){function a(a){b.bindTexture(b.TEXTURE_2D,a)}function c(a){m[0]=a;a=J[0];var z=a>>16&32768,c=a>>12&2047,d=a>>23&255;return 103>d?z:142<d?z|31744|((255==d?0:1)&&a&8388607):113>d?(c|=2048,z|(c>>114-
d)+(c>>113-d&1)):z=(z|d-112<<10|c>>1)+(c&1)}function d(a){var z=new Uint16Array(a.length);a.forEach(function(a,d){z[d]=c(a)});return z}function g(){if(null!==R.Ba)return R.Ba;var a=e(d([1,1,1,1]));return null===a?!0:R.Ba=a}function h(){if(null!==R.Ca)return R.Ca;var a=e(new Uint8Array([255,255,255,255]));return null===a?!0:R.Ca=a}function e(a){if(!ra.Da()||!F)return null;a=q.a({isFloat:!1,D:!0,array:a,width:1});B.I();b.viewport(0,0,1,1);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);ra.set("s0");
a.Qa(0);H.i(!1,!0);var c=new Uint8Array(4);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,c);c=.9<c[0];a.remove();B.N();return c}var l=0,k,r=0,f,p=!1,t,w,A,F=!1,D=!1,G,u,y,Q=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],N=!1,ba=!1,m=new Float32Array(1),J=new Int32Array(m.buffer),R={Ba:null,Ca:null},q={m:function(){if(!F){w=[b.RGB,!1,b.RGB,b.RGBA];A=[b.RGB,!1,b.RGB,b.RGBA];k=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7];N="undefined"!==typeof JEContext;ba="undefined"!==
typeof C;N&&JEContext.cd()&&k.push(b.TEXTURE8,b.TEXTURE9);f=[-1,-1,-1,-1,-1,-1,-1,-1];t=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT];if(!p){for(var a=new Float32Array(16384),c=0;16384>c;++c)a[c]=2*Math.random()-1;p={random:q.a({isFloat:!0,isPot:!0,array:a,width:64}),mb:q.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}F=!0}},Tb:function(){q.vc()},Vc:function(){return p.mb},vc:function(){t[1]=C.ha()},lc:function(){A=w=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},ed:function(a,c){n.set("s1");B.I();var z=a.v(),
d=a.K();b.viewport(0,0,z,d);a.b(0);H.i(!1,!1);b.readPixels(0,0,z,d,b.RGBA,b.UNSIGNED_BYTE,c)},Jb:function(c,d,g){b.activeTexture(b.TEXTURE0);l=0;var z=b.createTexture();a(z);var e=C.s()&&b.RGBA32F?b.RGBA32F:b.FLOAT;d=d instanceof Float32Array?d:new Float32Array(d);var f=Math.log(d.length)/Math.log(2);f!==Math.floor(f)&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);
b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,g);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,c.v(),c.K(),0,b.RGBA,e,d);a(null);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);B.N();n.set("s0");c.F();b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);a(z);H.i(!0,!1);b.deleteTexture(z)},a:function(c){function e(){a(P);ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,ca);c.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,c.cb?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_WRAP_T,c.O?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));c.ja&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.Pc().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.wc);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,c.isLinear?b.LINEAR:b.NEAREST);c.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,c.isMipmap&&!fa?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_MIN_FILTER,c.isMipmap&&!fa?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);X=w[c.ea-1];Y=A[c.ea-1];Z=t[m];if(C.s()){var d=b.RGBA32F;X===b.RGBA&&Z===b.FLOAT&&d&&(Y=d);X===b.RGB&&Z===b.FLOAT&&d&&(Y=d,X=b.RGBA)}if(c.D&&!c.isFloat||c.isFloat&&c.isMipmap&&va.Wb())(d=b.RGBA16F)&&(Y=d),Z=C.ha();c.fb&&"undefined"!==typeof b.texStorage2D&&(na=c.fb);c.eb&&4===c.ea&&(X=JEContext.Tc());if(c.A)b.texImage2D(b.TEXTURE_2D,0,Y,X,Z,c.A);else if(c.url)b.texImage2D(b.TEXTURE_2D,0,Y,X,Z,O);else if(I){try{var e=b.getError();
e!==b.NO_ERROR&&console.log("GLERR in SharedTexture :",e);b.texImage2D(b.TEXTURE_2D,0,Y,x,v,0,X,Z,I);b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,Y,x,v,0,X,Z,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,x,v,0,b.RGBA,b.UNSIGNED_BYTE,null))}catch(Ja){b.texImage2D(b.TEXTURE_2D,0,Y,x,v,0,X,Z,null)}c.isKeepArray||(I=null)}else b.texImage2D(b.TEXTURE_2D,0,Y,x,v,0,X,Z,null);if(c.isMipmap)if(!fa&&M)M.za(),oa=!0;else if(fa){e=Math.log(Math.min(x,v))/Math.log(2);ka=Array(1+
e);ka[0]=P;for(d=1;d<=e;++d){var g=Math.pow(2,d);var da=x/g;g=v/g;var h=b.createTexture();a(h);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,Y,da,g,0,X,Z,null);a(null);ka[d]=h}oa=!0}a(null);f[l]=-1;ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);ha=!0;S&&M&&(S(M),S=!1)}"undefined"===typeof c.isFloat&&(c.isFloat=!1);"undefined"===typeof c.D&&(c.D=!1);"undefined"===typeof c.isPot&&(c.isPot=!0);"undefined"===
typeof c.isLinear&&(c.isLinear=!1);"undefined"===typeof c.isMipmap&&(c.isMipmap=!1);"undefined"===typeof c.ua&&(c.ua=!1);void 0===c.ja&&(c.ja=!1);void 0===c.O&&(c.O=!1);void 0===c.cb&&(c.cb=!1);void 0===c.eb&&(c.eb=!1);void 0===c.ea&&(c.ea=4);void 0===c.bb&&(c.bb=!1);"undefined"===typeof c.isFlipY&&(c.isFlipY=c.url||c.array?!0:!1);"undefined"===typeof c.isKeepArray&&(c.isKeepArray=!1);c.data&&(c.array="string"===typeof c.data?pa(c.data):c.isFloat?new Float32Array(c.data):new Uint8Array(c.data),c.isFlipY=
!1);var m=0,z=c.A?!0:!1,p=null,F=null,W=!1,E=null;c.isFloat&&(c.D=!0);c.D&&(m=1);c.bb||C.s()||!c.isFloat||!ba||C.Sa()||(c.isFloat=!1);c.isFloat&&(m=2);c.ja&&N&&!JEContext.Yc()&&(c.ja=!1);var P=b.createTexture(),S=c.ua,O=null,I=!1,x=0,v=0,ha=!1,ea=r++,R=!1,J,da,qa,la,Y,X,Z,ca=c.isFlipY,fa=c.D&&c.isMipmap&&"undefined"!==typeof va&&!va.wb()?!0:!1,ka,na=-1,oa=!1;"undefined"!==typeof c.width&&c.width&&(x=c.width,v="undefined"!==typeof c.height&&c.height?c.height:x);var M={get:function(){return P},v:function(){return x},
K:function(){return v},Wc:function(){return c.url},Zc:function(){return c.isFloat},ad:function(){return c.D},bd:function(){return c.isLinear},za:function(){b.generateMipmap(b.TEXTURE_2D)},Ra:function(c,d){fa?(c||(c=M.Xa()),M.sa(d),a(ka[c]),f[d]=-1):M.b(d)},Xa:function(){-1===na&&(na=Math.log(x)/Math.log(2));return na},Wa:function(c){if(fa){c||(c=M.Xa());n.set("s11");M.sa(0);var d,e=x,g=v;for(d=1;d<=c;++d)e/=2,g/=2,n.L("u7",.25/e,.25/g),b.viewport(0,0,e,g),a(ka[d-1]),b.framebufferTexture2D(B.U(),b.COLOR_ATTACHMENT0,
b.TEXTURE_2D,ka[d],0),H.i(!1,1===d);f[0]=-1}else M.za()},sa:function(a){a!==l&&(b.activeTexture(k[a]),l=a)},b:function(c){if(!ha)return!1;M.sa(c);if(f[c]===ea)return!1;a(P);f[c]=ea;return!0},Qa:function(c){b.activeTexture(k[c]);l=c;a(P);f[c]=ea},l:function(){b.framebufferTexture2D(B.U(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,P,0)},F:function(){b.viewport(0,0,x,v);b.framebufferTexture2D(B.U(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,P,0)},td:function(){b.framebufferTexture2D(B.U(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,
null,0)},resize:function(a,c){x=a;v=c;e()},clone:function(a){a=q.a({width:x,height:v,D:c.D,isFloat:c.isFloat,isLinear:c.isLinear,O:c.O,isFlipY:a?!ca:ca,isPot:c.isPot});ra.set("s0");B.N();a.l();b.viewport(0,0,x,v);M.b(0);H.i(!0,!0);return a},pc:function(){b.viewport(0,0,x,v)},remove:function(){b.deleteTexture(P);M=null},refresh:function(){M.Qa(0);ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);z?b.texImage2D(b.TEXTURE_2D,0,Y,X,b.UNSIGNED_BYTE,c.A):b.texImage2D(b.TEXTURE_2D,0,Y,x,v,0,X,Z,I);ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,
!1)},Ta:function(){var a=x*v*4;da=[new Uint8Array(a),new Uint8Array(a),new Uint8Array(a),new Uint8Array(a)];J=[new Float32Array(da[0].buffer),new Float32Array(da[1].buffer),new Float32Array(da[2].buffer),new Float32Array(da[3].buffer)];qa=new Uint8Array(4*a);la=new Float32Array(qa.buffer);R=!0},jb:function(){R||M.Ta();b.readPixels(0,0,x,4*v,b.RGBA,b.UNSIGNED_BYTE,qa);var a,c=x*v,d=2*c,e=3*c;for(a=0;a<c;++a)J[0][a]=la[a],J[1][a]=la[a+c],J[2][a]=la[a+d],J[3][a]=la[a+e];return J},Ua:function(){B.I();
n.set("s12");M.b(0);for(var a=0;4>a;++a)b.viewport(0,v*a,x,v),n.oa("u8",Q[a]),H.i(!1,0===a)},uc:function(c){var d=Z===t[0]&&!h();a(P);ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,ca);d?(W||(p=document.createElement("canvas"),p.width=x,p.height=v,F=p.getContext("2d"),E=F.createImageData(x,v),W=!0),E.data.set(c),F.putImageData(E,0,0),b.texImage2D(b.TEXTURE_2D,0,Y,X,Z,p)):b.texImage2D(b.TEXTURE_2D,0,Y,x,v,0,X,Z,c);f[l]=ea;ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},ud:function(c,d){a(P);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,
d);b.texImage2D(b.TEXTURE_2D,0,Y,X,Z,c);f[l]=ea;d&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},gd:function(a,d){var e=x*v,g=4*e;a=c.D?a?"RGBE":"JSON":"RGBA";d&&(a=d);d=C.s()&&!1;switch(a){case "RGBE":var f="s39";break;case "JSON":f=d?"s0":"s12";break;case "RGBA":case "RGBAARRAY":f="s6"}R||("RGBA"===a||"RGBE"===a||"RGBAARRAY"===a?(da=new Uint8Array(g),R=!0):"JSON"!==a||d||M.Ta());B.I();n.set(f);M.b(0);if("RGBA"===a||"RGBE"===a||"RGBAARRAY"===a){b.viewport(0,0,x,v);H.i(!0,!0);b.readPixels(0,0,x,v,b.RGBA,
b.UNSIGNED_BYTE,da);if("RGBAARRAY"===a)return{data:da};D||(G=document.createElement("canvas"),u=G.getContext("2d"),D=!0);G.width=x;G.height=v;y=u.createImageData(x,v);y.data.set(da);u.putImageData(y,0,0);var h=G.toDataURL("image/png")}else if("JSON"===a)if(d)h=new Float32Array(e),b.viewport(0,0,x,v),H.i(!0,!0),b.readPixels(0,0,x,v,b.RGBA,b.FLOAT,h);else{for(h=0;4>h;++h)b.viewport(0,v*h,x,v),n.oa("u8",Q[h]),H.i(!h,!h);M.jb();h=Array(e);for(f=0;f<e;++f)h[4*f]=J[0][f],h[4*f+1]=J[1][f],h[4*f+2]=J[2][f],
h[4*f+3]=J[3][f]}return{format:a,data:h,width:x,height:v,isMirrorY:c.O,isFlipY:"RGBA"===a?c.isFlipY:!c.isFlipY}}};c.isMipmap&&!fa&&ha&&!oa&&(M.za(),oa=!0);if(c.url)a(P),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),O=new Image,O.Dc="Anonymous",O.crossOrigin="Anonymous",O.src=c.url,O.onload=function(){x=O.width;v=O.height;e()};else if(c.A){var ua=function(){x=void 0!==c.A.videoWidth?c.A.videoWidth:c.A.width;v=void 0!==c.A.videoHeight?c.A.videoHeight:c.A.height;x?e():setTimeout(ua,
1)};ua()}else c.array?(c.D&&!c.isFloat?c.array instanceof Uint16Array?(I=c.array,e()):g()?(I=d(c.array),e()):(e(),q.Jb(M,c.array,ca)):(I=c.isFloat?c.array instanceof Float32Array?c.array:new Float32Array(c.array):c.array instanceof Uint8Array?c.array:new Uint8Array(c.array),e()),c.isKeepArray||(I&&I!==c.array&&(I=null),delete c.array)):e();M.Qb=M.v;S&&ha&&(S(M),S=!1);return M},I:function(c){c!==l&&(b.activeTexture(k[c]),l=c);f[c]=-1;a(null)},yc:function(a){p.random.b(a)},reset:function(){for(var a=
0;a<k.length;++a)f[a]=-1;l=-1},fd:function(){l=-1},rd:function(){for(var a=0;a<k.length;++a)q.I(a)},Kb:function(){p&&(p.random.remove(),p.mb.remove())},sd:function(a,c){if("RGBA"===a.format||"RGBE"===a.format){var d=new Image;d.src=a.data;d.onload=function(){q.a({O:a.isMirrorY,isFlipY:a.isFlipY,isFloat:!1,A:d,ua:function(d){if("RGBA"===a.format)c(d);else{var e=a.width,f=a.height,g=q.a({O:a.isMirrorY,isFloat:!0,width:e,height:f,isFlipY:a.isFlipY});B.N();b.viewport(0,0,e,f);n.set("s40");g.l();d.b(0);
H.i(!0,!0);q.I(0);c(g);b.flush();setTimeout(d.remove,50)}}})}}else"JSON"===a.format?c(q.a({isFloat:!0,isFlipY:a.isFlipY,width:a.width,height:a.height,array:new Float32Array(a.data)})):c(!1)}};return q}(),C=function(){function a(){c="undefined"===typeof wa?JEContext:wa;d=!0}var c,d=!1,g=!1,h=!1,e=!1,l=!1,k=!1,r=!1,f=!1,p=!1,t=!1,w=!1,A=!0,F=!0,D=!0,G,u="undefined"===typeof window?{}:window,y={m:function(){if(d)return!0;a();y.Va();y.ya();y.Fb();y.Gb();B.m();T.m();if(!y.Ab())return!1;H.m();T.Tb();return!0},
v:function(){d||a();return c.v()},K:function(){d||a();return c.K()},s:function(){d||a();return c.s()},Fb:function(){w=(t=b.getExtension("EXT_color_buffer_float")||b.getExtension("WEBGL_color_buffer_float")||b.getExtension("OES_color_buffer_float"))?!0:!1;u.GL_EXT_COLORBUFFERFLOAT=t},Gb:function(){b.getExtension("EXT_color_buffer_half_float")||b.getExtension("WEBGL_color_buffer_half_float")||b.getExtension("OES_color_buffer_half_float")},Va:function(){if(!g){this.s()||(h=b.getExtension("OES_texture_float")||
b.getExtension("MOZ_OES_texture_float")||b.getExtension("WEBKIT_OES_texture_float"),l=(u.GL_EXT_FLOAT=h)?!0:!1);if(l||this.s())e=b.getExtension("OES_texture_float_linear")||b.getExtension("MOZ_OES_texture_float_linear")||b.getExtension("WEBKIT_OES_texture_float_linear"),u.GL_EXT_FLOATLINEAR=e;g=!0}},ya:function(){if(!p){if(!this.s()){if(k=b.getExtension("OES_texture_half_float")||b.getExtension("MOZ_OES_texture_half_float")||b.getExtension("WEBKIT_OES_texture_half_float"))G=k.HALF_FLOAT_OES,r=!0;
u.GL_EXT_HALFFLOAT=k}if(r||this.s())f=b.getExtension("OES_texture_half_float_linear")||b.getExtension("MOZ_OES_texture_half_float_linear")||b.getExtension("WEBKIT_OES_texture_half_float_linear"),u.GL_EXT_HALFFLOATLINEAR=f;p=!0}},ha:function(){if(y.s())return b.HALF_FLOAT;y.ya();return r?G:b.FLOAT},Sa:function(){return A},vb:function(){return F},zc:function(){return D},ub:function(){return w},Cb:function(){F=A=!0;var a=b.createFramebuffer();b.bindFramebuffer(b.FRAMEBUFFER,a);var c=b.createTexture();
b.bindTexture(b.TEXTURE_2D,c);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,y.s()&&b.RGBA32F?b.RGBA32F:b.RGBA,1,1,0,b.RGBA,b.FLOAT,null);b.framebufferTexture2D(B.U(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,c,0);var d=b.checkFramebufferStatus(B.Aa());d!==b.FRAMEBUFFER_COMPLETE&&(A=!1);b.texImage2D(b.TEXTURE_2D,0,y.s()&&b.RGBA16F?b.RGBA16F:b.RGBA,1,1,0,b.RGBA,y.ha(),null);b.framebufferTexture2D(B.U(),b.COLOR_ATTACHMENT0,
b.TEXTURE_2D,c,0);d=b.checkFramebufferStatus(B.Aa());d!==b.FRAMEBUFFER_COMPLETE&&(F=!1);b.bindTexture(b.TEXTURE_2D,null);b.bindFramebuffer(b.FRAMEBUFFER,null);b.deleteTexture(c);b.deleteFramebuffer(a)},Bb:function(){var a=B.a({width:1});a.lb();var c=T.a({width:1,isFloat:!0,ea:3});a.l();c.l();b.flush();b.checkFramebufferStatus(B.Aa())!==b.FRAMEBUFFER_COMPLETE?(T.lc(),D=!1):D=!0;a.remove();c.remove()},Ab:function(){y.Cb();if(!A&&!F)return!1;y.Bb();return!0}};return y}(),va=function(){var a=!1,c=[.8,
1,.8,1],d=0,g,h=new Uint8Array(4),e=c.concat(c,c,c),l=!0,k={m:function(){function c(a,c,d,e){b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,e?b.NEAREST_MIPMAP_NEAREST:b.LINEAR);try{var f=b.getError();f!==b.NO_ERROR&&console.log("GLERR in test_mipmapping() :",f);b.texImage2D(b.TEXTURE_2D,0,a,2,2,0,b.RGBA,c,d);f=b.getError();if(f!==b.NO_ERROR)return!1}catch(Q){return!1}e&&b.generateMipmap(b.TEXTURE_2D);H.ta();H.i(!1,!0);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,h);f=b.getError();f===b.INVALID_OPERATION&&
"undefined"!==typeof b.PIXEL_PACK_BUFFER&&(b.bindBuffer(b.PIXEL_PACK_BUFFER,null),b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,h),f=b.getError());return f!==b.NO_ERROR?!1:0!==h[0]}function f(a){return C.Sa()&&c(t,b.FLOAT,new Float32Array(e),a)?(d=3,!0):!1}function k(a){return C.vb()?c(w,C.ha(),new Uint16Array(e),a)||c(w,b.FLOAT,new Float32Array(e),a)?(d=2,!0):!1:!1}C.Va();C.ya();var t=b.RGBA,w=b.RGBA;if(wa.s()){var A=b.RGBA32F;A&&(t=A);(A=b.RGBA16F)&&(w=A)}H.m();B.reset();B.I();b.viewport(0,0,1,1);
n.set("s0");a=!0;g=b.createTexture();b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,g);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.REPEAT);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.REPEAT);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);if(k(!0)||f(!0))return!0;l=!1;if(k(!1)||f(!1))return!0;if(wa.s()){w=t=b.RGBA;if(k(!0)||f(!0))return!0;l=!1;if(k(!1)||f(!1))return!0}return!1},wb:function(){return l},Rc:function(){return d},$c:function(){a||k.m();return 3===d},Wb:function(){a||
k.m();return 2===d}};return k}(),xa={a:function(a){var c=T.a(a.alpha),d=T.a(a.beta);return{Eb:function(){c.b(1);d.b(2)}}}},Aa={a:function(a){var c=a.qc;c.index=a.index;c.P=a.P;c.parent=a.parent;switch(c.type){case "input":a=ya.a(c);break;default:a=za.a(c)}return a}},ya={a:function(a){"undefined"===typeof a.sift&&(a.sift=!1);"undefined"===typeof a.DWT&&(a.DWT=!1);"undefined"===typeof a.blur&&(a.blur=!1);"undefined"===typeof a.siftOutWidth&&(a.siftOutWidth=!1);"undefined"===typeof a.filterBank&&(a.filterBank=
!1);"undefined"===typeof a.poolType&&(a.poolType="max");"undefined"===typeof a.postpreprocessing&&(a.postpreprocessing="copy");"undefined"===typeof a.density&&(a.density=1);a.filterBank&&(FilterBank.jd(a.poolType,a.postpreprocessing),FilterBank.hd(a.density));var c=!1;if(a.mask){c=!0;SETTINGS&&void 0!==SETTINGS.qb&&(a.mask=SETTINGS.qb+a.mask);var d=T.a({isFloat:!1,url:a.mask})}var g=!1,h="undefined"!==typeof a.preprocessing?a.preprocessing:!1,e=!1;a.sift?Sift.m({Sb:b,ba:!1,width:a.size,dd:a.siftOutWidth}):
a.DWT&&DWT.m({Sb:b,ba:!1,width:a.size});var l=!1;a.customInputShader&&(l="s41",n.Pa({name:"_",id:l,c:a.customInputShader,f:["uSource"],precision:"lowp"}),n.H(l,[{type:"1i",name:"_",value:0}]));switch(h){case "sobel":var k="s30";e=!0;break;case "meanNormalization":k="s31";e=!0;break;case "grayScale":k="s29";e=!1;break;case "copy":k="s0";break;case "inputLightRegulation":k=l?l:"s29";Ba.m({width:a.size,gb:a.nBlurPass,Vb:!1});g=!0;break;case "direct":case "none":k=!1;break;default:k="s3"}c&&(k+="Mask");
if(a.blur)var r=T.a({isFloat:!1,isPot:!1,width:a.size});var f=T.a({isFloat:!1,isPot:!1,width:a.size}),p={v:function(){return a.sift?Sift.V():a.filterBank?FilterBank.V():a.size},V:function(){return p.v()},Ob:function(){return a.sift?Sift.da():a.DWT?DWT.da():a.filterBank?FilterBank.da():g?Ba.da():f},B:function(){B.N();a.blur&&(r.F(),n.set("s42"),n.L("u7",1/a.size,1/a.size),H.i(!1,!0),r.b(0));k&&(n.set(k),e&&n.G("u28",1/a.size),f.F(),c&&d.b(1),H.i(!1,!1),f.b(0),g?Ba.la(f):a.sift?(n.S(),Sift.la()):a.DWT?
(n.S(),DWT.la(4)):a.filterBank&&(n.S(),FilterBank.la(f)))}};return p}},za={a:function(a){"undefined"===typeof a.disableNormalize&&(a.disableNormalize=!1);var c=[],d=[],g,h,e=!1,l,k=!0,r,f,p=a.isReorganize?a.isReorganize:!1,t=a.kernelsNumber?!0:!1,w=a.dynPelu?xa.a(a.dynPelu):!1,A=w?!0:!1,F={isEnabled:!1},D;if("softmax"===a.type){a.activation="softmax";a.size=Math.pow(2,Math.ceil(Math.log(Math.sqrt(a.num_classes))/Math.log(2)));a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.P.V();a.gain="undefined"!==
typeof a.gain?a.gain:1;n.H("s20",[{type:"1f",name:"u10",value:a.gain}]);var G=T.a({isFloat:!0,isPot:!1,width:a.size}),u=T.a({isFloat:!0,isPot:!1,width:a.size,isMipmap:!0});k=!1;var y=new Uint8Array(Math.pow(4*a.size,2)),Q;for(Q=0;Q<a.size*a.size;++Q){var N=Q<a.num_classes?255:0;y[4*Q]=N;y[4*Q+1]=N;y[4*Q+2]=N;y[4*Q+3]=N}var ba=T.a({isFloat:!1,isPot:!1,width:a.size,array:y})}else a.cost?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.P.V(),k=!1):"full"===a.connectivityUp&&(a.sparsity=a.P.V());
var m={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",softmax:"s20",dynPelu:"s17"}[a.activation],J=a.sparsity*a.sparsity,R=!1,q=a.size;if(a.maxPooling){switch(a.maxPooling.size){case 2:var z="s32";break;case 4:z="s33"}R=!0;q/=a.maxPooling.size;var K=T.a({isFloat:!0,isPot:!1,width:q})}var L=void 0!==a.dc&&a.dc?!0:!1,V=null,U=null,aa=null;L&&(V="s43"+a.index.toString(),n.Za("s43",V,[((a.normalization.n-1)/2).toFixed(1)]),n.H(V,[{type:"1i",name:"u1",value:0},{type:"2f",
name:"u7",value:[1/a.size,1/a.size]},{type:"1f",name:"u6",value:a.normalization.alpha},{type:"1f",name:"u9",value:a.normalization.beta},{type:"1f",name:"u32",value:a.normalization.k}]),U=T.a({isFloat:!0,isPot:!0,width:a.size}),aa=T.a({isFloat:!0,isPot:!0,width:a.size}));var W,E,P,S;k&&(S=T.a({isFloat:!0,isPot:!1,width:a.size}));var O=T.a(a.bias),I,x={v:function(){return a.size},V:function(){return q},Ya:function(){return a.num_classes},sb:function(a){D.b(a)},hc:function(){a.remap&&a.remap.isEnabled&&
(F={isEnabled:!0,Zb:T.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),width:a.remap.maskTexture.width,isPot:!1}),layers:a.remap.layers.map(function(c){return a.parent.Nb(c)}),depth:a.remap.depth})},nc:function(){switch(a.connectivityUp){case "gaussian":I=Ca.a(a.connectivity);break;case "direct":I=Da.a(a.connectivity);break;case "square":I=Ea.a(a.connectivity);break;case "squareFast":I=Fa.a(a.connectivity,a.activation);break;case "full":I=Ga.a(a.connectivity);break;case "conv":f=
a.kernelsNumber,I=Ha.a(a.connectivity),p&&(r=T.a({width:q,isFloat:!0,isFlipY:!1,isPot:!1}))}if(I.R){var c=a.size*a.sparsity;E=Math.log(c/a.size)/Math.log(2);W=T.a({isMipmap:!0,isFloat:!0,isPot:!0,width:c,fb:E});P=T.a({isFloat:!0,isPot:!0,width:a.size})}},B:function(c,d){D=c;I.R?(W.F(),t&&O.b(2),I.B(F),W.b(0),W.Wa(E),P.F(),t?n.set("s0"):(n.set("s28"),n.G("u27",J),O.b(1)),W.Ra(E,0),H.i(!1,!1),n.set(m),L?U.l():S.l(),P.b(0),A&&w.Eb(),H.i(!1,!1)):(S.F(),O.b(1),I.B());L&&(n.set(V),aa.l(),U.b(0),H.i(!1,
!1),n.set("s44"),n.G("u6",1),S.l(),aa.b(1),H.i(!1,!1));if(k)return R?(K.F(),S.b(0),n.set(z),n.L("u7",1/a.size,1/a.size),H.i(!1,!1),d=K):d=S,d.b(0),p&&(r.l(),n.set("s22"),n.L("u14",f,q/f),H.i(!1,!1),d=r,r.b(0)),d;if("softmax"===a.type){n.set("s20");S.b(0);G.l();H.i(!1,!1);a.disableNormalize?c=G:(n.set("s2"),G.b(0),ba.b(1),u.l(),H.i(!1,!1),n.set("s0"),h.F(),u.b(0),u.Wa(!1),H.i(!1,!1),n.set("s21"),g.F(),u.Ra(!1,0),n.G("u12",S.Qb()),h.b(1),H.i(!1,!1),c=g);if(d){switch(e){case "cpuRGBAAvg":break;default:var v=
x.ib(c)}return v}return!1}if(a.cost){n.set("gpuRawAvg"===e?"s8":"s7");d=S;a.disableNormalize||(n.G("u4",1/a.size),g.F(),S.b(0),H.i(!1,!1),d=g);switch(e){case "cpuRGBA2Float":d.Ua();v=x.ib(d);l(v);break;case "gpuRawAvg":case "gpuRaw":d.b(0),l(d)}return!1}},yb:function(f){f&&"undefined"!==typeof f.hb&&(e=f.hb,l=f.gc);S=T.a({isFloat:!0,isPot:!0,isMipmap:"softmax"===a.type,width:a.size});"softmax"===a.type&&(h=T.a({isFloat:!0,isPot:!0,width:1}));var k=0,m=0,p="undefined"!==typeof a.num_classes&&a.num_classes?
a.num_classes:a.size*a.size;for(f=0;f<p;++f)c.push(k+(a.size-1-m)*a.size),d.push([-1,-1,-1,-1]),++k,k===a.size&&(k=0,++m);a.disableNormalize||(g=T.a({isFloat:!0,isPot:!0,width:a.size}))},ib:function(a){a.Ua();var f=a.jb();c.forEach(function(a,c){d[c][0]=f[0][a];d[c][1]=f[1][a];d[c][2]=f[2][a];d[c][3]=f[3][a]});return d}};a.P&&x.nc(a.P);return x}};
function Ia(){var a,c,d,g;a||(a={});this.Nb=function(a){return c[a]};this.kc=function(a){var e=!1;c=a.map(function(a,c){return e=a=Aa.a({index:c,parent:this,qc:a,P:e})});d=c[0];g=c[c.length-1];c.forEach(function(a,c){0!==c&&a.hc()})};this.B=function(a,d){var e=d;c.forEach(function(c){e=c.B(e,a)});return e};this.Mb=function(){return d.v()};this.Pb=function(){return g.v()};this.da=function(){return g.Ob()};this.mc=function(a){g.yb(a)};this.Ya=function(){return g.Ya()}}
var Da={a:function(a){var c=T.a(a.weights);delete a.weights.data;return{R:!0,ca:function(){return 1},Rb:function(){return c},B:function(){n.set("s27");c.b(1);H.i(!1,!1)}}}},Ga={a:function(a){var c=a.fromLayerSize,d=T.a(a.weights);return{R:!0,ca:function(){return c},B:function(c){if(c.isEnabled){n.set("s25");c.Zb.b(3);var g,e=Math.min(c.layers.length,c.depth);for(g=0;g<e;++g)c.layers[g].sb(4+g)}else n.set("s24");n.G("u18",a.toLayerSize);d.b(1);H.i(!1,!1)}}}},Ca={a:function(a){var c=a.toSparsity*a.toLayerSize,
d=c/a.fromLayerSize,g=T.a(a.weights);T.a({width:c,isFloat:!0,array:new Float32Array(a.fromBindings),isPot:!0});var h=T.a({width:c,isFloat:!0,array:new Float32Array(a.toBindings),isPot:!0});return{R:!0,ca:function(){return d},B:function(){n.set("s23");g.b(1);h.b(2);H.i(!1,!0)}}}},Ea={a:function(a){var c=a.fromLayerSize,d=a.toLayerSize,g=a.toSparsity,h=g*d,e=h/c,l=c/d,k,r,f,p,t=0,w=0,A=0,F=Array(g*d*g*d*4),D=Array(g*d*g*d*4),G=Array(c*c);for(k=0;k<G.length;++k)G[k]=0;var u=Math.floor(g/2),y=.5/d,Q=
.5/c,N=.5/h;for(k=0;k<d;++k)for(r=0;r<d;++r){var ba=Math.round(k*l);var m=Math.round(r*l);var J=k/d;var R=r/d;J+=y;R+=y;for(f=0;f<g;++f)for(p=0;p<g;++p){var q=t/h;var z=w/h;var K=ba+f-u;var L=m+p-u;0>K&&(K+=c);0>L&&(L+=c);K>=c&&(K-=c);L>=c&&(L-=c);var V=K/c;var U=L/c;z=1-z-1/h;V+=Q;U+=Q;q+=N;z+=N;var aa=k*g+f,W=r*g+p;W=d*g-W-1;aa=W*d*g+aa;F[4*aa]=q;F[4*aa+1]=z;F[4*aa+2]=V;F[4*aa+3]=U;V=G[L*c+K]++;U=V%e;K=K*e+U;L=L*e+(V-U)/e;L=c*e-1-L;L=L*c*e+K;D[4*L]=q;D[4*L+1]=z;D[4*L+2]=J;D[4*L+3]=R;++t>=h&&(t=
0,++w);++A}}var E=T.a(a.weights);T.a({width:h,isFloat:!0,array:new Float32Array(D),isPot:!0});D=null;var P=T.a({width:h,isFloat:!0,array:new Float32Array(F),isPot:!0});F=null;return{R:!0,ca:function(){return e},B:function(){n.set("s23");E.b(1);P.b(2);H.i(!1,!1)}}}},Ha={a:function(a){var c=a.kernelsNumber,d=a.toSparsity,g=d*a.toLayerSize/a.fromLayerSize,h=T.a(a.weights);return{R:!0,ca:function(){return g},Uc:function(){return d},Rb:function(){return h},B:function(){n.set("s26");n.G("u24",c);n.G("u25",
d);n.G("u18",a.toLayerSize);n.G("u26",a.fromLayerSize);h.b(1);H.i(!1,!1)}}}},Fa={a:function(a,c){var d=a.fromLayerSize,g=a.toLayerSize,h=a.toSparsity,e=a.stride?a.stride:1,l=h*g/d,k=g<d,r=d/g,f=T.a(a.weights),p="s45"+[d.toString(),g.toString(),h.toString(),e.toString(),c].join("_");n.Hb(p)||(a=ja(c),g=[{type:"1f",name:"u18",value:g},{type:"1f",name:"u31",value:e}],k&&g.push({type:"1f",name:"u26",value:d}),d=[(k?l:h).toFixed(1),a],k&&d.push(r.toFixed(1)),n.Za(k?"s38":"s37",p,d),n.H(p,g.concat([{type:"1i",
name:"u16",value:0},{type:"1i",name:"u23",value:1},{type:"1i",name:"u15",value:3}])));return{R:!1,ca:function(){return l},B:function(){n.set(p);f.b(3);H.i(!1,!1)}}}},Ba=function(){var a,c,d,g,h,e,l,k,r;return{m:function(f){a=f.gb?f.gb:3;c=f.width?f.width:64;g=f.Vb?!0:!1;f={isFloat:!1,width:c,isPot:!1,isFlipY:!1};h=T.a(f);e=T.a(f);l=T.a(f);k=T.a(f);r=T.a({isFloat:!0,width:c,isPot:!1,isFlipY:!1});d=1/c},la:function(c){n.set("s35");for(var f=0;f<a;++f)h.l(),n.L("u7",d,0),H.i(g,!1),e.l(),h.b(0),n.L("u7",
0,d),H.i(g,!1),e.b(0);n.set("s34");k.l();c.b(0);H.i(g);n.set("s35");for(f=0;f<a;++f)l.l(),k.b(0),n.L("u7",d,0),H.i(g,!1),k.l(),l.b(0),n.L("u7",0,d),H.i(g,!1);n.set("s36");r.l();c.b(0);e.b(1);k.b(2);H.i(g,!1);r.b(0)},da:function(){return r}}}();
window.JEEARAPI=function(){var a,c,d,g;function h(a,c){for(var d in a)"undefined"!==typeof c[d]&&(a[d]=c[d])}function e(a){if(a){var c=a.w,d=a.h;m.J.va[0]=-1+2*(a.x+c/2)/m.videoWidth;m.J.va[1]=-1+2*(a.y+d/2)/m.videoHeight;m.J.scale[0]=c/m.videoWidth;m.J.scale[1]=d/m.videoHeight}m.width=m.videoWidth*m.J.scale[0];m.height=m.videoHeight*m.J.scale[1]}function l(){var a=[{type:"2f",name:"u33",value:m.J.va},{type:"2f",name:"u34",value:m.J.scale}];n.H("s47",a);n.H("s48",a)}function k(a,c,d){var e=d[1]*f(a,
c,"dy")*m.X[1],g=d[2]*f(a,c,"ds"),h=q.j[2],k=q.j[3];q.j[0]-=d[0]*f(a,c,"dx")*m.X[0]*h*u.xa[0];q.j[1]-=e*k*u.xa[1];q.j[2]-=g*h*u.xa[2];q.j[2]=Math.min(Math.max(q.j[2],u.kb[0]*m.X[0]),u.kb[1]*m.X[0]);q.j[0]=Math.min(Math.max(q.j[0],0),1);q.j[3]=q.j[2]*m.aspectRatio/m.ia;q.j[1]=Math.min(Math.max(q.j[1],0),1)}function r(a){var c=q.j[2],d=q.j[3],f=(2*Math.random()-1)*a,e=(2*Math.random()-1)*a;q.j[0]+=(2*Math.random()-1)*a*c;q.j[1]+=f*d;q.j[2]+=e*c;q.j[3]=q.j[2]*m.aspectRatio/m.ia}function f(a,c,d){c=V[c].Yb[d];
return(a[c][0]+a[c][1]+a[c][2]+a[c][3])/4}function p(a,c){return(f(a,c,"here")-sa*f(a,c,"notHere"))/V[c].La}function t(){K=z.Z;var a=J[R];q.j[0]=a[0];q.j[1]=a[1];q.j[2]=a[2];q.j[3]=a[3];R=(R+1)%J.length}function w(a,c){O.label=V[E.C].label;O.distance=V[E.C].Db;O.positionScale[0]=q.j[0];O.positionScale[1]=q.j[1];O.positionScale[2]=q.j[2];O.positionScale[3]=q.j[3];O.detectScore=c;O.yaw=a}function A(a){var c=-1,d=-1E12;-1!==[z.Z,z.ra].indexOf(K)&&V.forEach(function(f,e){f=p(a,e);f>d&&(d=f,c=e)});switch(K){case z.Z:K=
z.ra;k(a,c,[1,1,1]);g=0;break;case z.ra:++g;d>I?(v?(K=z.qa,W=c,E.C=c,E.Ga=0):(K=z.Na,aa=0,W=c),k(a,W,[1,1,1])):g>u.ac?t():k(a,c,[1,1,1]);break;case z.Na:++aa;aa>u.cc&&(K=z.qa,E.n=0,E.pa=0,E.C=W,E.M[0]=0,E.M[1]=0);k(a,W,[1,1,1]);r(u.Xb);break;case z.qa:if(v||++E.n>u.ka){var e=v?p(a,E.C):E.pa/u.ka;v||e>I+u.rc?(w(v?Math.PI*f(a,E.C,"yaw"):Math.atan2(E.M[1],E.M[0]),e),ha?(k(a,E.C,ea),e>x?E.Ga=0:++E.Ga>u.$b&&t()):t()):t()}else k(a,E.C,[1,1,1]),r(u.xb*(u.ka-E.n)/u.ka),E.pa+=p(a,E.C),V.forEach(function(c,
d){E.C!==d&&p(a,d)>I*u.sc&&t()}),e=Math.PI*f(a,E.C,"yaw"),E.M[0]+=Math.cos(e),E.M[1]+=Math.sin(e)}}function F(){n.pb([{id:"s47",name:"_",fa:"attribute vec2 a0;uniform vec4 u35;uniform vec2 u33,u34;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);vec2 a=u33+a0*u34;vv0=u35.xy+.5*u35.zw*a;}",$:["a0"],T:[2],c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1","u35","u34","u33"],precision:"lowp"},{id:"s49",name:"_",fa:"attribute vec2 a0;uniform vec4 u35;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u35.xy+.5*u35.zw*a0;}",
$:["a0"],T:[2],c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec3 g=vec3(1.,1.,1.);float c[5];void main(){c[0]=texture2D(u1,vv0-u7*vec2(-1.,0.)).r,c[1]=texture2D(u1,vv0-u7*vec2(0.,-1.)).r,c[2]=texture2D(u1,vv0-u7).r,c[3]=texture2D(u1,vv0-u7*vec2(0.,1.)).r,c[4]=texture2D(u1,vv0-u7*vec2(1.,0.)).r;float a,b;a=min(c[0],c[1]),b=max(c[0],c[1]),c[0]=a,c[1]=b,a=min(c[0],c[2]),b=max(c[0],c[2]),c[0]=a,c[2]=b,a=min(c[0],c[3]),b=max(c[0],c[3]),c[0]=a,c[3]=b,a=min(c[0],c[4]),b=max(c[0],c[4]),c[0]=a,c[4]=b,a=min(c[1],c[2]),b=max(c[1],c[2]),c[1]=a,c[2]=b,a=min(c[1],c[3]),b=max(c[1],c[3]),c[1]=a,c[3]=b,a=min(c[1],c[4]),b=max(c[1],c[4]),c[1]=a,c[4]=b,a=min(c[2],c[3]),b=max(c[2],c[3]),c[2]=a,c[3]=b,a=min(c[2],c[4]),b=max(c[2],c[4]),c[2]=a,c[4]=b,gl_FragColor=vec4(c[2]*g,1.);}",
f:["u1","u35","u7"],precision:"lowp"},{id:"s48",name:"_",fa:"attribute vec2 a0;uniform vec2 u33,u34;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){gl_Position=vec4(a0,0.,1.);vec2 a=u33+a0*u34,b=(a+f)/2.;vv0=b;}",$:["a0"],T:[2],c:"uniform sampler2D u1;uniform vec4 u35;varying vec2 vv0;void main(){vec2 b=u35.xy-.5*u35.zw,c=u35.xy+.5*u35.zw,a=step(b,vv0)*step(vv0,c);gl_FragColor=mix(texture2D(u1,vv0),vec4(0.,1.,0.,1.),a.x*a.y*.5);}",f:["u1","u35","u34","u33"],precision:"lowp"}]);var a=[{type:"1i",
name:"u1",value:0}];n.H("s47",a);n.H("s49",a);n.H("s48",a)}function D(){m.aspectRatio=m.width/m.height;J.splice(0,J.length);m.Ea=Math.round(m.width*y.margins);m.Fa=Math.round(m.height*y.margins);m.Ka=m.width-2*m.Ea;m.Ja=m.height-2*m.Fa;var a=Math.min(m.width,m.height),c,d,f;for(c=0;c<y.nSweepSsteps;++c){var e=y.sweepScaleRange[0]+c/(y.nSweepSsteps-1)*(y.sweepScaleRange[1]-y.sweepScaleRange[0]);e*=a;var g=e/m.width;var h=g*m.aspectRatio;var k=(m.Ka-e)*(m.Ja-e);var l=Math.min(Math.floor(k/(y.sweepStepMinPx*
y.sweepStepMinPx)),y.nSweepXYsteps);l=k/l;var q=Math.round(Math.sqrt(l));var p=Math.round((m.Ka-e)/q);var u=Math.round((m.Ja-e)/q);for(f=0;f<u;++f)for(k=m.Fa+Math.round(e/2+q*f),k/=m.height,d=0;d<p;++d)l=m.Ea+Math.round(e/2+q*d),l/=m.width,J.push([l,k,g,h])}if(y.sweepShuffle)for(a=J,c=a.length-1;0<c;--c)e=Math.floor(Math.random()*(c+1)),g=a[c],a[c]=a[e],a[e]=g;else J.reverse()}function G(d){a=T.a({isLinear:!0,width:m.width,height:m.height,A:d,isPot:!1,isFlipY:!0,isFloat:!1});c=!0}var u={ga_:512,xa:[.05,
.05,.15],ic:{margins:.1,nSweepXYsteps:36,nSweepSsteps:4,sweepScaleRange:[.3,.7],sweepStepMinPx:16,sweepShuffle:!0},kb:[1/15,.9],bc:3,ac:3,La:.15,cc:10,Xb:.015,ka:8,rc:-.02,xb:.01,Cc:.06,sc:.7,$b:20},y=Object.create(u.ic),Q,N=!1,ba=!1,m={aspectRatio:1,ia:1,X:[1,1],width:0,height:0,videoWidth:0,videoHeight:0,Ea:0,Fa:0,Ka:0,Ja:0,wa:"s47",J:{va:[0,0],scale:[1,1]}},J=[],R=0,q={Y:!1,j:[0,0,0,0]},z={Oa:-2,LOADING:-1,Z:0,ra:1,Na:2,qa:3},K=z.Oa,L=-2,V,U;var aa=g=0;var W=-1;var E={n:0,Ga:0,C:-1,pa:0,M:[0,0]};
var P=0;var S=c=a=d=!1,O={distance:0,label:!1,positionScale:[0,0,0,0],detectScore:0,yaw:0},I=1,x=1,v=!1,ha=!1,ea=[2,2,2],sa=1,ta={init:function(a){function c(c){a.callbackReady&&a.callbackReady(c)}if(K!==z.Oa)return c("ALREADY_INITIALIZED");K=z.LOADING;if("undefined"!==typeof a.canvas)N=a.canvas,ba=!1;else if("undefined"===typeof a.canvasId)N=document.createElement("canvas"),ba=!1;else{N=document.getElementById(a.canvasId);if(!N)return c("INVALID_CANVASID"),!1;ba=!0}"undefined"!==typeof a.isDebugRender&&
(ba=a.isDebugRender);ba&&(N.style.display="block");a.scanSettings&&h(y,a.scanSettings);a.canvasSize&&(u.ga_=a.canvasSize);S="undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope;-1!==u.ga_&&(N.width=u.ga_,N.height=u.ga_);"undefined"!==typeof a.video&&a.video?(d=a.video,P=0,m.videoWidth=d.videoWidth,m.videoHeight=d.videoHeight,e(a.videoCrop)):P=1;if(!wa.m({ba:N,width:N.width,height:N.height,debug:!1,fc:c.bind(null,"GLCONTEXT_LOST"),premultipliedAlpha:!1})||
!wa.Ub())return c("GL_INCOMPATIBLE"),!1;0===P&&(G(d),D());F();l();K=z.Z;c(!1);return!0},set_NN:function(a,c,d){if(1===L)c&&c("NN_LOADING");else{var e=function(a){L=0;c&&c(a)};L=1;ia(a,function(a){if(!a)return e("INVALID_NN");try{var c=JSON.parse(a)}catch(Ka){return e("INVALID_NN")}if(!c.exportData||!c.exportData.labels)return e("INVALID_NN");ta.reset_state();Q=new Ia;Q.kc(c.layers);Q.mc({hb:"cpuRGBA2Float",gc:A});q.Y=T.a({isFloat:!1,isPot:!1,width:Q.Mb()});U=Q.Pb();a=c.exportData;c="undefined"===
typeof d?{}:d;sa="undefined"===typeof c.ec?1:c.ec;c=a.labels;var f="undefined"===typeof a.paramsPerLabel?!1:a.paramsPerLabel,g="undefined"===typeof a.inputAspectRatio?1:a.inputAspectRatio;m.X[0]=Math.sqrt(g);m.X[1]=1/Math.sqrt(g);g!==m.ia&&(m.ia=g,D());g=Array(c.length);var h,k;for(k=0;k<U/8;++k)for(h=0;h<U;++h){var l=h+k*U;if(l>=c.length)break;var p=h;var r=8*k;var t=c[l];var v=f&&f[t]&&f[t].thresholdDetect?f[t].thresholdDetect:u.La;var w=a.distances&&a.distances[l]?a.distances[l]:3;g[l]={La:v,label:t,
Db:w,Yb:{here:p+r*U,notHere:p+(r+1)*U,yaw:p+(r+2)*U,dx:p+(r+3)*U,dy:p+(r+4)*U,ds:p+(r+5)*U}}}V=g;e(!1)},function(){e("NOTFOUND_NN")})}},reset_state:function(){R=0;K=z.Z},detect:function(d,e,f){if(K===z.LOADING||0!==L)return O;B.N();O.label=!1;"undefined"!==typeof f&&(I=f.thresholdDetectFactor?f.thresholdDetectFactor:1,x=f.thresholdDetectFactorUnstitch?f.thresholdDetectFactorUnstitch:1,v=f.isSkipConfirmation?!0:!1,ha=f.isKeepTracking?!0:!1,ea=f.trackingFactors?f.trackingFactors:ea);if(0===P)a.refresh();
else if(1===P){if(!c){m.width=e.size.width;m.height=e.size.height;switch(f.cutShader){case "IOS":m.wa="s49";n.H("s49",[{name:"u7",type:"2f",value:[1/m.width,1/m.height]}]);break;default:m.wa="s47"}G(null);D()}a.uc(e.buffer)}d=d?d:u.bc;for(e=0;e<d;++e)q.Y.F(),n.set(m.wa),a.b(0),n.oa("u35",q.j),H.i(!1,!1),q.Y.b(0),Q.B(!1,q.Y),B.N();B.tc();ba&&(b.viewport(0,0,N.width,N.height),n.set("s48"),a.b(0),n.oa("u35",q.j),H.i(!1,!1),S&&b.commit?b.commit():b.flush());return O},get_aspectRatio:function(){return m.width/
m.height},set_scanSettings:function(a){h(y,a);D()},set_videoCrop:function(a){e(a);l()}};return ta}();
;if(typeof(module)!=='undefined'){module.exports=JEEARAPI;}