 /**
 * Jeeliz AR - https://github.com/jeeliz/jeelizAR
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEEARAPI=(function(){function ja(a,c,d){var g=new XMLHttpRequest;g.open("GET",a,!0);g.withCredentials=!1;g.onreadystatechange=function(){4===g.readyState&&(200===g.status?c(g.responseText):"undefined"!==typeof d&&d(g.status))};g.send()}
function ka(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function na(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}
function qa(a){var c=JSON.parse(a);a=c.ne;var d=c.nf,g=c.n,h="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data),e=h.length,m;c=new Uint8Array(e);for(m=0;m<e;++m)c[m]=h.charCodeAt(m);h=new Float32Array(g);e=new Float32Array(d);m=a+d+1;var l,f;for(l=0;l<g;++l){var k=m*l;var p=0===na(c,k)?1:-1;var y=k+1;var u=1,x=0;for(f=y+a-1;f>=y;--f)x+=u*na(c,f),u*=2;f=x;y=c;u=k+1+a;x=e;var v=0,q=x.length;for(k=u;k<u+q;++k)x[v]=na(y,k),++v;for(k=y=0;k<d;++k)y+=e[k]*Math.pow(2,-k-
1);p=0===y&&0===f?0:p*(1+y)*Math.pow(2,1+f-Math.pow(2,a-1));h[l]=p}return h}
var n=function(){function a(a,c){a=b.createShader(a);b.shaderSource(a,c);b.compileShader(a);return b.getShaderParameter(a,b.COMPILE_STATUS)?a:!1}function c(c,f){c=a(b.VERTEX_SHADER,c);f=a(b.FRAGMENT_SHADER,f);var G=b.createProgram();b.attachShader(G,c);b.attachShader(G,f);b.linkProgram(G);return G}function d(a){void 0===a.ba&&(a.ba="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===a.W&&(a.W=["a0"]);void 0===a.P&&(a.P=
[2]);void 0===a.precision&&(b.getShaderPrecisionFormat&&10<=b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT).precision?a.precision="mediump":a.precision="highp");a.id=m++;void 0!==a.cc&&a.cc.forEach(function(c,f){a.c=a.c.replace(c,a.ia[f])});a.Ga=0;a.P.forEach(function(c){a.Ga+=4*c});a.ha=c(a.ba,"precision "+a.precision+" float;\n"+a.c);a.m={};a.f.forEach(function(c){a.m[c]=b.getUniformLocation(a.ha,c)});a.attributes={};a.X=[];a.W.forEach(function(c){var f=b.getAttribLocation(a.ha,c);
a.attributes[c]=f;a.X.push(f)});if(a.g){b.useProgram(a.ha);e=a;h=a.id;for(var f in a.g)b.uniform1i(a.m[f],a.g[f])}a.Qc=!0}function g(a){ta.hc(A);h!==a.id&&(A.O(),h=a.id,e=a,b.useProgram(a.ha),a.X.forEach(function(a){0!==a&&b.enableVertexAttribArray(a)}))}var h=-1,e=!1,m=0,l=!1,f=["u1"],k=["u0"],p={u1:0},y={u0:0},u={u1:0,u2:1},x={u3:0},v={s0:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:f,g:p},s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
f:f,g:p,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",f:["u1","u2"],g:u},s3:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:f,g:p},s4:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",f:["u1","mask"],g:u},s5:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",
f:f,g:p},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",f:f,g:p},s7:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],g:y},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",f:["u0","u4"],g:y},s9:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
f:f,g:p},s10:{c:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",f:["u1","u5","u6"],g:{u1:0,u5:1}},s11:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",f:["u1","u7"],g:p},s12:{c:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
f:["u1","u8"],g:p},s13:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:k,g:y},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",f:k,g:y},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",f:k,g:y},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
f:k,g:y},s17:{c:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u6","u9"],g:{u0:0,u6:1,u9:2}},s18:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",f:k,g:y},s19:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
f:k,g:y},s20:{c:"uniform sampler2D u0;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=exp(a);}",f:["u0","u10"],g:y},s21:{c:"uniform sampler2D u0,u11;uniform float u12;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,f);float b=u12*u12;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u13","u12"],g:{u0:0,u13:1}},s22:{c:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),g=floor(u14.x*fract(b*u14.y)),f=(g*u14.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
f:["u1","u14"],g:p},s23:{c:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),e=texture2D(u16,c);gl_FragColor=d*e;}",f:["u15","u16","u17"],g:{u16:0,u15:1,u17:2}},s24:{c:"uniform float u18;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 a=fract(vv0*u18);vec4 b=texture2D(u15,vv0),c=texture2D(u16,a);gl_FragColor=b*c;}",f:["u16","u15","u18"],g:{u16:0,u15:1}},s25:{c:"uniform float u18;uniform sampler2D u15,u16,u19,u20,u21,u22;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u18,m=floor(i),c=i-m;vec4 n=texture2D(u15,vv0),d=texture2D(u16,c),a=texture2D(u22,vv0);a=a*255.;vec4 o=texture2D(u19,c),p=texture2D(u20,c),q=texture2D(u21,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
f:"u15 u16 u18 u22 u19 u20 u21".split(" "),g:{u16:0,u15:1,u22:3,u19:4,u20:5,u21:6}},s26:{c:"uniform sampler2D u15,u16,u23;uniform float u18,u24,u25,u26;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u24*vv0),g=u24*vv0-a;float b=u18/u24;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u24;float l=u24*u26/u18;vec2 m=l*c,i=(m+d*u25)/u26,e=step(i,j);vec4 n=texture2D(u15,h),o=texture2D(u16,i),p=n*o*e.x*e.y,k=texture2D(u23,h);gl_FragColor=p*u25*u25+k;}",f:"u15 u16 u18 u24 u25 u26 u23".split(" "),g:{u16:0,
u15:1,u23:2}},s27:{c:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",f:["u15","u16"],g:{u16:0,u15:1}},s28:{c:"uniform sampler2D u1,u23;uniform float u27;varying vec2 vv0;void main(){gl_FragColor=texture2D(u23,vv0)+u27*texture2D(u1,vv0);}",f:["u1","u23","u27"],g:{u1:0,u23:1}},s29:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
f:f,g:p,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
f:["u1","u2","u28"],g:u},s31:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u28,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u1,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,c).r-i/g)*j;}",f:["u1","u2","u28"],g:u},s32:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
f:["u3","u7"],g:x},s33:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u7"],g:x},s34:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
f:["u1"],g:p,precision:"lowp"},s35:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",f:["u7","u1"],g:p,precision:"lowp"},s36:{c:"uniform sampler2D u1,u29,u30;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u29,vv0),b=texture2D(u30,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
f:["u1","u29","u30"],g:{u1:0,u29:1,u30:2}}},q={s37:{c:"uniform float u18,u31;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 l=vec2(0.,0.),h=vec2(1.,1.),m=vec2(.5,.5),n=vec2(.01,.01);void main(){vec4 i=texture2D(u23,vv0);float f=1.1111;vec2 a,j,b=l,c=n/u18,k=floor(vv0*u18+c);float p=f*u18;vec2 o=h*(f-1.)/2.;for(float d=0.;d<1.1111;d+=1.){b.x=d;for(float e=0.;e<1.1111;e+=1.)b.y=e,a=(k+u31*(b-o))/u18,a+=step(a,-c),a-=step(h-c,a),j=(k*f+b+m)/p,i+=texture2D(u15,j)*texture2D(u16,a);}gl_FragColor=i,gl_FragColor*=2.2222;}",
f:["u18","u15","u16","u23","u31"],ia:["1.1111","gl_FragColor\\*=2.2222;"]},s38:{c:"uniform float u18,u31,u26;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 m=vec2(0.,0.),j=vec2(1.,1.),n=vec2(.5,.5),u=vec2(.01,.01);void main(){vec4 p=texture2D(u23,vv0);float q=1.1111,i=3.3333;vec2 a,s,t,r,b=m,c=m,d=u/u26,o=floor(vv0*u18+d);float k=q*u26;vec2 v=j*(q-1.)/2.;float w=k/u18;vec2 x=o*i;for(float g=0.;g<1.1111;g+=1.){b.x=g;for(float f=0.;f<1.1111;f+=1.){b.y=f;for(float h=0.;h<3.3333;h+=1.){c.x=h;for(float e=0.;e<3.3333;e+=1.)c.y=e,t=x+c+i*u31*(b-v),a=(t+n)/u26,a+=step(a,-d),a-=step(j-d,a),r=b*i+c,s=(o*w+r+n)/k,p+=texture2D(u15,s)*texture2D(u16,a);}}}gl_FragColor=p,gl_FragColor*=2.2222;}",
f:"u18 u26 u15 u16 u23 u31".split(" "),ia:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},A={xa:function(){return l},l:function(){if(!l){for(var a in v)d(v[a],a);n.set("s0");b.enableVertexAttribArray(0);a=ua.l();l=!0;return a}},jb:function(a){a.forEach(function(a){A.ib(a)})},ib:function(a){v[a.id]=a;d(a,a.id)},Sa:function(a,c,f){c||(c=a);v[c]=Object.create(q[a]);q[a].ia&&q[a].ia.forEach(function(a,d){v[c].c=v[c].c.replace(new RegExp(a,"g"),f[d])});d(v[c],c)},set:function(a){g(v[a])},Bb:function(a){return"undefined"!==
typeof v[a]},Dc:function(){return e.Ac},O:function(){-1!==h&&(h=-1,e.X.forEach(function(a){0!==a&&b.disableVertexAttribArray(a)}))},Ba:function(){var a=0;e.X.forEach(function(c,f){f=e.P[f];b.vertexAttribPointer(c,f,b.FLOAT,!1,e.Ga,a);a+=4*f})},zc:function(){b.enableVertexAttribArray(0)},Ca:function(){b.vertexAttribPointer(e.X[0],2,b.FLOAT,!1,8,0)},cd:function(a,c){b.uniform1i(e.m[a],c)},D:function(a,c){b.uniform1f(e.m[a],c)},H:function(a,c,f){b.uniform2f(e.m[a],c,f)},dd:function(a,c){b.uniform2fv(e.m[a],
c)},fd:function(a,c){b.uniform3fv(e.m[a],c)},ed:function(a,c,f,d){b.uniform3f(e.m[a],c,f,d)},ja:function(a,c){b.uniform4fv(e.m[a],c)},gd:function(a,c){b.uniformMatrix2fv(e.m[a],!1,c)},hd:function(a,c){b.uniformMatrix3fv(e.m[a],!1,c)},jd:function(a,c){b.uniformMatrix4fv(e.m[a],!1,c)},M:function(a,c){A.set(a);c.forEach(function(a){switch(a.type){case "4f":b.uniform4fv(e.m[a.name],a.value);break;case "3f":b.uniform3fv(e.m[a.name],a.value);break;case "2f":b.uniform2fv(e.m[a.name],a.value);break;case "1f":b.uniform1f(e.m[a.name],
a.value);break;case "1i":b.uniform1i(e.m[a.name],a.value);break;case "mat2":b.uniformMatrix2fv(e.m[a.name],!1,a.value);break;case "mat3":b.uniformMatrix3fv(e.m[a.name],!1,a.value);break;case "mat4":b.uniformMatrix4fv(e.m[a.name],!1,a.value)}})}};return A}(),b,va=function(){function a(a){console.log("ERROR in ContextFeedForward : ",a);return!1}var c=!1,d=!1,g=!1,h=!1,e=!0,m=!1,l={u:function(){return c.width},G:function(){return c.height},Ec:function(){return c},Cc:function(){return b},o:function(){return e},
flush:function(){b.flush()},Fb:function(){m||(m=new Uint8Array(c.width*c.height*4));b.readPixels(0,0,c.width,c.height,b.RGBA,b.UNSIGNED_BYTE,m);return m},Gc:function(){return c.toDataURL("image/jpeg")},Hc:function(){z.F();d||(d=document.createElement("canvas"),g=d.getContext("2d"));d.width=c.width;d.height=c.height;var a=l.Fb(),e=g.createImageData(d.width,d.height),h,m,u=d.width,x=d.height,v=e.data;for(m=0;m<x;++m){var q=x-m-1;for(h=0;h<u;++h){var A=4*(m*u+h);var G=4*(q*u+h);v[A]=a[G];v[A+1]=a[G+
1];v[A+2]=a[G+2];v[A+3]=a[G+3]}}g.putImageData(e,0,0);return d.toDataURL("image/png")},Fc:function(a){!d&&a&&(d=document.createElement("canvas"),g=d.getContext("2d"));var f=a?d:document.createElement("canvas");f.width=c.width;f.height=c.height;(a?g:f.getContext("2d")).drawImage(c,0,0);return f},l:function(f){f.tb&&!f.Y?c=document.getElementById(f.tb):f.Y&&(c=f.Y);c||(c=document.createElement("canvas"));c.width=f&&void 0!==f.width?f.width:512;c.height=f&&void 0!==f.height?f.height:512;"undefined"===
typeof f&&(f={});void 0===f.premultipliedAlpha&&(f.premultipliedAlpha=!1);void 0===f.Ua&&(f.Ua=!0);void 0===f.antialias&&(f.antialias=!1);var d={antialias:f.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:f.premultipliedAlpha,stencil:!1,depth:f.Ua};(b=c.getContext("webgl2",d))?e=!0:((b=c.getContext("webgl",d))||(b=c.getContext("experimental-webgl",d)),e=!1);if(!b)return a("WebGL is not enabled");(h=b.getExtension("WEBGL_lose_context"))&&c.addEventListener("webglcontextlost",f.Zb,!1);
if(!B.l())return a("Not enough capabilities");if(!B.ob()&&e)return a("Your configuration cannot process color buffer float");b.clearColor(0,0,0,0);b.disable(b.DEPTH_TEST);b.disable(b.BLEND);b.disable(b.DITHER);b.disable(b.STENCIL_TEST);b.GENERATE_MIPMAP_HINT&&b.hint(b.GENERATE_MIPMAP_HINT,b.FASTEST);b.disable(b.SAMPLE_ALPHA_TO_COVERAGE);b.disable(b.SAMPLE_COVERAGE);return!0},Ob:function(){if(!n.l())return!1;b.depthFunc(b.LEQUAL);b.clearDepth(1);return!0}};return l}(),ta=function(){var a="undefined"===
typeof n?JEShaders:n;return{hc:function(c){a!==c&&(a.O(),a=c)},xa:function(){return a.xa()},Ca:function(){a.Ca()},Ba:function(){a.Ba()},O:function(){a.O()},set:function(c){a.set(c)}}}(),M=function(){var a,c,d=0,g=-2,h=-2,e=!1,m={reset:function(){h=g=-2},l:function(){e||(a=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,a),b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),b.STATIC_DRAW),c=b.createBuffer(),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c),b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,
1,2]),b.STATIC_DRAW),m.oa(),e=!0)},a:function(a){var c=d++,e=a.T.length,m=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,m);b.bufferData(b.ARRAY_BUFFER,a.gb instanceof Float32Array?a.gb:new Float32Array(a.gb),b.STATIC_DRAW);g=c;if(a.T){var l=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,l);if(65536>a.T.length){var u=Uint16Array;var x=b.UNSIGNED_SHORT;var v=2}else u=Uint32Array,x=b.UNSIGNED_INT,v=4;b.bufferData(b.ELEMENT_ARRAY_BUFFER,a.T instanceof u?a.T:new u(a.T),b.STATIC_DRAW);h=c}var q={nb:function(a){g!==
c&&(b.bindBuffer(b.ARRAY_BUFFER,m),g=c);a&&ta.Ba()},lb:function(){h!==c&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,l),h=c)},bind:function(a){q.nb(a);q.lb()},xc:function(){b.drawElements(b.TRIANGLES,e,x,0)},yc:function(a,c){b.drawElements(b.TRIANGLES,a,x,c*v)},remove:function(){b.deleteBuffer(m);a.T&&b.deleteBuffer(l);q=null}};return q},oa:function(){-1!==g&&(b.bindBuffer(b.ARRAY_BUFFER,a),g=-1);-1!==h&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c),h=-1)},h:function(a,c){a&&M.oa();c&&ta.Ca();b.drawElements(b.TRIANGLES,
3,b.UNSIGNED_SHORT,0)},Eb:function(){b.deleteBuffer(a);b.deleteBuffer(c)}};return m}(),z=function(){var a,c,d,g=!1,h={s:-2,Cb:1};return{l:function(){if(!g){a=b.createFramebuffer();var e=B.o();c=e&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=e&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;g=!0}},Jc:function(){return c},ua:function(){return d},R:function(){return b.FRAMEBUFFER},Lc:function(){return h},Bc:function(){return a},a:function(d){void 0===d.Ta&&(d.Ta=!1);var g=d.U?d.U:!1,e=
d.width,f=void 0!==d.height?d.height:d.width,k=a,p=!1,y=!1,u=0;g&&(e=e?e:g.u(),f=f?f:g.G());var x={eb:function(){y||(k=b.createFramebuffer(),y=!0,u=h.Cb++)},hb:function(){x.eb();x.j();p=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,p);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,e,f);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,p);b.clearDepth(1)},bind:function(a,d){u!==h.s&&(b.bindFramebuffer(c,k),h.s=u);g&&g.j();d&&b.viewport(0,0,e,f);a&&b.clear(b.COLOR_BUFFER_BIT|
b.DEPTH_BUFFER_BIT)},qc:function(){u!==h.s&&(b.bindFramebuffer(c,k),h.s=u)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},tc:function(){b.clear(b.COLOR_BUFFER_BIT)},uc:function(){b.clear(b.DEPTH_BUFFER_BIT)},ic:function(){b.viewport(0,0,e,f)},j:function(){u!==h.s&&(b.bindFramebuffer(c,k),h.s=u)},rtt:function(a){g=a;h.s!==u&&(b.bindFramebuffer(b.FRAMEBUFFER,k),h.s=u);a.j()},F:function(){b.bindFramebuffer(c,null);h.s=-1},resize:function(a,c){e=a;f=c;p&&(b.bindRenderbuffer(b.RENDERBUFFER,
p),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,e,f))},remove:function(){b.bindFramebuffer(c,k);b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0);p&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null);b.bindFramebuffer(c,null);b.deleteFramebuffer(k);p&&b.deleteRenderbuffer(p);x=null}};d.Ta&&x.hb();return x},F:function(){b.bindFramebuffer(c,null);h.s=-1},mc:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.viewport(0,0,
B.u(),B.G());h.s=-1},reset:function(){h.s=-2},J:function(){0!==h.s&&(b.bindFramebuffer(c,a),h.s=0)},clear:function(){b.viewport(0,0,B.u(),B.G());b.clear(b.COLOR_BUFFER_BIT)}}}(),Q=function(){function a(a){b.bindTexture(b.TEXTURE_2D,a)}function c(a){T[0]=a;a=t[0];var c=a>>16&32768,I=a>>12&2047,d=a>>23&255;return 103>d?c:142<d?c|31744|((255==d?0:1)&&a&8388607):113>d?(I|=2048,c|(I>>114-d)+(I>>113-d&1)):c=(c|d-112<<10|I>>1)+(I&1)}function d(a){var I=new Uint16Array(a.length);a.forEach(function(a,d){I[d]=
c(a)});return I}function g(){if(null!==H.va)return H.va;var a=e(d([1,1,1,1]));return null===a?!0:H.va=a}function h(){if(null!==H.wa)return H.wa;var a=e(new Uint8Array([255,255,255,255]));return null===a?!0:H.wa=a}function e(a){if(!ta.xa()||!v)return null;a=F.a({isFloat:!1,B:!0,array:a,width:1});z.F();b.viewport(0,0,1,1);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);ta.set("s0");a.Ja(0);M.h(!1,!0);var c=new Uint8Array(4);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,c);c=.9<c[0];a.remove();z.J();
return c}var m=0,l,f=0,k,p=!1,y,u,x,v=!1,q=!1,A,G,E,P=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],r=!1,ba=!1,T=new Float32Array(1),t=new Int32Array(T.buffer),H={va:null,wa:null},F={l:function(){if(!v){u=[b.RGB,!1,b.RGB,b.RGBA];x=[b.RGB,!1,b.RGB,b.RGBA];l=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7];r="undefined"!==typeof JEContext;ba="undefined"!==typeof B;r&&JEContext.Wc()&&l.push(b.TEXTURE8,b.TEXTURE9);k=[-1,-1,-1,-1,-1,-1,-1,-1];y=[b.UNSIGNED_BYTE,b.FLOAT,
b.FLOAT];if(!p){for(var a=new Float32Array(16384),c=0;16384>c;++c)a[c]=2*Math.random()-1;p={random:F.a({isFloat:!0,isPot:!0,array:a,width:64}),fb:F.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}v=!0}},Nb:function(){F.oc()},Oc:function(){return p.fb},oc:function(){y[1]=B.da()},ec:function(){x=u=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},Yc:function(a,c){n.set("s1");z.F();var I=a.u(),d=a.G();b.viewport(0,0,I,d);a.b(0);M.h(!1,!1);b.readPixels(0,0,I,d,b.RGBA,b.UNSIGNED_BYTE,c)},Db:function(c,
d,f){b.activeTexture(b.TEXTURE0);m=0;var I=b.createTexture();a(I);var e=B.o()&&b.RGBA32F?b.RGBA32F:b.FLOAT;d=d instanceof Float32Array?d:new Float32Array(d);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,f);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,c.u(),c.G(),0,b.RGBA,e,d);a(null);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);z.J();n.set("s0");c.C();b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);
a(I);M.h(!0,!1);b.deleteTexture(I)},a:function(c){function e(){a(K);da&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,da);c.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,c.Wa?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,c.K?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));c.ea&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.Ic().TEXTURE_MAX_ANISOTROPY_EXT,
JESETTINGS.pc);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,c.isLinear?b.LINEAR:b.NEAREST);c.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,c.isMipmap&&!ha?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,c.isMipmap&&!ha?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);S=u[c.aa-1];U=x[c.aa-1];V=y[p];if(B.o()){var d=b.RGBA32F;S===b.RGBA&&V===b.FLOAT&&d&&(U=d);S===b.RGB&&V===b.FLOAT&&d&&(U=d,S=b.RGBA)}if(c.B&&!c.isFloat||c.isFloat&&c.isMipmap&&ua.Qb())(d=b.RGBA16F)&&
(U=d),V=B.da();c.Ya&&"undefined"!==typeof b.texStorage2D&&(T=c.Ya);c.Xa&&4===c.aa&&(S=JEContext.Mc());if(c.v)b.texImage2D(b.TEXTURE_2D,0,U,S,V,c.v);else if(c.url)b.texImage2D(b.TEXTURE_2D,0,U,S,V,X);else if(L){try{var e=b.getError();e!==b.NO_ERROR&&console.log("GLERR in SharedTexture :",e);b.texImage2D(b.TEXTURE_2D,0,U,w,C,0,S,V,L);b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,U,w,C,0,S,V,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,w,C,0,b.RGBA,b.UNSIGNED_BYTE,null))}catch(Ia){b.texImage2D(b.TEXTURE_2D,
0,U,w,C,0,S,V,null)}c.isKeepArray||(L=null)}else b.texImage2D(b.TEXTURE_2D,0,U,w,C,0,S,V,null);if(c.isMipmap)if(!ha&&N)N.ta(),oa=!0;else if(ha){e=Math.log(Math.min(w,C))/Math.log(2);la=Array(1+e);la[0]=K;for(d=1;d<=e;++d){var f=Math.pow(2,d);var g=w/f;f=C/f;var h=b.createTexture();a(h);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,U,g,f,0,S,V,null);a(null);la[d]=h}oa=!0}a(null);k[m]=-1;da&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,
!1);ia=!0;O&&N&&(O(N),O=!1)}"undefined"===typeof c.isFloat&&(c.isFloat=!1);"undefined"===typeof c.B&&(c.B=!1);"undefined"===typeof c.isPot&&(c.isPot=!0);"undefined"===typeof c.isLinear&&(c.isLinear=!1);"undefined"===typeof c.isMipmap&&(c.isMipmap=!1);"undefined"===typeof c.pa&&(c.pa=!1);void 0===c.ea&&(c.ea=!1);void 0===c.K&&(c.K=!1);void 0===c.Wa&&(c.Wa=!1);void 0===c.Xa&&(c.Xa=!1);void 0===c.aa&&(c.aa=4);void 0===c.Va&&(c.Va=!1);"undefined"===typeof c.isFlipY&&(c.isFlipY=c.url||c.array?!0:!1);"undefined"===
typeof c.isKeepArray&&(c.isKeepArray=!1);c.data&&(c.array="string"===typeof c.data?qa(c.data):c.isFloat?new Float32Array(c.data):new Uint8Array(c.data),c.isFlipY=!1);var p=0,I=c.v?!0:!1,v=null,t=null,H=!1,aa=null;c.isFloat&&(c.B=!0);c.B&&(p=1);c.Va||B.o()||!c.isFloat||!ba||B.La()||(c.isFloat=!1);c.isFloat&&(p=2);c.ea&&r&&!JEContext.Rc()&&(c.ea=!1);var K=b.createTexture(),O=c.pa,X=null,L=!1,w=0,C=0,ia=!1,ca=f++,pa=!1,ea,fa,ra,ma,U,S,V,da=c.isFlipY,ha=c.B&&c.isMipmap&&ua&&!ua.qb(),la,T=-1,oa=!1;"undefined"!==
typeof c.width&&c.width&&(w=c.width,C="undefined"!==typeof c.height&&c.height?c.height:w);var N={get:function(){return K},u:function(){return w},G:function(){return C},Pc:function(){return c.url},Sc:function(){return c.isFloat},Uc:function(){return c.B},Vc:function(){return c.isLinear},ta:function(){b.generateMipmap(b.TEXTURE_2D)},Ka:function(c,d){ha?(c||(c=N.Qa()),N.na(d),a(la[c]),k[d]=-1):N.b(d)},Qa:function(){-1===T&&(T=Math.log(w)/Math.log(2));return T},Pa:function(c){if(ha){c||(c=N.Qa());n.set("s11");
N.na(0);var d,e=w,f=C;for(d=1;d<=c;++d)e/=2,f/=2,n.H("u7",.25/e,.25/f),b.viewport(0,0,e,f),a(la[d-1]),b.framebufferTexture2D(z.R(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,la[d],0),M.h(!1,1===d);k[0]=-1}else N.ta()},na:function(a){a!==m&&(b.activeTexture(l[a]),m=a)},b:function(c){if(!ia)return!1;N.na(c);if(k[c]===ca)return!1;a(K);k[c]=ca;return!0},Ja:function(c){b.activeTexture(l[c]);m=c;a(K);k[c]=ca},j:function(){b.framebufferTexture2D(z.R(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,K,0)},C:function(){b.viewport(0,
0,w,C);b.framebufferTexture2D(z.R(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,K,0)},md:function(){b.framebufferTexture2D(z.R(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},resize:function(a,c){w=a;C=c;e()},clone:function(a){a=F.a({width:w,height:C,B:c.B,isFloat:c.isFloat,isLinear:c.isLinear,K:c.K,isFlipY:a?!da:da,isPot:c.isPot});ta.set("s0");z.J();a.j();b.viewport(0,0,w,C);N.b(0);M.h(!0,!0);return a},ic:function(){b.viewport(0,0,w,C)},remove:function(){b.deleteTexture(K);N=null},refresh:function(){N.Ja(0);da&&
b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);I?b.texImage2D(b.TEXTURE_2D,0,U,S,b.UNSIGNED_BYTE,c.v):b.texImage2D(b.TEXTURE_2D,0,U,w,C,0,S,V,L);da&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Ma:function(){var a=w*C*4;fa=[new Uint8Array(a),new Uint8Array(a),new Uint8Array(a),new Uint8Array(a)];ea=[new Float32Array(fa[0].buffer),new Float32Array(fa[1].buffer),new Float32Array(fa[2].buffer),new Float32Array(fa[3].buffer)];ra=new Uint8Array(4*a);ma=new Float32Array(ra.buffer);pa=!0},bb:function(){pa||N.Ma();
b.readPixels(0,0,w,4*C,b.RGBA,b.UNSIGNED_BYTE,ra);var a,c=w*C,d=2*c,e=3*c;for(a=0;a<c;++a)ea[0][a]=ma[a],ea[1][a]=ma[a+c],ea[2][a]=ma[a+d],ea[3][a]=ma[a+e];return ea},Na:function(){z.F();n.set("s12");N.b(0);b.viewport(0,0,w,4*C);for(var a=0;4>a;++a)b.viewport(0,C*a,w,C),n.ja("u8",P[a]),M.h(!1,0===a)},nc:function(c){var d=V===y[0]&&!h();a(K);da&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,da);d?(H||(v=document.createElement("canvas"),v.width=w,v.height=C,t=v.getContext("2d"),aa=t.createImageData(w,C),H=!0),
aa.data.set(c),t.putImageData(aa,0,0),b.texImage2D(b.TEXTURE_2D,0,U,S,V,v)):b.texImage2D(b.TEXTURE_2D,0,U,w,C,0,S,V,c);k[m]=ca;da&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},nd:function(c,d){a(K);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,d);b.texImage2D(b.TEXTURE_2D,0,U,S,V,c);k[m]=ca;d&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},$c:function(a,d){var e=w*C,f=4*e;a=c.B?a?"RGBE":"JSON":"RGBA";d&&(a=d);d=B.o()&&!1;switch(a){case "RGBE":var g="s39";break;case "JSON":g=d?"s0":"s12";break;case "RGBA":case "RGBAARRAY":g=
"s6"}pa||("RGBA"===a||"RGBE"===a||"RGBAARRAY"===a?(fa=new Uint8Array(f),pa=!0):"JSON"!==a||d||N.Ma());z.F();n.set(g);N.b(0);if("RGBA"===a||"RGBE"===a||"RGBAARRAY"===a){b.viewport(0,0,w,C);M.h(!0,!0);b.readPixels(0,0,w,C,b.RGBA,b.UNSIGNED_BYTE,fa);if("RGBAARRAY"===a)return{data:fa};q||(A=document.createElement("canvas"),G=A.getContext("2d"),q=!0);A.width=w;A.height=C;E=G.createImageData(w,C);E.data.set(fa);G.putImageData(E,0,0);var h=A.toDataURL("image/png")}else if("JSON"===a)if(d)h=new Float32Array(e),
b.viewport(0,0,w,C),M.h(!0,!0),b.readPixels(0,0,w,C,b.RGBA,b.FLOAT,h);else{for(h=0;4>h;++h)b.viewport(0,C*h,w,C),n.ja("u8",P[h]),M.h(!h,!h);N.bb();h=Array(e);for(g=0;g<e;++g)h[4*g]=ea[0][g],h[4*g+1]=ea[1][g],h[4*g+2]=ea[2][g],h[4*g+3]=ea[3][g]}return{format:a,data:h,width:w,height:C,isMirrorY:c.K,isFlipY:"RGBA"===a?c.isFlipY:!c.isFlipY}}};c.isMipmap&&!ha&&ia&&!oa&&(N.ta(),oa=!0);if(c.url)a(K),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),X=new Image,X.wc="Anonymous",X.crossOrigin=
"Anonymous",X.src=c.url,X.onload=function(){w=X.width;C=X.height;e()};else if(c.v){var sa=function(){w=void 0!==c.v.videoWidth?c.v.videoWidth:c.v.width;C=void 0!==c.v.videoHeight?c.v.videoHeight:c.v.height;w?e():setTimeout(sa,1)};sa()}else c.array?(c.B&&!c.isFloat?c.array instanceof Uint16Array?(L=c.array,e()):g()?(L=d(c.array),e()):(e(),F.Db(N,c.array,da)):(L=c.isFloat?c.array instanceof Float32Array?c.array:new Float32Array(c.array):c.array instanceof Uint8Array?c.array:new Uint8Array(c.array),
e()),c.isKeepArray||(L&&L!==c.array&&(L=null),delete c.array)):e();N.Kb=N.u;O&&ia&&(O(N),O=!1);return N},F:function(c){c!==m&&(b.activeTexture(l[c]),m=c);k[c]=-1;a(null)},rc:function(a){p.random.b(a)},reset:function(){for(var a=0;a<l.length;++a)k[a]=-1;m=-1},Zc:function(){m=-1},kd:function(){for(var a=0;a<l.length;++a)F.F(a)},Eb:function(){p&&(p.random.remove(),p.fb.remove())},ld:function(a,c){if("RGBA"===a.format||"RGBE"===a.format){var d=new Image;d.src=a.data;d.onload=function(){F.a({K:a.isMirrorY,
isFlipY:a.isFlipY,isFloat:!1,v:d,pa:function(d){if("RGBA"===a.format)c(d);else{var e=a.width,f=a.height,g=F.a({K:a.isMirrorY,isFloat:!0,width:e,height:f,isFlipY:a.isFlipY});z.J();b.viewport(0,0,e,f);n.set("s40");g.j();d.b(0);M.h(!0,!0);F.F(0);c(g);b.flush();setTimeout(d.remove,50)}}})}}else"JSON"===a.format?c(F.a({isFloat:!0,isFlipY:a.isFlipY,width:a.width,height:a.height,array:new Float32Array(a.data)})):c(!1)}};return F}(),B=function(){function a(){c="undefined"===typeof va?JEContext:va;d=!0}var c,
d=!1,g=!1,h=!1,e=!1,m=!1,l=!1,f=!1,k=!1,p=!1,y=!1,u=!1,x=!0,v=!0,q=!0,A,G="undefined"===typeof window?{}:window,E={l:function(){if(d)return!0;a();E.Oa();E.sa();E.zb();E.Ab();z.l();Q.l();if(!E.ub())return!1;M.l();Q.Nb();return!0},u:function(){d||a();return c.u()},G:function(){d||a();return c.G()},o:function(){d||a();return c.o()},zb:function(){u=(y=b.getExtension("EXT_color_buffer_float")||b.getExtension("WEBGL_color_buffer_float")||b.getExtension("OES_color_buffer_float"))?!0:!1;G.GL_EXT_COLORBUFFERFLOAT=
y},Ab:function(){b.getExtension("EXT_color_buffer_half_float")||b.getExtension("WEBGL_color_buffer_half_float")||b.getExtension("OES_color_buffer_half_float")},Oa:function(){if(!g){this.o()||(h=b.getExtension("OES_texture_float")||b.getExtension("MOZ_OES_texture_float")||b.getExtension("WEBKIT_OES_texture_float"),m=(G.GL_EXT_FLOAT=h)?!0:!1);if(m||this.o())e=b.getExtension("OES_texture_float_linear")||b.getExtension("MOZ_OES_texture_float_linear")||b.getExtension("WEBKIT_OES_texture_float_linear"),
G.GL_EXT_FLOATLINEAR=e;g=!0}},sa:function(){if(!p){if(!this.o()){if(l=b.getExtension("OES_texture_half_float")||b.getExtension("MOZ_OES_texture_half_float")||b.getExtension("WEBKIT_OES_texture_half_float"))A=l.HALF_FLOAT_OES,f=!0;G.GL_EXT_HALFFLOAT=l}if(f||this.o())k=b.getExtension("OES_texture_half_float_linear")||b.getExtension("MOZ_OES_texture_half_float_linear")||b.getExtension("WEBKIT_OES_texture_half_float_linear"),G.GL_EXT_HALFFLOATLINEAR=k;p=!0}},da:function(){if(E.o())return b.HALF_FLOAT;
E.sa();return f?A:b.FLOAT},La:function(){return x},pb:function(){return v},sc:function(){return q},ob:function(){return u},wb:function(){v=x=!0;var a=b.createFramebuffer();b.bindFramebuffer(b.FRAMEBUFFER,a);var c=b.createTexture();b.bindTexture(b.TEXTURE_2D,c);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,E.o()&&b.RGBA32F?b.RGBA32F:b.RGBA,1,1,0,b.RGBA,b.FLOAT,null);b.framebufferTexture2D(z.R(),
b.COLOR_ATTACHMENT0,b.TEXTURE_2D,c,0);var d=b.checkFramebufferStatus(z.ua());d!==b.FRAMEBUFFER_COMPLETE&&(x=!1);b.texImage2D(b.TEXTURE_2D,0,E.o()&&b.RGBA16F?b.RGBA16F:b.RGBA,1,1,0,b.RGBA,E.da(),null);b.framebufferTexture2D(z.R(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,c,0);d=b.checkFramebufferStatus(z.ua());d!==b.FRAMEBUFFER_COMPLETE&&(v=!1);b.bindTexture(b.TEXTURE_2D,null);b.bindFramebuffer(b.FRAMEBUFFER,null);b.deleteTexture(c);b.deleteFramebuffer(a)},vb:function(){var a=z.a({width:1});a.eb();var c=Q.a({width:1,
isFloat:!0,aa:3});a.j();c.j();b.flush();b.checkFramebufferStatus(z.ua())!==b.FRAMEBUFFER_COMPLETE?(Q.ec(),q=!1):q=!0;a.remove();c.remove()},ub:function(){E.wb();if(!x&&!v)return!1;E.vb();return!0}};return E}(),ua=function(){var a=!1,c=[.8,1,.8,1],d=0,g,h=new Uint8Array(4),e=c.concat(c,c,c),m=!0,l={l:function(){function c(a,c,d,e){b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,e?b.NEAREST_MIPMAP_NEAREST:b.LINEAR);try{var f=b.getError();f!==b.NO_ERROR&&console.log("GLERR in test_mipmapping() :",
f);b.texImage2D(b.TEXTURE_2D,0,a,2,2,0,b.RGBA,c,d);f=b.getError();if(f!==b.NO_ERROR)return!1}catch(P){return!1}e&&b.generateMipmap(b.TEXTURE_2D);M.oa();M.h(!1,!0);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,h);f=b.getError();f===b.INVALID_OPERATION&&"undefined"!==typeof b.PIXEL_PACK_BUFFER&&(b.bindBuffer(b.PIXEL_PACK_BUFFER,null),b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,h),f=b.getError());return f!==b.NO_ERROR?!1:0!==h[0]}function k(a){return B.La()&&c(y,b.FLOAT,new Float32Array(e),a)?(d=3,!0):
!1}function l(a){return B.pb()?c(u,B.da(),new Uint16Array(e),a)||c(u,b.FLOAT,new Float32Array(e),a)?(d=2,!0):!1:!1}B.Oa();B.sa();var y=b.RGBA,u=b.RGBA;if(va.o()){var x=b.RGBA32F;x&&(y=x);(x=b.RGBA16F)&&(u=x)}M.l();z.reset();z.F();b.viewport(0,0,1,1);n.set("s0");a=!0;g=b.createTexture();b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,g);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.REPEAT);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.REPEAT);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,
b.NEAREST);if(l(!0)||k(!0))return!0;m=!1;if(l(!1)||k(!1))return!0;if(va.o()){u=y=b.RGBA;if(l(!0)||k(!0))return!0;m=!1;if(l(!1)||k(!1))return!0}return!1},qb:function(){return m},Kc:function(){return d},Tc:function(){a||l.l();return 3===d},Qb:function(){a||l.l();return 2===d}};return l}(),wa={a:function(a){var c=Q.a(a.alpha),d=Q.a(a.beta);return{yb:function(){c.b(1);d.b(2)}}}},za={a:function(a){var c=a.jc;c.index=a.index;c.L=a.L;c.parent=a.parent;switch(c.type){case "input":a=xa.a(c);break;default:a=
ya.a(c)}return a}},xa={a:function(a){"undefined"===typeof a.sift&&(a.sift=!1);"undefined"===typeof a.DWT&&(a.DWT=!1);"undefined"===typeof a.blur&&(a.blur=!1);"undefined"===typeof a.siftOutWidth&&(a.siftOutWidth=!1);"undefined"===typeof a.filterBank&&(a.filterBank=!1);"undefined"===typeof a.poolType&&(a.poolType="max");"undefined"===typeof a.postpreprocessing&&(a.postpreprocessing="copy");"undefined"===typeof a.density&&(a.density=1);a.filterBank&&(FilterBank.bd(a.poolType,a.postpreprocessing),FilterBank.ad(a.density));
var c=!1;if(a.mask){c=!0;SETTINGS&&void 0!==SETTINGS.kb&&(a.mask=SETTINGS.kb+a.mask);var d=Q.a({isFloat:!1,url:a.mask})}var g=!1,h="undefined"!==typeof a.preprocessing?a.preprocessing:!1,e=!1;a.sift?Sift.l({Mb:b,Y:!1,width:a.size,Xc:a.siftOutWidth}):a.DWT&&DWT.l({Mb:b,Y:!1,width:a.size});switch(h){case "sobel":var m="s30";e=!0;break;case "meanNormalization":m="s31";e=!0;break;case "grayScale":m="s29";e=!1;break;case "copy":m="s0";break;case "inputLightRegulation":m="s29";Aa.l({width:a.size,Za:a.nBlurPass,
Pb:!1});g=!0;break;case "direct":case "none":m=!1;break;default:m="s3"}c&&(m+="Mask");if(a.blur)var l=Q.a({isFloat:!1,isPot:!1,width:a.size});var f=Q.a({isFloat:!1,isPot:!1,width:a.size}),k={u:function(){return a.sift?Sift.S():a.filterBank?FilterBank.S():a.size},S:function(){return k.u()},Ib:function(){return a.sift?Sift.$():a.DWT?DWT.$():a.filterBank?FilterBank.$():g?Aa.$():f},w:function(){z.J();a.blur&&(l.C(),n.set("s41"),n.H("u7",1/a.size,1/a.size),M.h(!1,!0),l.b(0));m&&(n.set(m),e&&n.D("u28",
1/a.size),f.C(),c&&d.b(1),M.h(!1,!1),f.b(0),g?Aa.ga_(f):a.sift?(n.O(),Sift.ga_()):a.DWT?(n.O(),DWT.ga_(4)):a.filterBank&&(n.O(),FilterBank.ga_(f)))}};return k}},ya={a:function(a){"undefined"===typeof a.disableNormalize&&(a.disableNormalize=!1);var c=[],d=[],g,h,e=!1,m,l=!0,f,k,p=a.isReorganize?a.isReorganize:!1,y=a.kernelsNumber?!0:!1,u=a.dynPelu?wa.a(a.dynPelu):!1,x=u?!0:!1,v={isEnabled:!1},q;if("softmax"===a.type){a.activation="softmax";a.size=Math.pow(2,Math.ceil(Math.log(Math.sqrt(a.num_classes))/
Math.log(2)));a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.L.S();a.gain="undefined"!==typeof a.gain?a.gain:1;n.M("s20",[{type:"1f",name:"u10",value:a.gain}]);var A=Q.a({isFloat:!0,isPot:!1,width:a.size}),G=Q.a({isFloat:!0,isPot:!1,width:a.size,isMipmap:!0});l=!1;var E=new Uint8Array(Math.pow(4*a.size,2)),P;for(P=0;P<a.size*a.size;++P){var r=P<a.num_classes?255:0;E[4*P]=r;E[4*P+1]=r;E[4*P+2]=r;E[4*P+3]=r}var ba=Q.a({isFloat:!1,isPot:!1,width:a.size,array:E})}else a.cost?(a.sparsity="undefined"!==
typeof a.sparsity?a.sparsity:a.L.S(),l=!1):"full"===a.connectivityUp&&(a.sparsity=a.L.S());var T={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",softmax:"s20",dynPelu:"s17"}[a.activation],t=a.sparsity*a.sparsity,H=!1,F=a.size;if(a.maxPooling){switch(a.maxPooling.size){case 2:var I="s32";break;case 4:I="s33"}H=!0;F/=a.maxPooling.size;var R=Q.a({isFloat:!0,isPot:!1,width:F})}var J=void 0!==a.Yb&&a.Yb?!0:!1,Z=null,W=null,D=null;J&&(Z="s42"+a.index.toString(),n.Sa("s42",
Z,[((a.normalization.n-1)/2).toFixed(1)]),n.M(Z,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/a.size,1/a.size]},{type:"1f",name:"u6",value:a.normalization.alpha},{type:"1f",name:"u9",value:a.normalization.beta},{type:"1f",name:"u32",value:a.normalization.k}]),W=Q.a({isFloat:!0,isPot:!0,width:a.size}),D=Q.a({isFloat:!0,isPot:!0,width:a.size}));var Y,aa,K,O;l&&(O=Q.a({isFloat:!0,isPot:!1,width:a.size}));var X=Q.a(a.bias),L,w={u:function(){return a.size},S:function(){return F},Ra:function(){return a.num_classes},
mb:function(a){q.b(a)},ac:function(){a.remap&&a.remap.isEnabled&&(v={isEnabled:!0,Tb:Q.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),width:a.remap.maskTexture.width,isPot:!1}),layers:a.remap.layers.map(function(c){return a.parent.Hb(c)}),depth:a.remap.depth})},gc:function(){switch(a.connectivityUp){case "gaussian":L=Ba.a(a.connectivity);break;case "direct":L=Ca.a(a.connectivity);break;case "square":L=Da.a(a.connectivity);break;case "squareFast":L=Ea.a(a.connectivity,a.activation);
break;case "full":L=Fa.a(a.connectivity);break;case "conv":k=a.kernelsNumber,L=Ga.a(a.connectivity),p&&(f=Q.a({width:F,isFloat:!0,isFlipY:!1,isPot:!1}))}if(L.N){var c=a.size*a.sparsity;aa=Math.log(c/a.size)/Math.log(2);Y=Q.a({isMipmap:!0,isFloat:!0,isPot:!0,width:c,Ya:aa});K=Q.a({isFloat:!0,isPot:!0,width:a.size})}},w:function(c,d){q=c;L.N?(Y.C(),y&&X.b(2),L.w(v),Y.b(0),Y.Pa(aa),K.C(),y?n.set("s0"):(n.set("s28"),n.D("u27",t),X.b(1)),Y.Ka(aa,0),M.h(!1,!1),n.set(T),J?W.j():O.j(),K.b(0),x&&u.yb(),M.h(!1,
!1)):(O.C(),X.b(1),L.w());J&&(n.set(Z),D.j(),W.b(0),M.h(!1,!1),n.set("s43"),n.D("u6",1),O.j(),D.b(1),M.h(!1,!1));if(l)return H?(R.C(),O.b(0),n.set(I),n.H("u7",1/a.size,1/a.size),M.h(!1,!1),d=R):d=O,d.b(0),p&&(f.j(),n.set("s22"),n.H("u14",k,F/k),M.h(!1,!1),d=f,f.b(0)),d;if("softmax"===a.type){n.set("s20");O.b(0);A.j();M.h(!1,!1);a.disableNormalize?c=A:(n.set("s2"),A.b(0),ba.b(1),G.j(),M.h(!1,!1),n.set("s0"),h.C(),G.b(0),G.Pa(!1),M.h(!1,!1),n.set("s21"),g.C(),G.Ka(!1,0),n.D("u12",O.Kb()),h.b(1),M.h(!1,
!1),c=g);if(d){switch(e){case "cpuRGBAAvg":break;default:var ca=w.ab(c)}return ca}return!1}if(a.cost){n.set("gpuRawAvg"===e?"s8":"s7");d=O;a.disableNormalize||(n.D("u4",1/a.size),g.C(),O.b(0),M.h(!1,!1),d=g);switch(e){case "cpuRGBA2Float":d.Na();ca=w.ab(d);m(ca);break;case "gpuRawAvg":case "gpuRaw":d.b(0),m(d)}return!1}},sb:function(f){f&&"undefined"!==typeof f.$a&&(e=f.$a,m=f.$b);O=Q.a({isFloat:!0,isPot:!0,isMipmap:"softmax"===a.type,width:a.size});"softmax"===a.type&&(h=Q.a({isFloat:!0,isPot:!0,
width:1}));var k=0,ca=0,l="undefined"!==typeof a.num_classes&&a.num_classes?a.num_classes:a.size*a.size;for(f=0;f<l;++f)c.push(k+(a.size-1-ca)*a.size),d.push([-1,-1,-1,-1]),++k,k===a.size&&(k=0,++ca);a.disableNormalize||(g=Q.a({isFloat:!0,isPot:!0,width:a.size}))},ab:function(a){a.Na();var f=a.bb();c.forEach(function(a,c){d[c][0]=f[0][a];d[c][1]=f[1][a];d[c][2]=f[2][a];d[c][3]=f[3][a]});return d}};a.L&&w.gc(a.L);return w}};
function Ha(){var a,c,d,g;a||(a={});this.Hb=function(a){return c[a]};this.dc=function(a){var e=!1;c=a.map(function(a,c){return e=a=za.a({index:c,parent:this,jc:a,L:e})});d=c[0];g=c[c.length-1];c.forEach(function(a,c){0!==c&&a.ac()})};this.w=function(a,d){var e=d;c.forEach(function(c){e=c.w(e,a)});return e};this.Gb=function(){return d.u()};this.Jb=function(){return g.u()};this.$=function(){return g.Ib()};this.fc=function(a){g.sb(a)};this.Ra=function(){return g.Ra()}}
var Ca={a:function(a){var c=Q.a(a.weights);delete a.weights.data;return{N:!0,Z:function(){return 1},Lb:function(){return c},w:function(){n.set("s27");c.b(1);M.h(!1,!1)}}}},Fa={a:function(a){var c=a.fromLayerSize,d=Q.a(a.weights);return{N:!0,Z:function(){return c},w:function(c){if(c.isEnabled){n.set("s25");c.Tb.b(3);var g,e=Math.min(c.layers.length,c.depth);for(g=0;g<e;++g)c.layers[g].mb(4+g)}else n.set("s24");n.D("u18",a.toLayerSize);d.b(1);M.h(!1,!1)}}}},Ba={a:function(a){var c=a.toSparsity*a.toLayerSize,
d=c/a.fromLayerSize,g=Q.a(a.weights);Q.a({width:c,isFloat:!0,array:new Float32Array(a.fromBindings),isPot:!0});var h=Q.a({width:c,isFloat:!0,array:new Float32Array(a.toBindings),isPot:!0});return{N:!0,Z:function(){return d},w:function(){n.set("s23");g.b(1);h.b(2);M.h(!1,!0)}}}},Da={a:function(a){var c=a.fromLayerSize,d=a.toLayerSize,g=a.toSparsity,h=g*d,e=h/c,m=c/d,l,f,k,p,y=0,u=0,x=0,v=Array(g*d*g*d*4),q=Array(g*d*g*d*4),A=Array(c*c);for(l=0;l<A.length;++l)A[l]=0;var G=Math.floor(g/2),E=.5/d,P=.5/
c,r=.5/h;for(l=0;l<d;++l)for(f=0;f<d;++f){var ba=Math.round(l*m);var T=Math.round(f*m);var t=l/d;var H=f/d;t+=E;H+=E;for(k=0;k<g;++k)for(p=0;p<g;++p){var F=y/h;var I=u/h;var R=ba+k-G;var J=T+p-G;0>R&&(R+=c);0>J&&(J+=c);R>=c&&(R-=c);J>=c&&(J-=c);var Z=R/c;var W=J/c;I=1-I-1/h;Z+=P;W+=P;F+=r;I+=r;var D=l*g+k,Y=f*g+p;Y=d*g-Y-1;D=Y*d*g+D;v[4*D]=F;v[4*D+1]=I;v[4*D+2]=Z;v[4*D+3]=W;Z=A[J*c+R]++;W=Z%e;R=R*e+W;J=J*e+(Z-W)/e;J=c*e-1-J;J=J*c*e+R;q[4*J]=F;q[4*J+1]=I;q[4*J+2]=t;q[4*J+3]=H;++y>=h&&(y=0,++u);++x}}var aa=
Q.a(a.weights);Q.a({width:h,isFloat:!0,array:new Float32Array(q),isPot:!0});q=null;var K=Q.a({width:h,isFloat:!0,array:new Float32Array(v),isPot:!0});v=null;return{N:!0,Z:function(){return e},w:function(){n.set("s23");aa.b(1);K.b(2);M.h(!1,!1)}}}},Ga={a:function(a){var c=a.kernelsNumber,d=a.toSparsity,g=d*a.toLayerSize/a.fromLayerSize,h=Q.a(a.weights);return{N:!0,Z:function(){return g},Nc:function(){return d},Lb:function(){return h},w:function(){n.set("s26");n.D("u24",c);n.D("u25",d);n.D("u18",a.toLayerSize);
n.D("u26",a.fromLayerSize);h.b(1);M.h(!1,!1)}}}},Ea={a:function(a,c){var d=a.fromLayerSize,g=a.toLayerSize,h=a.toSparsity,e=a.stride?a.stride:1,m=h*g/d,l=g<d,f=d/g,k=Q.a(a.weights),p="s44"+[d.toString(),g.toString(),h.toString(),e.toString(),c].join("_");n.Bb(p)||(a=ka(c),g=[{type:"1f",name:"u18",value:g},{type:"1f",name:"u31",value:e}],l&&g.push({type:"1f",name:"u26",value:d}),d=[(l?m:h).toFixed(1),a],l&&d.push(f.toFixed(1)),n.Sa(l?"s38":"s37",p,d),n.M(p,g.concat([{type:"1i",name:"u16",value:0},
{type:"1i",name:"u23",value:1},{type:"1i",name:"u15",value:3}])));return{N:!1,Z:function(){return m},w:function(){n.set(p);k.b(3);M.h(!1,!1)}}}},Aa=function(){var a,c,d,g,h,e,m,l,f;return{l:function(k){a=k.Za?k.Za:3;c=k.width?k.width:64;g=k.Pb?!0:!1;k={isFloat:!1,width:c,isPot:!1,isFlipY:!1};h=Q.a(k);e=Q.a(k);m=Q.a(k);l=Q.a(k);f=Q.a({isFloat:!0,width:c,isPot:!1,isFlipY:!1});d=1/c},ga_:function(c){n.set("s35");for(var k=0;k<a;++k)h.j(),n.H("u7",d,0),M.h(g,!1),e.j(),h.b(0),n.H("u7",0,d),M.h(g,!1),e.b(0);
n.set("s34");l.j();c.b(0);M.h(g);n.set("s35");for(k=0;k<a;++k)m.j(),l.b(0),n.H("u7",d,0),M.h(g,!1),l.j(),m.b(0),n.H("u7",0,d),M.h(g,!1);n.set("s36");f.j();c.b(0);e.b(1);l.b(2);M.h(g,!1);f.b(0)},$:function(){return f}}}();
window.JEEARAPI=function(){var a,c,d,g;function h(a,c){for(var d in a)"undefined"!==typeof c[d]&&(a[d]=c[d])}function e(a,c,d){var f=d[1]*l(a,c,"dy"),e=d[2]*l(a,c,"ds"),g=t.i[2],h=t.i[3];t.i[0]-=d[0]*l(a,c,"dx")*g*q.ra[0];t.i[1]-=f*h*q.ra[1];t.i[2]-=e*g*q.ra[2];t.i[2]=Math.min(Math.max(t.i[2],q.cb[0]),q.cb[1]);t.i[0]=Math.min(Math.max(t.i[0],0),1);t.i[3]=t.i[2]*r.aspectRatio;t.i[1]=Math.min(Math.max(t.i[1],0),1)}function m(a){var c=t.i[2],d=t.i[3],f=(2*Math.random()-1)*a,e=(2*Math.random()-1)*a;t.i[0]+=
(2*Math.random()-1)*a*c;t.i[1]+=f*d;t.i[2]+=e*c;t.i[3]=t.i[2]*r.aspectRatio}function l(a,c,d){c=R[c].Sb[d];return(a[c][0]+a[c][1]+a[c][2]+a[c][3])/4}function f(a,c){return(l(a,c,"here")-l(a,c,"notHere"))/R[c].Fa}function k(){F=H.V;var a=ba[T];t.i[0]=a[0];t.i[1]=a[1];t.i[2]=a[2];t.i[3]=a[3];T=(T+1)%ba.length}function p(a,c){K.label=R[D.A].label;K.distance=R[D.A].xb;K.positionScale[0]=t.i[0];K.positionScale[1]=t.i[1];K.positionScale[2]=t.i[2];K.positionScale[3]=t.i[3];K.detectScore=c;K.yaw=a}function y(a){var c=
-1,d=-1E12;-1!==[H.V,H.ma].indexOf(F)&&R.forEach(function(e,g){e=f(a,g);e>d&&(d=e,c=g)});switch(F){case H.V:F=H.ma;e(a,c,[1,1,1]);g=0;break;case H.ma:++g;d>O?(L?(F=H.la,W=c,D.A=c,D.Aa=0):(F=H.Ha,Z=0,W=c),e(a,W,[1,1,1])):g>q.Vb?k():e(a,c,[1,1,1]);break;case H.Ha:++Z;Z>q.Xb&&(F=H.la,D.n=0,D.ka=0,D.A=W,D.I[0]=0,D.I[1]=0);e(a,W,[1,1,1]);m(q.Rb);break;case H.la:if(L||++D.n>q.fa){var h=L?f(a,D.A):D.ka/q.fa;L||h>O+q.kc?(p(L?Math.PI*l(a,D.A,"yaw"):Math.atan2(D.I[1],D.I[0]),h),w?(e(a,D.A,C),h>X?D.Aa=0:++D.Aa>
q.Ub&&k()):k()):k()}else e(a,D.A,[1,1,1]),m(q.rb*(q.fa-D.n)/q.fa),D.ka+=f(a,D.A),R.forEach(function(c,d){D.A!==d&&f(a,d)>O*q.lc&&k()}),h=Math.PI*l(a,D.A,"yaw"),D.I[0]+=Math.cos(h),D.I[1]+=Math.sin(h)}}function u(){n.jb([{id:"s46",name:"_",ba:"attribute vec2 a0;uniform vec4 u33;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u33.xy+.5*u33.zw*a0;}",W:["a0"],P:[2],c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1","u33"],precision:"lowp"},{id:"s47",
name:"_",ba:"attribute vec2 a0;uniform vec4 u33;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u33.xy+.5*u33.zw*a0;}",W:["a0"],P:[2],c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec3 g=vec3(1.,1.,1.);float c[5];void main(){c[0]=texture2D(u1,vv0-u7*vec2(-1.,0.)).r,c[1]=texture2D(u1,vv0-u7*vec2(0.,-1.)).r,c[2]=texture2D(u1,vv0-u7).r,c[3]=texture2D(u1,vv0-u7*vec2(0.,1.)).r,c[4]=texture2D(u1,vv0-u7*vec2(1.,0.)).r;float a,b;a=min(c[0],c[1]),b=max(c[0],c[1]),c[0]=a,c[1]=b,a=min(c[0],c[2]),b=max(c[0],c[2]),c[0]=a,c[2]=b,a=min(c[0],c[3]),b=max(c[0],c[3]),c[0]=a,c[3]=b,a=min(c[0],c[4]),b=max(c[0],c[4]),c[0]=a,c[4]=b,a=min(c[1],c[2]),b=max(c[1],c[2]),c[1]=a,c[2]=b,a=min(c[1],c[3]),b=max(c[1],c[3]),c[1]=a,c[3]=b,a=min(c[1],c[4]),b=max(c[1],c[4]),c[1]=a,c[4]=b,a=min(c[2],c[3]),b=max(c[2],c[3]),c[2]=a,c[3]=b,a=min(c[2],c[4]),b=max(c[2],c[4]),c[2]=a,c[4]=b,gl_FragColor=vec4(c[2]*g,1.);}",
f:["u1","u33","u7"],precision:"lowp"},{id:"s48",name:"_",ba:"attribute vec2 a0;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){gl_Position=vec4(a0,0.,1.);vec2 a=(a0+f)/2.;vv0=a;}",W:["a0"],P:[2],c:"uniform sampler2D u1;uniform vec4 u33;varying vec2 vv0;void main(){vec2 b=u33.xy-.5*u33.zw,c=u33.xy+.5*u33.zw,a=step(b,vv0)*step(vv0,c);gl_FragColor=mix(texture2D(u1,vv0),vec4(0.,1.,0.,1.),a.x*a.y*.5);}",f:["u1","u33"],precision:"lowp"}]);var a=[{type:"1i",name:"u1",value:0}];n.M("s46",a);n.M("s47",
a);n.M("s48",a)}function x(){r.aspectRatio=r.width/r.height;r.ya=Math.round(r.width*A.margins);r.za=Math.round(r.height*A.margins);r.Ea=r.width-2*r.ya;r.Da=r.height-2*r.za;var a=Math.min(r.width,r.height),c,d,f;for(c=0;c<A.nSweepSsteps;++c){var e=A.sweepScaleRange[0]+c/(A.nSweepSsteps-1)*(A.sweepScaleRange[1]-A.sweepScaleRange[0]);e*=a;var g=e/r.width;var h=g*r.aspectRatio;var k=(r.Ea-e)*(r.Da-e);var l=Math.min(Math.floor(k/(A.sweepStepMinPx*A.sweepStepMinPx)),A.nSweepXYsteps);l=k/l;var m=Math.round(Math.sqrt(l));
var p=Math.round((r.Ea-e)/m);var q=Math.round((r.Da-e)/m);for(f=0;f<q;++f)for(k=r.za+Math.round(e/2+m*f),k/=r.height,d=0;d<p;++d)l=r.ya+Math.round(e/2+m*d),l/=r.width,ba.push([l,k,g,h])}if(A.sweepShuffle)for(a=ba,c=a.length-1;0<c;--c)e=Math.floor(Math.random()*(c+1)),g=a[c],a[c]=a[e],a[e]=g;else ba.reverse()}function v(d){a=Q.a({isLinear:!0,width:r.width,height:r.height,v:d,isPot:!1,isFlipY:!0,isFloat:!1});c=!0}var q={ca:512,ra:[.05,.05,.15],bc:{margins:.1,nSweepXYsteps:36,nSweepSsteps:4,sweepScaleRange:[.3,
.7],sweepStepMinPx:16,sweepShuffle:!0},cb:[1/15,.9],Wb:3,Vb:3,Fa:.68,Xb:10,Rb:.015,fa:8,kc:-.02,rb:.01,vc:.06,lc:.7,Ub:20},A=Object.create(q.bc),G,E=!1,P=!1,r={aspectRatio:1,width:0,height:0,ya:0,za:0,Ea:0,Da:0,qa:"s46"},ba=[],T=0,t={U:!1,i:[0,0,0,0]},H={Ia:-2,LOADING:-1,V:0,ma:1,Ha:2,la:3},F=H.Ia,I=-2,R,J;var Z=g=0;var W=-1;var D={n:0,Aa:0,A:-1,ka:0,I:[0,0]};var Y=0;var aa=c=a=d=!1,K={distance:0,label:!1,positionScale:[0,0,0,0],detectScore:0,yaw:0},O=1,X=1,L=!1,w=!1,C=[2,2,2],ia={init:function(a){function c(c){a.callbackReady&&
a.callbackReady(c)}if(F!==H.Ia)return c("ALREADY_INITIALIZED");F=H.LOADING;if("undefined"!==typeof a.canvas)E=a.canvas,P=!1;else if("undefined"===typeof a.canvasId)E=document.createElement("canvas"),P=!1;else{E=document.getElementById(a.canvasId);if(!E)return c("INVALID_CANVASID"),!1;P=!0}"undefined"!==typeof a.isDebugRender&&(P=a.isDebugRender);P&&(E.style.display="block");a.scanSettings&&h(A,a.scanSettings);a.canvasSize&&(q.ca=a.canvasSize);aa="undefined"!==typeof WorkerGlobalScope&&"undefined"!==
typeof self&&self instanceof WorkerGlobalScope;-1!==q.ca&&(E.width=q.ca,E.height=q.ca);"undefined"!==typeof a.video&&a.video?(d=a.video,Y=0,r.width=d.videoWidth,r.height=d.videoHeight):Y=1;if(!va.l({Y:E,width:E.width,height:E.height,debug:!1,Zb:c.bind(null,"GLCONTEXT_LOST"),premultipliedAlpha:!1})||!va.Ob())return c("GL_INCOMPATIBLE"),!1;0===Y&&(v(d),x());u();F=H.V;c(!1);return!0},set_NN:function(a,c){if(1===I)c&&c("NN_LOADING");else{var d=function(a){I=0;c&&c(a)};I=1;ja(a,function(a){if(!a)return d("INVALID_NN");
try{var c=JSON.parse(a)}catch(sa){return d("INVALID_NN")}if(!c.exportData||!c.exportData.labels)return d("INVALID_NN");ia.reset_state();G=new Ha;G.dc(c.layers);G.fc({$a:"cpuRGBA2Float",$b:y});t.U=Q.a({isFloat:!1,isPot:!1,width:G.Gb()});J=G.Jb();a=c.exportData;c=a.labels;var e="undefined"===typeof a.paramsPerLabel?!1:a.paramsPerLabel,f=Array(c.length),g,h;for(h=0;h<J/8;++h)for(g=0;g<J;++g){var k=g+h*J;if(k>=c.length)break;var l=g;var m=8*h;var p=c[k];var r=e&&e[p]&&e[p].thresholdDetect?e[p].thresholdDetect:
q.Fa;var u=a.distances&&a.distances[k]?a.distances[k]:3;f[k]={Fa:r,label:p,xb:u,Sb:{here:l+m*J,notHere:l+(m+1)*J,yaw:l+(m+2)*J,dx:l+(m+3)*J,dy:l+(m+4)*J,ds:l+(m+5)*J}}}R=f;d(!1)},function(){d("NOTFOUND_NN")})}},reset_state:function(){T=0;F=H.V},detect:function(d,e,f){if(F===H.LOADING||0!==I)return K;z.J();K.label=!1;"undefined"!==typeof f&&(O=f.thresholdDetectFactor?f.thresholdDetectFactor:1,X=f.thresholdDetectFactorUnstitch?f.thresholdDetectFactorUnstitch:1,L=f.isSkipConfirmation?!0:!1,w=f.isKeepTracking?
!0:!1,C=f.trackingFactors?f.trackingFactors:1);if(0===Y)a.refresh();else if(1===Y){if(!c){r.width=e.size.width;r.height=e.size.height;switch(f.cutShader){case "IOS":r.qa="s47";n.M("s47",[{name:"u7",type:"2f",value:[1/r.width,1/r.height]}]);break;default:r.qa="s46"}v(null);x()}a.nc(e.buffer)}d=d?d:q.Wb;for(e=0;e<d;++e)t.U.C(),n.set(r.qa),a.b(0),n.ja("u33",t.i),M.h(!1,!1),t.U.b(0),G.w(!1,t.U),z.J();z.mc();P&&(b.viewport(0,0,E.width,E.height),n.set("s48"),a.b(0),n.ja("u33",t.i),M.h(!1,!1),aa&&b.commit?
b.commit():b.flush());return K},get_aspectRatio:function(){return r.width/r.height},set_scanSettings:function(a){h(A,a);x()}};return ia}();
;return JEEARAPI;})();