 /**
 * Jeeliz AR - https://github.com/jeeliz/jeelizAR
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEEARAPI=(function(){function ia(b,e,h){var m=new XMLHttpRequest;m.open("GET",b,!0);m.withCredentials=!1;m.onreadystatechange=function(){4===m.readyState&&(200===m.status?e(m.responseText):"undefined"!==typeof h&&h(m.status))};m.send()}
function Da(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Ea(b,e){var h=e%8;return b[(e-h)/8]>>7-h&1}
function Ha(b){var e=JSON.parse(b);b=e.ne;var h=e.nf,m=e.n,r="undefined"===typeof btoa?Buffer.from(e.data,"base64").toString("latin1"):atob(e.data),k=r.length,y;e=new Uint8Array(k);for(y=0;y<k;++y)e[y]=r.charCodeAt(y);r=new Float32Array(m);k=new Float32Array(h);y=b+h+1;var l,g;for(l=0;l<m;++l){var n=y*l;var w=0===Ea(e,n)?1:-1;var E=n+1;var G=1,M=0;for(g=E+b-1;g>=E;--g)M+=G*Ea(e,g),G*=2;g=M;E=e;G=n+1+b;M=k;var H=0,J=M.length;for(n=G;n<G+J;++n)M[H]=Ea(E,n),++H;for(n=E=0;n<h;++n)E+=k[n]*Math.pow(2,-n-
1);w=0===E&&0===g?0:w*(1+E)*Math.pow(2,1+g-Math.pow(2,b-1));r[l]=w}return r}
var x=function(){function b(d,v){d=a.createShader(d);a.shaderSource(d,v);a.compileShader(d);return a.getShaderParameter(d,a.COMPILE_STATUS)?d:!1}function e(d,v){d=b(a.VERTEX_SHADER,d);v=b(a.FRAGMENT_SHADER,v);var B=a.createProgram();a.attachShader(B,d);a.attachShader(B,v);a.linkProgram(B);return B}function h(d){void 0===d.fa&&(d.fa="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===d.Qa&&(d.Qa=["a0"]);void 0===d.ua&&(d.ua=
[2]);if(void 0===d.precision||"highp"===d.precision)d.precision=g;d.id=y++;void 0!==d.kc&&d.kc.forEach(function(B,ea){d.c=d.c.replace(B,d.oa[ea])});d.Na=0;d.ua.forEach(function(B){d.Na+=4*B});d.na=e(d.fa,"precision "+d.precision+" float;\n"+d.c);d.o={};d.f.forEach(function(B){d.o[B]=a.getUniformLocation(d.na,B)});d.attributes={};d.$=[];d.Qa.forEach(function(B){var ea=a.getAttribLocation(d.na,B);d.attributes[B]=ea;d.$.push(ea)});if(d.g){a.useProgram(d.na);k=d;r=d.id;for(var v in d.g)a.uniform1i(d.o[v],
d.g[v])}d.Yc=!0}function m(d){Ia.pc(P);r!==d.id&&(P.Y(),r=d.id,k=d,a.useProgram(d.na),d.$.forEach(function(v){0!==v&&a.enableVertexAttribArray(v)}))}var r=-1,k=!1,y=0,l=!1,g="highp",n=["u1"],w=["u0"],E={u1:0},G={u0:0},M={u1:0,u2:1},H={u3:0},J={s0:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:n,g:E},s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:n,g:E,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
f:["u1","u2"],g:M},s3:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:n,g:E},s4:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",f:["u1","mask"],g:M},s5:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:n,g:E},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
f:n,g:E},s7:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],g:G},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",f:["u0","u4"],g:G},s9:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
f:n,g:E},s10:{c:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",f:["u1","u5","u6"],g:{u1:0,u5:1}},s11:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",f:["u1","u7"],g:E},s12:{c:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
f:["u1","u8"],g:E},s13:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:w,g:G},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",f:w,g:G},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",f:w,g:G},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
f:w,g:G},s17:{c:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u6","u9"],g:{u0:0,u6:1,u9:2}},s18:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",f:w,g:G},s19:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
f:w,g:G},s20:{c:"uniform sampler2D u0;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=exp(a);}",f:["u0","u10"],g:G},s21:{c:"uniform sampler2D u0,u11;uniform float u12;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,f);float b=u12*u12;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u13","u12"],g:{u0:0,u13:1}},s22:{c:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),g=floor(u14.x*fract(b*u14.y)),f=(g*u14.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
f:["u1","u14"],g:E},s23:{c:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),e=texture2D(u16,c);gl_FragColor=d*e;}",f:["u15","u16","u17"],g:{u16:0,u15:1,u17:2}},s24:{c:"uniform float u18;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 a=fract(vv0*u18);vec4 b=texture2D(u15,vv0),c=texture2D(u16,a);gl_FragColor=b*c;}",f:["u16","u15","u18"],g:{u16:0,u15:1}},s25:{c:"uniform float u18;uniform sampler2D u15,u16,u19,u20,u21,u22;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u18,m=floor(i),c=i-m;vec4 n=texture2D(u15,vv0),d=texture2D(u16,c),a=texture2D(u22,vv0);a=a*255.;vec4 o=texture2D(u19,c),p=texture2D(u20,c),q=texture2D(u21,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
f:"u15 u16 u18 u22 u19 u20 u21".split(" "),g:{u16:0,u15:1,u22:3,u19:4,u20:5,u21:6}},s26:{c:"uniform sampler2D u15,u16,u23;uniform float u18,u24,u25,u26;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u24*vv0),g=u24*vv0-a;float b=u18/u24;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u24;float l=u24*u26/u18;vec2 m=l*c,i=(m+d*u25)/u26,e=step(i,j);vec4 n=texture2D(u15,h),o=texture2D(u16,i),p=n*o*e.x*e.y,k=texture2D(u23,h);gl_FragColor=p*u25*u25+k;}",f:"u15 u16 u18 u24 u25 u26 u23".split(" "),g:{u16:0,
u15:1,u23:2}},s27:{c:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",f:["u15","u16"],g:{u16:0,u15:1}},s28:{c:"uniform sampler2D u1,u23;uniform float u27;varying vec2 vv0;void main(){gl_FragColor=texture2D(u23,vv0)+u27*texture2D(u1,vv0);}",f:["u1","u23","u27"],g:{u1:0,u23:1}},s29:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
f:n,g:E,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 e=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(dot(a,e),dot(b,e),dot(c,e),dot(d,e));}",f:["u1","u28"],g:E,precision:"lowp"},s31:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
f:["u1","u28"],g:E,precision:"lowp"},s32:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u29))*2.,b-=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,b+=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u29))*2.,b+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
f:["u1","u2","u29"],g:M},s33:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u29,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u1,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,c).r-i/g)*j;}",f:["u1","u2","u29"],g:M},s34:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
f:["u3","u7"],g:H},s35:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u7"],g:H},s36:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
f:["u1"],g:E,precision:"lowp"},s37:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",f:["u7","u1"],g:E,precision:"lowp"},s38:{c:"uniform sampler2D u1,u30,u31;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u30,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
f:["u1","u30","u31"],g:{u1:0,u30:1,u31:2}}},Q={s39:{c:"uniform float u18,u32;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(.01,.01);void main(){vec4 sum=texture2D(u23,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u18+eps2);float weightSize=toSparsity*u18;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:["u18","u15","u16","u23","u32"],oa:["1.1111","gl_FragColor\\*=2.2222;"]},s40:{c:"uniform float u18,u32,u26;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(.01,.01);void main(){vec4 sum=texture2D(u23,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u26,xyTo=floor(vv0*u18+eps2);float weightSize=fromSparsity*u26;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u18;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u26,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:"u18 u26 u15 u16 u23 u32".split(" "),oa:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},P={Da:function(){return l},m:function(){if(!l){g="highp";for(var d in J)h(J[d],d);x.set("s0");a.enableVertexAttribArray(0);d=Ja.m();l=!0;return d}},rb:function(d){d.forEach(function(v){P.Pa(v)})},Pa:function(d){J[d.id]=d;h(d,d.id)},ab:function(d,v,B){v||(v=d);J[v]=Object.create(Q[d]);Q[d].oa&&Q[d].oa.forEach(function(ea,wa){J[v].c=J[v].c.replace(new RegExp(ea,"g"),B[wa])});h(J[v],v)},set:function(d){m(J[d])},
Jb:function(d){return"undefined"!==typeof J[d]},Lc:function(){return k.Ic},Y:function(){-1!==r&&(r=-1,k.$.forEach(function(d){0!==d&&a.disableVertexAttribArray(d)}))},Ia:function(){var d=0;k.$.forEach(function(v,B){B=k.ua[B];a.vertexAttribPointer(v,B,a.FLOAT,!1,k.Na,d);d+=4*B})},Hc:function(){a.enableVertexAttribArray(0)},Ja:function(){a.vertexAttribPointer(k.$[0],2,a.FLOAT,!1,8,0)},jd:function(d,v){a.uniform1i(k.o[d],v)},I:function(d,v){a.uniform1f(k.o[d],v)},L:function(d,v,B){a.uniform2f(k.o[d],
v,B)},kd:function(d,v){a.uniform2fv(k.o[d],v)},md:function(d,v){a.uniform3fv(k.o[d],v)},ld:function(d,v,B,ea){a.uniform3f(k.o[d],v,B,ea)},pa:function(d,v){a.uniform4fv(k.o[d],v)},nd:function(d,v){a.uniformMatrix2fv(k.o[d],!1,v)},od:function(d,v){a.uniformMatrix3fv(k.o[d],!1,v)},pd:function(d,v){a.uniformMatrix4fv(k.o[d],!1,v)},F:function(d,v){P.set(d);v.forEach(function(B){switch(B.type){case "4f":a.uniform4fv(k.o[B.name],B.value);break;case "3f":a.uniform3fv(k.o[B.name],B.value);break;case "2f":a.uniform2fv(k.o[B.name],
B.value);break;case "1f":a.uniform1f(k.o[B.name],B.value);break;case "1i":a.uniform1i(k.o[B.name],B.value);break;case "mat2":a.uniformMatrix2fv(k.o[B.name],!1,B.value);break;case "mat3":a.uniformMatrix3fv(k.o[B.name],!1,B.value);break;case "mat4":a.uniformMatrix4fv(k.o[B.name],!1,B.value)}})}};return P}(),a=!1,Ma=function(){function b(g){console.log("ERROR in ContextFeedForward : ",g);return!1}var e=!1,h=!1,m=!1,r=!1,k=!0,y=!1,l={B:function(){return e.width},K:function(){return e.height},Mc:function(){return e},
Kc:function(){return a},s:function(){return k},flush:function(){a.flush()},Nb:function(){y||(y=new Uint8Array(e.width*e.height*4));a.readPixels(0,0,e.width,e.height,a.RGBA,a.UNSIGNED_BYTE,y);return y},Oc:function(){return e.toDataURL("image/jpeg")},Pc:function(){N.J();h||(h=document.createElement("canvas"),m=h.getContext("2d"));h.width=e.width;h.height=e.height;var g=l.Nb(),n=m.createImageData(h.width,h.height),w,E,G=h.width,M=h.height,H=n.data;for(E=0;E<M;++E){var J=M-E-1;for(w=0;w<G;++w){var Q=
4*(E*G+w);var P=4*(J*G+w);H[Q]=g[P];H[Q+1]=g[P+1];H[Q+2]=g[P+2];H[Q+3]=g[P+3]}}m.putImageData(n,0,0);return h.toDataURL("image/png")},Nc:function(g){!h&&g&&(h=document.createElement("canvas"),m=h.getContext("2d"));var n=g?h:document.createElement("canvas");n.width=e.width;n.height=e.height;(g?m:n.getContext("2d")).drawImage(e,0,0);return n},m:function(g){g.Bb&&!g.ba?e=document.getElementById(g.Bb):g.ba&&(e=g.ba);e||(e=document.createElement("canvas"));e.width=g&&void 0!==g.width?g.width:512;e.height=
g&&void 0!==g.height?g.height:512;"undefined"===typeof g&&(g={});void 0===g.premultipliedAlpha&&(g.premultipliedAlpha=!1);void 0===g.cb&&(g.cb=!0);void 0===g.antialias&&(g.antialias=!1);var n={antialias:g.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:g.premultipliedAlpha,stencil:!1,depth:g.cb},w;if(w=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream)w=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),w=12===parseInt(w[1],10);w||(a=e.getContext("webgl2",n));a?k=!0:
((a=e.getContext("webgl",n))||(a=e.getContext("experimental-webgl",n)),k=!1);if(!a)return b("WebGL is not enabled");(r=a.getExtension("WEBGL_lose_context"))&&e.addEventListener("webglcontextlost",g.gc,!1);if(!La.m())return b("Not enough capabilities");if(!La.wb()&&k)return b("Your configuration cannot process color buffer float");a.clearColor(0,0,0,0);a.disable(a.DEPTH_TEST);a.disable(a.BLEND);a.disable(a.DITHER);a.disable(a.STENCIL_TEST);a.GENERATE_MIPMAP_HINT&&a.hint(a.GENERATE_MIPMAP_HINT,a.FASTEST);
a.disable(a.SAMPLE_ALPHA_TO_COVERAGE);a.disable(a.SAMPLE_COVERAGE);return!0},Wb:function(){if(!x.m())return!1;a.depthFunc(a.LEQUAL);a.clearDepth(1);return!0}};return l}(),Ia=function(){var b="undefined"===typeof x?JEShaders:x;return{pc:function(e){b!==e&&(b.Y(),b=e)},Da:function(){return b.Da()},Ja:function(){b.Ja()},Ia:function(){b.Ia()},Y:function(){b.Y()},set:function(e){b.set(e)}}}(),O=function(){var b,e,h=0,m=-2,r=-2,k=!1,y={reset:function(){r=m=-2},m:function(){k||(b=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,
b),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),a.STATIC_DRAW),e=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),a.STATIC_DRAW),y.va(),k=!0)},a:function(l){var g=h++,n=l.O?l.O.length:0,w="undefined"===typeof l.mode?a.STATIC_DRAW:l.mode,E=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,E);a.bufferData(a.ARRAY_BUFFER,l.pb instanceof Float32Array?l.pb:new Float32Array(l.pb),w);m=g;if(l.O){var G=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,
G);if(65536>l.O.length){var M=Uint16Array;var H=a.UNSIGNED_SHORT;var J=2}else M=Uint32Array,H=a.UNSIGNED_INT,J=4;a.bufferData(a.ELEMENT_ARRAY_BUFFER,l.O instanceof M?l.O:new M(l.O),w);r=g}var Q={vb:function(P){m!==g&&(a.bindBuffer(a.ARRAY_BUFFER,E),m=g);P&&Ia.Ia()},tb:function(){r!==g&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,G),r=g)},bind:function(P){Q.vb(P);Q.tb()},Fc:function(){a.drawElements(a.TRIANGLES,n,H,0)},Gc:function(P,d){a.drawElements(a.TRIANGLES,P,H,d*J)},remove:function(){a.deleteBuffer(E);
l.O&&a.deleteBuffer(G);Q=null}};return Q},va:function(){-1!==m&&(a.bindBuffer(a.ARRAY_BUFFER,b),m=-1);-1!==r&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e),r=-1)},i:function(l,g){l&&O.va();g&&Ia.Ja();a.drawElements(a.TRIANGLES,3,a.UNSIGNED_SHORT,0)},Mb:function(){a.deleteBuffer(b);a.deleteBuffer(e)}};return y}(),N=function(){var b,e,h,m=!1,r={A:-2,Kb:1};return{m:function(){if(!m){b=a.createFramebuffer();var k=La.s();e=k&&a.DRAW_FRAMEBUFFER?a.DRAW_FRAMEBUFFER:a.FRAMEBUFFER;h=k&&a.READ_FRAMEBUFFER?a.READ_FRAMEBUFFER:
a.FRAMEBUFFER;m=!0}},Rc:function(){return e},Aa:function(){return h},T:function(){return a.FRAMEBUFFER},Tc:function(){return r},Jc:function(){return b},a:function(k){void 0===k.bb&&(k.bb=!1);var y=k.X?k.X:!1,l=k.width,g=void 0!==k.height?k.height:k.width,n=b,w=!1,E=!1,G=0;y&&(l=l?l:y.B(),g=g?g:y.K());var M={nb:function(){E||(n=a.createFramebuffer(),E=!0,G=r.Kb++)},qb:function(){M.nb();M.l();w=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,w);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,
l,g);a.framebufferRenderbuffer(e,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,w);a.clearDepth(1)},bind:function(H,J){G!==r.A&&(a.bindFramebuffer(e,n),r.A=G);y&&y.l();J&&a.viewport(0,0,l,g);H&&a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},yc:function(){G!==r.A&&(a.bindFramebuffer(e,n),r.A=G)},clear:function(){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},Bc:function(){a.clear(a.COLOR_BUFFER_BIT)},Cc:function(){a.clear(a.DEPTH_BUFFER_BIT)},qc:function(){a.viewport(0,0,l,g)},l:function(){G!==r.A&&(a.bindFramebuffer(e,
n),r.A=G)},rtt:function(H){y=H;r.A!==G&&(a.bindFramebuffer(a.FRAMEBUFFER,n),r.A=G);H.l()},J:function(){a.bindFramebuffer(e,null);r.A=-1},resize:function(H,J){l=H;g=J;w&&(a.bindRenderbuffer(a.RENDERBUFFER,w),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,l,g))},remove:function(){a.bindFramebuffer(e,n);a.framebufferTexture2D(e,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0);w&&a.framebufferRenderbuffer(e,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,null);a.bindFramebuffer(e,null);a.deleteFramebuffer(n);w&&
a.deleteRenderbuffer(w);M=null}};k.bb&&M.qb();return M},J:function(){a.bindFramebuffer(e,null);r.A=-1},uc:function(){a.bindFramebuffer(e,null);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);a.viewport(0,0,La.B(),La.K());r.A=-1},reset:function(){r.A=-2},N:function(){0!==r.A&&(a.bindFramebuffer(e,b),r.A=0)},clear:function(){a.viewport(0,0,La.B(),La.K());a.clear(a.COLOR_BUFFER_BIT)}}}(),Y=function(){function b(c){a.bindTexture(a.TEXTURE_2D,c)}function e(c){wa[0]=c;c=ya[0];var F=c>>16&32768,I=c>>12&2047,
K=c>>23&255;return 103>K?F:142<K?F|31744|((255==K?0:1)&&c&8388607):113>K?(I|=2048,F|(I>>114-K)+(I>>113-K&1)):F=(F|K-112<<10|I>>1)+(I&1)}function h(c){var F=new Uint16Array(c.length);c.forEach(function(I,K){F[K]=e(I)});return F}function m(){if(null!==ma.Ba)return ma.Ba;var c=k(h([1,1,1,1]));return null===c?!0:ma.Ba=c}function r(){if(null!==ma.Ca)return ma.Ca;var c=k(new Uint8Array([255,255,255,255]));return null===c?!0:ma.Ca=c}function k(c){if(!Ia.Da()||!H)return null;c=Z.a({isFloat:!1,G:!0,array:c,
width:1});N.J();a.viewport(0,0,1,1);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);Ia.set("s0");c.Ra(0);O.i(!1,!0);var F=new Uint8Array(4);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,F);F=.9<F[0];c.remove();N.N();return F}var y=0,l,g=0,n,w=!1,E,G,M,H=!1,J=!1,Q,P,d,v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],B=!1,ea=!1,wa=new Float32Array(1),ya=new Int32Array(wa.buffer),ma={Ba:null,Ca:null},Z={m:function(){if(!H){G=[a.RGB,!1,a.RGB,a.RGBA];M=[a.RGB,!1,a.RGB,a.RGBA];l=[a.TEXTURE0,a.TEXTURE1,a.TEXTURE2,
a.TEXTURE3,a.TEXTURE4,a.TEXTURE5,a.TEXTURE6,a.TEXTURE7];B="undefined"!==typeof JEContext;ea="undefined"!==typeof La;B&&JEContext.dd()&&l.push(a.TEXTURE8,a.TEXTURE9);n=[-1,-1,-1,-1,-1,-1,-1,-1];E=[a.UNSIGNED_BYTE,a.FLOAT,a.FLOAT];if(!w){for(var c=new Float32Array(16384),F=0;16384>F;++F)c[F]=2*Math.random()-1;w={random:Z.a({isFloat:!0,isPot:!0,array:c,width:64}),ob:Z.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}H=!0}},Vb:function(){Z.wc()},Wc:function(){return w.ob},wc:function(){E[1]=
La.ia()},mc:function(){M=G=[a.RGBA,a.RGBA,a.RGBA,a.RGBA]},fd:function(c,F){x.set("s1");N.J();var I=c.B(),K=c.K();a.viewport(0,0,I,K);c.b(0);O.i(!1,!1);a.readPixels(0,0,I,K,a.RGBA,a.UNSIGNED_BYTE,F)},Lb:function(c,F,I){a.activeTexture(a.TEXTURE0);y=0;var K=a.createTexture();b(K);var W=La.s()&&a.RGBA32F?a.RGBA32F:a.FLOAT;F=F instanceof Float32Array?F:new Float32Array(F);var X=Math.log(F.length)/Math.log(2);X!==Math.floor(X)&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,I);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,c.B(),c.K(),0,a.RGBA,W,F);b(null);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);N.N();x.set("s0");c.H();a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);b(K);O.i(!0,!1);a.deleteTexture(K)},a:function(c){function F(){b(q);na&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,na);c.isPot?(a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_S,c.fb?a.MIRRORED_REPEAT:a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,c.P?a.MIRRORED_REPEAT:a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));c.la&&"undefined"!==typeof JESETTINGS&&a.texParameterf(a.TEXTURE_2D,JEContext.Qc().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.xc);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,c.isLinear?a.LINEAR:a.NEAREST);c.isLinear?a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MIN_FILTER,c.isMipmap&&!Aa?a.NEAREST_MIPMAP_LINEAR:a.LINEAR):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,c.isMipmap&&!Aa?a.NEAREST_MIPMAP_NEAREST:a.NEAREST);fa=G[c.ea-1];ja=M[c.ea-1];ka=E[I];if(La.s()){var u=a.RGBA32F;fa===a.RGBA&&ka===a.FLOAT&&u&&(ja=u);fa===a.RGB&&ka===a.FLOAT&&u&&(ja=u,fa=a.RGBA)}if(c.G&&!c.isFloat||c.isFloat&&c.isMipmap&&Ja.Yb())(u=a.RGBA16F)&&(ja=u),ka=La.ia();c.hb&&"undefined"!==typeof a.texStorage2D&&(Ba=c.hb);c.gb&&4===c.ea&&(fa=JEContext.Uc());if(c.v)a.texImage2D(a.TEXTURE_2D,
0,ja,fa,ka,c.v);else if(c.url)a.texImage2D(a.TEXTURE_2D,0,ja,fa,ka,oa);else if(D){try{a.getError(),a.texImage2D(a.TEXTURE_2D,0,ja,C,z,0,fa,ka,D),a.getError()!==a.NO_ERROR&&(a.texImage2D(a.TEXTURE_2D,0,ja,C,z,0,fa,ka,null),a.getError()!==a.NO_ERROR&&a.texImage2D(a.TEXTURE_2D,0,a.RGBA,C,z,0,a.RGBA,a.UNSIGNED_BYTE,null))}catch(A){a.texImage2D(a.TEXTURE_2D,0,ja,C,z,0,fa,ka,null)}c.isKeepArray||(D=null)}else a.texImage2D(a.TEXTURE_2D,0,ja,C,z,0,fa,ka,null);if(c.isMipmap)if(!Aa&&U)U.za(),Ca=!0;else if(Aa){u=
Math.log(Math.min(C,z))/Math.log(2);var R;ha=Array(1+u);ha[0]=q;for(R=1;R<=u;++R){var la=Math.pow(2,R);var f=C/la;la=z/la;var t=a.createTexture();b(t);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,ja,f,la,0,fa,ka,null);b(null);ha[R]=t}Ca=!0}b(null);n[y]=-1;na&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);V=!0;aa&&U&&(aa(U),aa=!1)}"undefined"===typeof c.isFloat&&(c.isFloat=!1);"undefined"===typeof c.G&&
(c.G=!1);"undefined"===typeof c.isPot&&(c.isPot=!0);"undefined"===typeof c.isLinear&&(c.isLinear=!1);"undefined"===typeof c.isMipmap&&(c.isMipmap=!1);"undefined"===typeof c.wa&&(c.wa=!1);void 0===c.la&&(c.la=!1);void 0===c.P&&(c.P=!1);void 0===c.fb&&(c.fb=!1);void 0===c.gb&&(c.gb=!1);void 0===c.ea&&(c.ea=4);void 0===c.eb&&(c.eb=!1);"undefined"===typeof c.isFlipY&&(c.isFlipY=c.url||c.array?!0:!1);"undefined"===typeof c.isKeepArray&&(c.isKeepArray=!1);c.data&&(c.array="string"===typeof c.data?Ha(c.data):
c.isFloat?new Float32Array(c.data):new Uint8Array(c.data),c.isFlipY=!1);var I=0,K=c.v?!0:!1,W=null,X=null,ca=!1,ra=null;c.isFloat&&(c.G=!0);c.G&&(I=1);c.eb||La.s()||!c.isFloat||!ea||La.Ta()||(c.isFloat=!1);c.isFloat&&(I=2);c.la&&B&&!JEContext.Zc()&&(c.la=!1);var q=a.createTexture(),aa=c.wa,oa=null,D=!1,C=0,z=0,V=!1,ba=g++,da=!1,va,sa,S,za,ja,fa,ka,na=c.isFlipY,Aa=c.G&&c.isMipmap&&"undefined"!==typeof Ja&&!Ja.yb()?!0:!1,ha,Ba=-1,Ca=!1;"undefined"!==typeof c.width&&c.width&&(C=c.width,z="undefined"!==
typeof c.height&&c.height?c.height:C);var U={get:function(){return q},B:function(){return C},K:function(){return z},Xc:function(){return c.url},$c:function(){return c.isFloat},bd:function(){return c.G},cd:function(){return c.isLinear},za:function(){a.generateMipmap(a.TEXTURE_2D)},Sa:function(u,R){Aa?(u||(u=U.Za()),U.ta(R),b(ha[u]),n[R]=-1):U.b(R)},Za:function(){-1===Ba&&(Ba=Math.log(C)/Math.log(2));return Ba},Ya:function(u){if(Aa){u||(u=U.Za());x.set("s11");U.ta(0);var R,la=C,f=z;for(R=1;R<=u;++R)la/=
2,f/=2,x.L("u7",.25/la,.25/f),a.viewport(0,0,la,f),b(ha[R-1]),a.framebufferTexture2D(N.T(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ha[R],0),O.i(!1,1===R);n[0]=-1}else U.za()},ta:function(u){u!==y&&(a.activeTexture(l[u]),y=u)},b:function(u){if(!V)return!1;U.ta(u);if(n[u]===ba)return!1;b(q);n[u]=ba;return!0},Ra:function(u){a.activeTexture(l[u]);y=u;b(q);n[u]=ba},l:function(){a.framebufferTexture2D(N.T(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,q,0)},H:function(){a.viewport(0,0,C,z);a.framebufferTexture2D(N.T(),a.COLOR_ATTACHMENT0,
a.TEXTURE_2D,q,0)},sd:function(){a.framebufferTexture2D(N.T(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0)},resize:function(u,R){C=u;z=R;F()},clone:function(u){u=Z.a({width:C,height:z,G:c.G,isFloat:c.isFloat,isLinear:c.isLinear,P:c.P,isFlipY:u?!na:na,isPot:c.isPot});Ia.set("s0");N.N();u.l();a.viewport(0,0,C,z);U.b(0);O.i(!0,!0);return u},qc:function(){a.viewport(0,0,C,z)},remove:function(){a.deleteTexture(q);U=null},refresh:function(){U.Ra(0);na&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);K?a.texImage2D(a.TEXTURE_2D,
0,ja,fa,a.UNSIGNED_BYTE,c.v):a.texImage2D(a.TEXTURE_2D,0,ja,C,z,0,fa,ka,D);na&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},Ua:function(){var u=C*z*4;sa=[new Uint8Array(u),new Uint8Array(u),new Uint8Array(u),new Uint8Array(u)];va=[new Float32Array(sa[0].buffer),new Float32Array(sa[1].buffer),new Float32Array(sa[2].buffer),new Float32Array(sa[3].buffer)];S=new Uint8Array(4*u);za=new Float32Array(S.buffer);da=!0},lb:function(){da||U.Ua();a.readPixels(0,0,C,4*z,a.RGBA,a.UNSIGNED_BYTE,S);var u,R=C*z,la=2*
R,f=3*R;for(u=0;u<R;++u)va[0][u]=za[u],va[1][u]=za[u+R],va[2][u]=za[u+la],va[3][u]=za[u+f];return va},Va:function(){N.J();x.set("s12");U.b(0);for(var u=0;4>u;++u)a.viewport(0,z*u,C,z),x.pa("u8",v[u]),O.i(!1,0===u)},vc:function(u){var R=ka===E[0]&&!r();b(q);na&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,na);R?(ca||(W=document.createElement("canvas"),W.width=C,W.height=z,X=W.getContext("2d"),ra=X.createImageData(C,z),ca=!0),ra.data.set(u),X.putImageData(ra,0,0),a.texImage2D(a.TEXTURE_2D,0,ja,fa,ka,W)):a.texImage2D(a.TEXTURE_2D,
0,ja,C,z,0,fa,ka,u);n[y]=ba;na&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},td:function(u,R){b(q);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,R);a.texImage2D(a.TEXTURE_2D,0,ja,fa,ka,u);n[y]=ba;R&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},hd:function(u,R){var la=C*z,f=4*la;u=c.G?u?"RGBE":"JSON":"RGBA";R&&(u=R);R=La.s()&&!1;switch(u){case "RGBE":var t="s41";break;case "JSON":t=R?"s0":"s12";break;case "RGBA":case "RGBAARRAY":t="s6"}da||("RGBA"===u||"RGBE"===u||"RGBAARRAY"===u?(sa=new Uint8Array(f),da=!0):"JSON"!==
u||R||U.Ua());N.J();x.set(t);U.b(0);if("RGBA"===u||"RGBE"===u||"RGBAARRAY"===u){a.viewport(0,0,C,z);O.i(!0,!0);a.readPixels(0,0,C,z,a.RGBA,a.UNSIGNED_BYTE,sa);if("RGBAARRAY"===u)return{data:sa};J||(Q=document.createElement("canvas"),P=Q.getContext("2d"),J=!0);Q.width=C;Q.height=z;d=P.createImageData(C,z);d.data.set(sa);P.putImageData(d,0,0);var A=Q.toDataURL("image/png")}else if("JSON"===u)if(R)A=new Float32Array(la),a.viewport(0,0,C,z),O.i(!0,!0),a.readPixels(0,0,C,z,a.RGBA,a.FLOAT,A);else{for(A=
0;4>A;++A)a.viewport(0,z*A,C,z),x.pa("u8",v[A]),O.i(!A,!A);U.lb();A=Array(la);for(t=0;t<la;++t)A[4*t]=va[0][t],A[4*t+1]=va[1][t],A[4*t+2]=va[2][t],A[4*t+3]=va[3][t]}return{format:u,data:A,width:C,height:z,isMirrorY:c.P,isFlipY:"RGBA"===u?c.isFlipY:!c.isFlipY}}};c.isMipmap&&!Aa&&V&&!Ca&&(U.za(),Ca=!0);if(c.url)b(q),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,null),oa=new Image,oa.Ec="Anonymous",oa.crossOrigin="Anonymous",oa.src=c.url,oa.onload=function(){C=oa.width;z=oa.height;
F()};else if(c.v){var Ga=function(){C=void 0!==c.v.videoWidth?c.v.videoWidth:c.v.width;z=void 0!==c.v.videoHeight?c.v.videoHeight:c.v.height;C?F():setTimeout(Ga,1)};Ga()}else c.array?(c.G&&!c.isFloat?c.array instanceof Uint16Array?(D=c.array,F()):m()?(D=h(c.array),F()):(F(),Z.Lb(U,c.array,na)):(D=c.isFloat?c.array instanceof Float32Array?c.array:new Float32Array(c.array):c.array instanceof Uint8Array?c.array:new Uint8Array(c.array),F()),c.isKeepArray||(D&&D!==c.array&&(D=null),delete c.array)):F();
U.Sb=U.B;aa&&V&&(aa(U),aa=!1);return U},J:function(c){c!==y&&(a.activeTexture(l[c]),y=c);n[c]=-1;b(null)},zc:function(c){w.random.b(c)},reset:function(){for(var c=0;c<l.length;++c)n[c]=-1;y=-1},gd:function(){y=-1},qd:function(){for(var c=0;c<l.length;++c)Z.J(c)},Mb:function(){w&&(w.random.remove(),w.ob.remove())},rd:function(c,F){if("RGBA"===c.format||"RGBE"===c.format){var I=new Image;I.src=c.data;I.onload=function(){Z.a({P:c.isMirrorY,isFlipY:c.isFlipY,isFloat:!1,v:I,wa:function(K){if("RGBA"===
c.format)F(K);else{var W=c.width,X=c.height,ca=Z.a({P:c.isMirrorY,isFloat:!0,width:W,height:X,isFlipY:c.isFlipY});N.N();a.viewport(0,0,W,X);x.set("s42");ca.l();K.b(0);O.i(!0,!0);Z.J(0);F(ca);a.flush();setTimeout(K.remove,50)}}})}}else"JSON"===c.format?F(Z.a({isFloat:!0,isFlipY:c.isFlipY,width:c.width,height:c.height,array:new Float32Array(c.data)})):F(!1)}};return Z}(),La=function(){function b(){e="undefined"===typeof Ma?JEContext:Ma;h=!0}var e,h=!1,m=!1,r=!1,k=!1,y=!1,l=!1,g=!1,n=!1,w=!1,E=!1,G=
!1,M=!0,H=!0,J=!0,Q=!1,P="undefined"===typeof window?{}:window,d={m:function(){if(h)return!0;b();d.Xa();d.ya();d.Hb();d.Ib();N.m();Y.m();if(!d.Cb())return!1;O.m();Y.Vb();return!0},B:function(){h||b();return e.B()},K:function(){h||b();return e.K()},s:function(){h||b();return e.s()},Hb:function(){G=(E=a.getExtension("EXT_color_buffer_float")||a.getExtension("WEBGL_color_buffer_float")||a.getExtension("OES_color_buffer_float"))?!0:!1;P.GL_EXT_COLORBUFFERFLOAT=E},Ib:function(){a.getExtension("EXT_color_buffer_half_float")||
a.getExtension("WEBGL_color_buffer_half_float")||a.getExtension("OES_color_buffer_half_float")},Xa:function(){if(!m){this.s()||(r=a.getExtension("OES_texture_float")||a.getExtension("MOZ_OES_texture_float")||a.getExtension("WEBKIT_OES_texture_float"),y=(P.GL_EXT_FLOAT=r)?!0:!1);if(y||this.s())k=a.getExtension("OES_texture_float_linear")||a.getExtension("MOZ_OES_texture_float_linear")||a.getExtension("WEBKIT_OES_texture_float_linear"),P.GL_EXT_FLOATLINEAR=k;m=!0}},ya:function(){if(!w){if(!this.s()){if(l=
a.getExtension("OES_texture_half_float")||a.getExtension("MOZ_OES_texture_half_float")||a.getExtension("WEBKIT_OES_texture_half_float"))Q=l.HALF_FLOAT_OES,g=!0;!Q&&a.HALF_FLOAT&&(Q=a.HALF_FLOAT);!Q&&a.FLOAT&&(Q=a.FLOAT);P.GL_EXT_HALFFLOAT=l}if(g||this.s())n=a.getExtension("OES_texture_half_float_linear")||a.getExtension("MOZ_OES_texture_half_float_linear")||a.getExtension("WEBKIT_OES_texture_half_float_linear"),P.GL_EXT_HALFFLOATLINEAR=n;w=!0}},ia:function(){if(d.s())return a.HALF_FLOAT;d.ya();return g?
Q:a.FLOAT},Ta:function(){return M},xb:function(){return H},Ac:function(){return J},wb:function(){return G},Eb:function(){H=M=!0;var v=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,v);var B=a.createTexture();a.bindTexture(a.TEXTURE_2D,B);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,d.s()&&a.RGBA32F?a.RGBA32F:a.RGBA,1,1,0,a.RGBA,a.FLOAT,null);a.framebufferTexture2D(N.T(),a.COLOR_ATTACHMENT0,
a.TEXTURE_2D,B,0);var ea=a.checkFramebufferStatus(N.Aa());ea!==a.FRAMEBUFFER_COMPLETE&&(M=!1);a.texImage2D(a.TEXTURE_2D,0,d.s()&&a.RGBA16F?a.RGBA16F:a.RGBA,1,1,0,a.RGBA,d.ia(),null);a.framebufferTexture2D(N.T(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,B,0);ea=a.checkFramebufferStatus(N.Aa());ea!==a.FRAMEBUFFER_COMPLETE&&(H=!1);a.bindTexture(a.TEXTURE_2D,null);a.bindFramebuffer(a.FRAMEBUFFER,null);a.deleteTexture(B);a.deleteFramebuffer(v)},Db:function(){var v=N.a({width:1});v.nb();var B=Y.a({width:1,isFloat:!0,
ea:3});v.l();B.l();a.flush();a.checkFramebufferStatus(N.Aa())!==a.FRAMEBUFFER_COMPLETE?(Y.mc(),J=!1):J=!0;v.remove();B.remove()},Cb:function(){d.Eb();if(!M&&!H)return!1;d.Db();return!0}};return d}(),Ja=function(){var b=!1,e=[.8,1,.8,1],h=0,m,r=new Uint8Array(4),k=e.concat(e,e,e),y=!0,l={m:function(){function g(H,J,Q,P){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,P?a.NEAREST_MIPMAP_NEAREST:a.LINEAR);try{var d=a.getError();d!==a.NO_ERROR&&console.log("GLERR in test_mipmapping() :",d);a.texImage2D(a.TEXTURE_2D,
0,H,2,2,0,a.RGBA,J,Q);d=a.getError();if(d!==a.NO_ERROR)return!1}catch(v){return!1}P&&a.generateMipmap(a.TEXTURE_2D);O.va();O.i(!1,!0);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,r);d=a.getError();d===a.INVALID_OPERATION&&"undefined"!==typeof a.PIXEL_PACK_BUFFER&&(a.bindBuffer(a.PIXEL_PACK_BUFFER,null),a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,r),d=a.getError());return d!==a.NO_ERROR?!1:0!==r[0]}function n(H){return La.Ta()&&g(E,a.FLOAT,new Float32Array(k),H)?(h=3,!0):!1}function w(H){return La.xb()?
g(G,La.ia(),new Uint16Array(k),H)||g(G,a.FLOAT,new Float32Array(k),H)?(h=2,!0):!1:!1}La.Xa();La.ya();var E=a.RGBA,G=a.RGBA;if(Ma.s()){var M=a.RGBA32F;M&&(E=M);(M=a.RGBA16F)&&(G=M)}O.m();N.reset();N.J();a.viewport(0,0,1,1);x.set("s0");b=!0;m=a.createTexture();a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,m);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);if(w(!0)||n(!0))return!0;
y=!1;if(w(!1)||n(!1))return!0;if(Ma.s()){G=E=a.RGBA;if(w(!0)||n(!0))return!0;y=!1;if(w(!1)||n(!1))return!0}return!1},yb:function(){return y},Sc:function(){return h},ad:function(){b||l.m();return 3===h},Yb:function(){b||l.m();return 2===h}};return l}(),Na={a:function(b){var e=Y.a(b.alpha),h=Y.a(b.beta);return{Gb:function(){e.b(1);h.b(2)}}}},Qa={a:function(b){var e=b.rc;e.index=b.index;e.R=b.R;e.parent=b.parent;switch(e.type){case "input":b=Oa.a(e);break;default:b=Pa.a(e)}return b}},Oa={a:function(b){"undefined"===
typeof b.sift&&(b.sift=!1);"undefined"===typeof b.DWT&&(b.DWT=!1);"undefined"===typeof b.blur&&(b.blur=!1);"undefined"===typeof b.siftOutWidth&&(b.siftOutWidth=!1);"undefined"===typeof b.density&&(b.density=1);var e=!1;if(b.mask){e=!0;SETTINGS&&void 0!==SETTINGS.sb&&(b.mask=SETTINGS.sb+b.mask);var h=Y.a({isFloat:!1,url:b.mask})}var m=!1,r="undefined"!==typeof b.preprocessing?b.preprocessing:!1,k=!1,y=!1;b.sift?Sift.m({Ub:a,ba:!1,width:b.size,ed:b.siftOutWidth}):b.DWT&&DWT.m({Ub:a,ba:!1,width:b.size});
var l=!1;b.customInputShader&&(l="s43",x.Pa({name:"_",id:l,c:b.customInputShader,f:["uSource"],precision:"lowp"}),x.F(l,[{type:"1i",name:"_",value:0}]));switch(r){case "sobel":var g="s32";k=!0;break;case "meanNormalization":g="s33";k=!0;break;case "grayScale":g="s29";k=!1;break;case "grayScaleTilt":g="s30";y=!0;k=!1;break;case "rgbGrayTilt":g="s31";y=!0;k=!1;break;case "copy":g=l?l:"s0";break;case "inputLightRegulation":g=l?l:"s29";Ra.m({width:b.size,ib:b.nBlurPass,Xb:!1});m=!0;break;case "direct":case "none":g=
!1;break;default:g="s3"}y&&x.F(g,[{name:"u28",type:"1f",value:b.tilt}]);e&&(g+="Mask");if(b.blur)var n=Y.a({isFloat:!1,isPot:!1,width:b.size});var w=Y.a({isFloat:!1,isPot:!1,width:b.size}),E={B:function(){return b.sift?Sift.da():b.size},da:function(){return E.B()},Qb:function(){return b.sift?Sift.ja():b.DWT?DWT.ja():m?Ra.ja():w},D:function(){N.N();b.blur&&(n.H(),x.set("s44"),x.L("u7",1/b.size,1/b.size),O.i(!1,!0),n.b(0));g&&(x.set(g),k&&x.I("u29",1/b.size),w.H(),e&&h.b(1),O.i(!1,!1),w.b(0),m?Ra.Ha(w):
b.sift?(x.Y(),Sift.Ha()):b.DWT&&(x.Y(),DWT.Ha(4)))}};return E}},Pa={a:function(b){"undefined"===typeof b.disableNormalize&&(b.disableNormalize=!1);var e=[],h=[],m,r,k=!1,y,l=!0,g,n,w=b.isReorganize?b.isReorganize:!1,E=b.kernelsNumber?!0:!1,G=b.dynPelu?Na.a(b.dynPelu):!1,M=G?!0:!1,H={isEnabled:!1},J;if("softmax"===b.type){b.activation="softmax";b.size=Math.pow(2,Math.ceil(Math.log(Math.sqrt(b.num_classes))/Math.log(2)));b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.R.da();b.gain="undefined"!==
typeof b.gain?b.gain:1;x.F("s20",[{type:"1f",name:"u10",value:b.gain}]);var Q=Y.a({isFloat:!0,isPot:!1,width:b.size}),P=Y.a({isFloat:!0,isPot:!1,width:b.size,isMipmap:!0});l=!1;var d=new Uint8Array(Math.pow(4*b.size,2)),v;for(v=0;v<b.size*b.size;++v){var B=v<b.num_classes?255:0;d[4*v]=B;d[4*v+1]=B;d[4*v+2]=B;d[4*v+3]=B}var ea=Y.a({isFloat:!1,isPot:!1,width:b.size,array:d})}else b.cost?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.R.da(),l=!1):"full"===b.connectivityUp&&(b.sparsity=b.R.da());
var wa={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",softmax:"s20",dynPelu:"s17"}[b.activation],ya=b.sparsity*b.sparsity,ma=!1,Z=b.size;if(b.maxPooling){switch(b.maxPooling.size){case 2:var c="s34";break;case 4:c="s35"}ma=!0;Z/=b.maxPooling.size;var F=Y.a({isFloat:!0,isPot:!1,width:Z})}var I=void 0!==b.fc&&b.fc?!0:!1,K=null,W=null,X=null;I&&(K="s45"+b.index.toString(),x.ab("s45",K,[((b.normalization.n-1)/2).toFixed(1)]),x.F(K,[{type:"1i",name:"u1",value:0},
{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},{type:"1f",name:"u33",value:b.normalization.k}]),W=Y.a({isFloat:!0,isPot:!0,width:b.size}),X=Y.a({isFloat:!0,isPot:!0,width:b.size}));var ca,ra,q,aa;l&&(aa=Y.a({isFloat:!0,isPot:!1,width:b.size}));var oa=Y.a(b.bias),D,C={B:function(){return b.size},da:function(){return Z},$a:function(){return b.num_classes},ub:function(z){J.b(z)},ic:function(){b.remap&&
b.remap.isEnabled&&(H={isEnabled:!0,ac:Y.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),layers:b.remap.layers.map(function(z){return b.parent.Pb(z)}),depth:b.remap.depth})},oc:function(){switch(b.connectivityUp){case "gaussian":D=Sa.a(b.connectivity);break;case "direct":D=Ta.a(b.connectivity);break;case "square":D=Ua.a(b.connectivity);break;case "squareFast":D=Va.a(b.connectivity,b.activation);break;case "full":D=Wa.a(b.connectivity);
break;case "conv":n=b.kernelsNumber,D=Xa.a(b.connectivity),w&&(g=Y.a({width:Z,isFloat:!0,isFlipY:!1,isPot:!1}))}if(D.S){var z=b.size*b.sparsity;ra=Math.log(z/b.size)/Math.log(2);ca=Y.a({isMipmap:!0,isFloat:!0,isPot:!0,width:z,hb:ra});q=Y.a({isFloat:!0,isPot:!0,width:b.size})}},D:function(z,V){J=z;D.S?(ca.H(),E&&oa.b(2),D.D(H),ca.b(0),ca.Ya(ra),q.H(),E?x.set("s0"):(x.set("s28"),x.I("u27",ya),oa.b(1)),ca.Sa(ra,0),O.i(!1,!1),x.set(wa),I?W.l():aa.l(),q.b(0),M&&G.Gb(),O.i(!1,!1)):(aa.H(),oa.b(1),D.D());
I&&(x.set(K),X.l(),W.b(0),O.i(!1,!1),x.set("s46"),x.I("u6",1),aa.l(),X.b(1),O.i(!1,!1));if(l)return ma?(F.H(),aa.b(0),x.set(c),x.L("u7",1/b.size,1/b.size),O.i(!1,!1),V=F):V=aa,V.b(0),w&&(g.l(),x.set("s22"),x.L("u14",n,Z/n),O.i(!1,!1),V=g,g.b(0)),V;if("softmax"===b.type){x.set("s20");aa.b(0);Q.l();O.i(!1,!1);b.disableNormalize?z=Q:(x.set("s2"),Q.b(0),ea.b(1),P.l(),O.i(!1,!1),x.set("s0"),r.H(),P.b(0),P.Ya(!1),O.i(!1,!1),x.set("s21"),m.H(),P.Sa(!1,0),x.I("u12",aa.Sb()),r.b(1),O.i(!1,!1),z=m);if(V){switch(k){case "cpuRGBAAvg":break;
default:var ba=C.kb(z)}return ba}return!1}if(b.cost){x.set("gpuRawAvg"===k?"s8":"s7");V=aa;b.disableNormalize||(x.I("u4",1/b.size),m.H(),aa.b(0),O.i(!1,!1),V=m);switch(k){case "cpuRGBA2Float":V.Va();ba=C.kb(V);y(ba);break;case "gpuRawAvg":case "gpuRaw":V.b(0),y(V)}return!1}},Ab:function(z){z&&"undefined"!==typeof z.jb&&(k=z.jb,y=z.hc);aa=Y.a({isFloat:!0,isPot:!0,isMipmap:"softmax"===b.type,width:b.size});"softmax"===b.type&&(r=Y.a({isFloat:!0,isPot:!0,width:1}));var V=0,ba=0,da="undefined"!==typeof b.num_classes&&
b.num_classes?b.num_classes:b.size*b.size;for(z=0;z<da;++z)e.push(V+(b.size-1-ba)*b.size),h.push([-1,-1,-1,-1]),++V,V===b.size&&(V=0,++ba);b.disableNormalize||(m=Y.a({isFloat:!0,isPot:!0,width:b.size}))},kb:function(z){z.Va();var V=z.lb();e.forEach(function(ba,da){h[da][0]=V[0][ba];h[da][1]=V[1][ba];h[da][2]=V[2][ba];h[da][3]=V[3][ba]});return h}};b.R&&C.oc(b.R);return C}};
function Ya(){var b,e,h,m;b||(b={});this.Pb=function(r){return e[r]};this.lc=function(r){var k=!1;e=r.map(function(y,l){return k=y=Qa.a({index:l,parent:this,rc:y,R:k})});h=e[0];m=e[e.length-1];e.forEach(function(y,l){0!==l&&y.ic()})};this.D=function(r,k){var y=k;e.forEach(function(l){y=l.D(y,r)});return y};this.Ob=function(){return h.B()};this.Rb=function(){return m.B()};this.ja=function(){return m.Qb()};this.nc=function(r){m.Ab(r)};this.$a=function(){return m.$a()}}
var Ta={a:function(b){var e=Y.a(b.weights);delete b.weights.data;return{S:!0,ca:function(){return 1},Tb:function(){return e},D:function(){x.set("s27");e.b(1);O.i(!1,!1)}}}},Wa={a:function(b){var e=b.fromLayerSize,h=Y.a(b.weights);return{S:!0,ca:function(){return e},D:function(m){if(m.isEnabled){x.set("s25");m.ac.b(3);var r,k=Math.min(m.layers.length,m.depth);for(r=0;r<k;++r)m.layers[r].ub(4+r)}else x.set("s24");x.I("u18",b.toLayerSize);h.b(1);O.i(!1,!1)}}}},Sa={a:function(b){var e=b.toSparsity*b.toLayerSize,
h=e/b.fromLayerSize,m=Y.a(b.weights);Y.a({width:e,isFloat:!0,array:new Float32Array(b.fromBindings),isPot:!0});var r=Y.a({width:e,isFloat:!0,array:new Float32Array(b.toBindings),isPot:!0});return{S:!0,ca:function(){return h},D:function(){x.set("s23");m.b(1);r.b(2);O.i(!1,!0)}}}},Ua={a:function(b){var e=b.fromLayerSize,h=b.toLayerSize,m=b.toSparsity,r=m*h,k=r/e,y=e/h,l,g,n,w,E=0,G=0,M=0,H=Array(m*h*m*h*4),J=Array(m*h*m*h*4),Q=Array(e*e);for(l=0;l<Q.length;++l)Q[l]=0;var P=Math.floor(m/2),d=.5/h,v=
.5/e,B=.5/r;for(l=0;l<h;++l)for(g=0;g<h;++g){var ea=Math.round(l*y);var wa=Math.round(g*y);var ya=l/h;var ma=g/h;ya+=d;ma+=d;for(n=0;n<m;++n)for(w=0;w<m;++w){var Z=E/r;var c=G/r;var F=ea+n-P;var I=wa+w-P;0>F&&(F+=e);0>I&&(I+=e);F>=e&&(F-=e);I>=e&&(I-=e);var K=F/e;var W=I/e;c=1-c-1/r;K+=v;W+=v;Z+=B;c+=B;var X=l*m+n,ca=g*m+w;ca=h*m-ca-1;X=ca*h*m+X;H[4*X]=Z;H[4*X+1]=c;H[4*X+2]=K;H[4*X+3]=W;K=Q[I*e+F]++;W=K%k;F=F*k+W;I=I*k+(K-W)/k;I=e*k-1-I;I=I*e*k+F;J[4*I]=Z;J[4*I+1]=c;J[4*I+2]=ya;J[4*I+3]=ma;++E>=r&&
(E=0,++G);++M}}var ra=Y.a(b.weights);Y.a({width:r,isFloat:!0,array:new Float32Array(J),isPot:!0});J=null;var q=Y.a({width:r,isFloat:!0,array:new Float32Array(H),isPot:!0});H=null;return{S:!0,ca:function(){return k},D:function(){x.set("s23");ra.b(1);q.b(2);O.i(!1,!1)}}}},Xa={a:function(b){var e=b.kernelsNumber,h=b.toSparsity,m=h*b.toLayerSize/b.fromLayerSize,r=Y.a(b.weights);return{S:!0,ca:function(){return m},Vc:function(){return h},Tb:function(){return r},D:function(){x.set("s26");x.I("u24",e);x.I("u25",
h);x.I("u18",b.toLayerSize);x.I("u26",b.fromLayerSize);r.b(1);O.i(!1,!1)}}}},Va={a:function(b,e){var h=b.fromLayerSize,m=b.toLayerSize,r=b.toSparsity,k=b.stride?b.stride:1,y=r*m/h,l=m<h,g=h/m,n=Y.a(b.weights),w="s47"+[h.toString(),m.toString(),r.toString(),k.toString(),e].join("_");x.Jb(w)||(b=Da(e),m=[{type:"1f",name:"u18",value:m},{type:"1f",name:"u32",value:k}],l&&m.push({type:"1f",name:"u26",value:h}),h=[(l?y:r).toFixed(1),b],l&&h.push(g.toFixed(1)),x.ab(l?"s40":"s39",w,h),x.F(w,m.concat([{type:"1i",
name:"u16",value:0},{type:"1i",name:"u23",value:1},{type:"1i",name:"u15",value:3}])));return{S:!1,ca:function(){return y},D:function(){x.set(w);n.b(3);O.i(!1,!1)}}}},Ra=function(){var b,e,h,m,r,k,y,l,g;return{m:function(n){b=n.ib?n.ib:3;e=n.width?n.width:64;m=n.Xb?!0:!1;n={isFloat:!1,width:e,isPot:!1,isFlipY:!1};r=Y.a(n);k=Y.a(n);y=Y.a(n);l=Y.a(n);g=Y.a({isFloat:!0,width:e,isPot:!1,isFlipY:!1});h=1/e},Ha:function(n){x.set("s37");for(var w=0;w<b;++w)r.l(),x.L("u7",h,0),O.i(m,!1),k.l(),r.b(0),x.L("u7",
0,h),O.i(m,!1),k.b(0);x.set("s36");l.l();n.b(0);O.i(m);x.set("s37");for(w=0;w<b;++w)y.l(),l.b(0),x.L("u7",h,0),O.i(m,!1),l.l(),y.b(0),x.L("u7",0,h),O.i(m,!1);x.set("s38");g.l();n.b(0);k.b(1);l.b(2);O.i(m,!1);g.b(0)},ja:function(){return g}}}();
window.JEEARAPI=function(){var b,e,h;function m(f,t){for(var A in f)"undefined"!==typeof t[A]&&(f[A]=t[A])}function r(f){if(f){var t=f.w,A=f.h;q.u.aa[0]=-1+2*(f.x+t/2)/q.W;q.u.aa[1]=-1+2*(f.y+A/2)/q.V;q.u.scale[0]=t/q.W;q.u.scale[1]=A/q.V}else q.u.aa[0]=0,q.u.aa[1]=0,q.u.scale[0]=1,q.u.scale[1]=1;q.width=q.W*q.u.scale[0];q.height=q.V*q.u.scale[1]}function k(){var f=[{type:"2f",name:"u34",value:q.u.aa},{type:"2f",name:"u35",value:q.u.scale}];x.F("s49",f.concat([{type:"1f",name:"u36",value:q.W/q.V}]));
x.F("s50",f)}function y(f,t,A){var L=g(f,t,"dx")*q.U[0],T=g(f,t,"dy")*q.U[1];f=A[2]*g(f,t,"ds");if(X){t=Math.cos(ca);var pa=Math.sin(ca),ta=-pa*L+t*T;L=t*L+pa*T;T=ta}L*=A[0];T*=A[1];A=D.j[2];t=D.j[3];D.j[0]-=L*A*B[0];D.j[1]-=T*t*B[1];D.j[2]-=f*A*B[2];D.j[2]=Math.min(Math.max(D.j[2],d.mb[0]*q.U[0]),d.mb[1]*q.U[0]);D.j[0]=Math.min(Math.max(D.j[0],0),1);D.j[3]=D.j[2]*q.aspectRatio/q.ka;D.j[1]=Math.min(Math.max(D.j[1],0),1)}function l(f){var t=D.j[2],A=D.j[3],L=(2*Math.random()-1)*f,T=(2*Math.random()-
1)*f;D.j[0]+=(2*Math.random()-1)*f*t;D.j[1]+=L*A;D.j[2]+=T*t;D.j[3]=D.j[2]*q.aspectRatio/q.ka}function g(f,t,A){t=ba[t].$b[A];return(f[t][0]+f[t][1]+f[t][2]+f[t][3])/4}function n(f,t){var A=g(f,t,"here");f=R*g(f,t,"notHere");return(A-f)/ba[t].Ma}function w(){ca=0;X&&null!==ra&&(ca=ra[0]+Math.random()*(ra[1]-ra[0]));z=C.Z;var f=aa[oa];f&&(D.j[0]=f[0],D.j[1]=f[1],D.j[2]=f[2],D.j[3]=f[3]);oa=(oa+1)%aa.length}function E(f,t){ya&&(ha.roll=X?ca:Z);ma&&(ha.pitch=c);ha.label=ba[S.C].label;ha.distance=ba[S.C].Fb;
ha.positionScale[0]=.5+(D.j[0]-.5)/q.u.scale[0];ha.positionScale[1]=.5+(D.j[1]-.5)/q.u.scale[1];ha.positionScale[2]=D.j[2];ha.positionScale[3]=D.j[3];ha.detectScore=t;ha.yaw=f}function G(f){var t=-1,A=-1E12;-1!==[C.Z,C.ra].indexOf(z)&&ba.forEach(function(ta,qa){ta=n(f,qa);ta>A&&(A=ta,t=qa)});switch(z){case C.Z:z=C.ra;y(f,t,[1,1,1]);h=0;break;case C.ra:++h;A>Ba?(U?(z=C.ga_,sa=t,S.C=t,S.Ga=0):(z=C.Oa,va=0,sa=t),y(f,sa,[1,1,1])):h>d.cc?w():y(f,t,[1,1,1]);break;case C.Oa:++va;va>d.ec&&(z=C.ga_,S.n=0,S.qa=
0,S.C=sa,S.M[0]=0,S.M[1]=0);y(f,sa,[1,1,1]);l(d.Zb);break;case C.ga_:if(U||++S.n>d.ma){var L=U?n(f,S.C):S.qa/d.ma;if(U||L>Ba+d.sc){ya&&(Z=ea*g(f,S.C,"roll"),X&&(ca+=Z));if(F){var T=U?Math.PI*g(f,S.C,"yaw"):Math.atan2(S.M[1],S.M[0]);if(ma){var pa=.5+.5*g(f,S.C,"pitch");c=wa[0]+(wa[1]-wa[0])*pa}E(T,L)}Ga?(y(f,S.C,u),L>Ca?S.Ga=0:++S.Ga>d.bc&&w()):F&&w()}else w()}else y(f,S.C,[1,1,1]),l(d.zb*(d.ma-S.n)/d.ma),L=n(f,S.C),S.qa+=L,ba.forEach(function(ta,qa){S.C!==qa&&n(f,qa)>Ba*d.tc&&w()}),L=Math.PI*g(f,S.C,
"yaw"),S.M[0]+=Math.cos(L),S.M[1]+=Math.sin(L)}}function M(){x.rb([{id:"s49",name:"_",fa:"attribute vec2 a0;uniform vec4 u37;uniform vec2 u34,u35;uniform float u38,u36;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);float a=u36*(u37.z/u37.w);a*=u35.x/u35.y;float b=cos(u38),c=sin(u38);vec2 d=mat2(b,-c*a,c/a,b)*a0,f=u34+d*u35;vv0=u37.xy+.5*u37.zw*f;}",c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:"u1 u37 u35 u34 u38 u36".split(" "),precision:"lowp"},
{id:"s51",name:"_",fa:"attribute vec2 a0;uniform vec4 u37;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u37.xy+.5*u37.zw*a0;}",c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec3 g=vec3(1.,1.,1.);float c[5];void main(){c[0]=texture2D(u1,vv0-u7*vec2(-1.,0.)).r,c[1]=texture2D(u1,vv0-u7*vec2(0.,-1.)).r,c[2]=texture2D(u1,vv0-u7).r,c[3]=texture2D(u1,vv0-u7*vec2(0.,1.)).r,c[4]=texture2D(u1,vv0-u7*vec2(1.,0.)).r;float a,b;a=min(c[0],c[1]),b=max(c[0],c[1]),c[0]=a,c[1]=b,a=min(c[0],c[2]),b=max(c[0],c[2]),c[0]=a,c[2]=b,a=min(c[0],c[3]),b=max(c[0],c[3]),c[0]=a,c[3]=b,a=min(c[0],c[4]),b=max(c[0],c[4]),c[0]=a,c[4]=b,a=min(c[1],c[2]),b=max(c[1],c[2]),c[1]=a,c[2]=b,a=min(c[1],c[3]),b=max(c[1],c[3]),c[1]=a,c[3]=b,a=min(c[1],c[4]),b=max(c[1],c[4]),c[1]=a,c[4]=b,a=min(c[2],c[3]),b=max(c[2],c[3]),c[2]=a,c[3]=b,a=min(c[2],c[4]),b=max(c[2],c[4]),c[2]=a,c[4]=b,gl_FragColor=vec4(c[2]*g,1.);}",
f:["u1","u37","u7"],precision:"lowp"},{id:"s50",name:"_",fa:"attribute vec2 a0;uniform vec2 u34,u35;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){gl_Position=vec4(a0,0.,1.);vec2 a=u34+a0*u35,b=(a+f)/2.;vv0=b;}",c:"uniform sampler2D u1;uniform vec4 u37;varying vec2 vv0;void main(){vec2 b=u37.xy-.5*u37.zw,c=u37.xy+.5*u37.zw,a=step(b,vv0)*step(vv0,c);gl_FragColor=mix(texture2D(u1,vv0),vec4(0.,1.,0.,1.),a.x*a.y*.5);}",f:["u1","u37","u35","u34"],precision:"lowp"}]);var f=[{type:"1i",name:"u1",
value:0}];x.F("s49",f);x.F("s51",f);x.F("s50",f);H()}function H(){ca=0;x.F("s49",[{type:"1f",name:"u38",value:0}]);ha.roll=0}function J(){q.aspectRatio=q.width/q.height;aa.splice(0,aa.length);q.Ea=Math.round(q.width*v.margins);q.Fa=Math.round(q.height*v.margins);q.La=q.width-2*q.Ea;q.Ka=q.height-2*q.Fa;var f=Math.min(q.width,q.height),t,A,L;for(t=0;t<v.nSweepSsteps;++t){var T=v.sweepScaleRange[0]+t/(v.nSweepSsteps-1)*(v.sweepScaleRange[1]-v.sweepScaleRange[0]);T*=f;var pa=T/q.width;var ta=pa*q.aspectRatio;
var qa=(q.La-T)*(q.Ka-T);var ua=Math.min(Math.floor(qa/(v.sweepStepMinPx*v.sweepStepMinPx)),v.nSweepXYsteps);ua=qa/ua;var xa=Math.round(Math.sqrt(ua));var Fa=Math.round((q.La-T)/xa);var Ka=Math.round((q.Ka-T)/xa);for(L=0;L<Ka;++L)for(qa=q.Fa+Math.round(T/2+xa*L),qa/=q.height,A=0;A<Fa;++A)ua=q.Ea+Math.round(T/2+xa*A),ua/=q.width,aa.push([ua,qa,pa,ta])}if(v.sweepShuffle)for(f=aa,t=f.length-1;0<t;--t)T=Math.floor(Math.random()*(t+1)),pa=f[t],f[t]=f[T],f[T]=pa;else aa.reverse()}function Q(f){na={isLinear:!0,
width:q.width,height:q.height,v:f,isPot:!1,isFlipY:!0,isFloat:!1};b=Y.a(na);ja=!0}function P(f,t,A){if(!f.exportData||!f.exportData.labels)return t("INVALID_NN");var L=f.exportData;"undefined"===typeof L.paramsPerLabel&&(L.paramsPerLabel={});"undefined"!==typeof A&&A.paramsPerLabel&&(L.paramsPerLabel=Object.assign(L.paramsPerLabel,A.paramsPerLabel));la.reset_state();I=new Ya;I.lc(f.layers);I.nc({jb:"cpuRGBA2Float",hc:G});D.X=Y.a({isFloat:!1,isPot:!1,width:I.Ob()});B=L.dxysFactors?L.dxysFactors:d.Wa;
L.rollMax?(ea=L.rollMax,ya=!0):ya=!1;L.pitchRange?(wa=L.pitchRange,ma=!0):ma=!1;da=I.Rb();f="undefined"===typeof A?{}:A;R="undefined"===typeof f.notHereFactor?1:f.notHereFactor;f=L.labels;A="undefined"===typeof L.paramsPerLabel?!1:L.paramsPerLabel;var T="undefined"===typeof L.inputAspectRatio?1:L.inputAspectRatio;q.U[0]=Math.sqrt(T);q.U[1]=1/Math.sqrt(T);T!==q.ka&&(q.ka=T,J());T=Array(f.length);var pa,ta;for(ta=0;ta<da/8;++ta)for(pa=0;pa<da;++pa){var qa=pa+ta*da;if(qa>=f.length)break;var ua=pa;var xa=
8*ta;var Fa=f[qa];var Ka=A&&A[Fa]&&A[Fa].thresholdDetect?A[Fa].thresholdDetect:d.Ma;var Za=L.distances&&L.distances[qa]?L.distances[qa]:3;T[qa]={Ma:Ka,label:Fa,Fb:Za,$b:{here:ua+xa*da,notHere:ua+(xa+1)*da,yaw:ua+(xa+2)*da,dx:ua+(xa+3)*da,dy:ua+(xa+4)*da,ds:ua+(xa+5)*da,roll:ua+(xa+6)*da,pitch:ua+(xa+7)*da}}}ba=T;t(!1)}var d={ha:512,Wa:[.05,.05,.15],jc:{margins:.1,nSweepXYsteps:36,nSweepSsteps:4,sweepScaleRange:[.3,.7],sweepStepMinPx:16,sweepShuffle:!0},mb:[1/15,.9],dc:3,cc:3,Ma:.68,ec:10,Zb:.015,
ma:8,sc:-.02,zb:.01,Dc:.06,tc:.7,bc:20},v=Object.create(d.jc),B=d.Wa,ea,wa,ya=!1,ma=!1,Z=0,c=0,F=!1,I,K=!1,W=!1,X,ca=0,ra,q={aspectRatio:1,ka:1,U:[1,1],width:0,height:0,W:0,V:0,Ea:0,Fa:0,La:0,Ka:0,xa:"s49",u:{aa:[0,0],scale:[1,1]}},aa=[],oa=0,D={X:!1,j:[0,0,0,0]},C={sa:-2,LOADING:-1,Z:0,ra:1,Oa:2,ga_:3},z=C.sa,V=-2,ba,da;var va=h=0;var sa=-1;var S={n:0,Ga:0,C:-1,qa:0,M:[0,0]};var za=0;var ja=b=e=!1;var fa=0;var ka=-1;var na=null;var Aa=!1,ha={distance:0,label:!1,positionScale:[0,0,0,0],detectScore:0,
yaw:0,pitch:0,roll:0},Ba=1,Ca=1,U=!1,Ga=!1,u=[2,2,2],R=1,la={init:function(f){function t(A){f.callbackReady&&f.callbackReady(A)}if(z!==C.sa)return t("ALREADY_INITIALIZED");z=C.LOADING;if("undefined"!==typeof f.canvas)K=f.canvas,W=!1;else if("undefined"===typeof f.canvasId)K=document.createElement("canvas"),W=!1;else{K=document.getElementById(f.canvasId);if(!K)return t("INVALID_CANVASID"),!1;W=!0}"undefined"!==typeof f.isDebugRender&&(W=f.isDebugRender);W&&(K.style.display="block");f.scanSettings&&
m(v,f.scanSettings);f.canvasSize&&(d.ha=f.canvasSize);X="undefined"===typeof f.followZRot?!1:f.followZRot;ra="undefined"===typeof f.ZRotRange?null:f.ZRotRange;Aa="undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope;-1!==d.ha&&(K.width=d.ha,K.height=d.ha);la.set_source(f.video,f.videoCrop);if(!Ma.m({ba:K,width:K.width,height:K.height,debug:!1,gc:t.bind(null,"GLCONTEXT_LOST"),premultipliedAlpha:!1})||!Ma.Wb())return t("GL_INCOMPATIBLE"),!1;0===za&&(Q(e),
J());M();k();z=C.Z;t(!1);return!0},set_source:function(f,t){"undefined"!==typeof f&&f?(e=f,za=0,"VIDEO"===f.tagName?(q.W=e.videoWidth,q.V=e.videoHeight,fa=1):(q.W=e.width,q.V=e.height,fa=2),r(t)):za=1;-1===[C.sa,C.LOADING].indexOf(z)&&(na&&na.v&&(na.v=f),J(),k(),2===fa&&b.refresh())},set_NN:function(f,t,A){if(1===V)t&&t("NN_LOADING");else{var L=function(T){V=0;t&&t(T)};V=1;"string"===typeof f?ia(f,function(T){if(!T)return L("INVALID_NN");try{var pa=JSON.parse(T)}catch(ta){return L("INVALID_NN")}P(pa,
L,A)},function(){L("NOTFOUND_NN")}):P(f,L,A)}},reset_state:function(){H();oa=0;z=C.Z},detect:function(f,t,A){if(z===C.LOADING||0!==V)return ha;N.N();ha.label=!1;"undefined"!==typeof A&&(Ba=A.thresholdDetectFactor?A.thresholdDetectFactor:1,Ca=A.thresholdDetectFactorUnstitch?A.thresholdDetectFactorUnstitch:1,U=A.isSkipConfirmation?!0:!1,Ga=A.isKeepTracking?!0:!1,u=A.trackingFactors?A.trackingFactors:u);if(0===za)1===fa&&ka!==e.currentTime&&(b.refresh(),ka=e.currentTime);else if(1===za){if(!ja){q.width=
t.size.width;q.height=t.size.height;switch(A.cutShader){case "IOS":q.xa="s51";x.F("s51",[{name:"u7",type:"2f",value:[1/q.width,1/q.height]}]);break;default:q.xa="s49"}Q(null);J()}b.vc(t.buffer)}f=f?f:d.dc;for(t=0;t<f;++t)D.X.H(),x.set(q.xa),X&&ya&&x.I("u38",z===C.ga_?ca:0),b.b(0),x.pa("u37",D.j),O.i(!1,!1),D.X.b(0),F=t===f-1,I.D(!1,D.X),N.N();N.uc();W&&(a.viewport(0,0,K.width,K.height),x.set("s50"),b.b(0),x.pa("u37",D.j),O.i(!1,!1),Aa&&a.commit?a.commit():a.flush());return ha},get_aspectRatio:function(){return q.width/
q.height},set_scanSettings:function(f){m(v,f);J()},set_videoCrop:function(f){r(f);k();J()}};return la}();
;return JEEARAPI;})();