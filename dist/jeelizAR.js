 /**
 * Jeeliz AR - https://github.com/jeeliz/jeelizAR
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEEARAPI=(function(){function ja(b,d,h){var m=new XMLHttpRequest;m.open("GET",b,!0);m.withCredentials=!1;m.onreadystatechange=function(){4===m.readyState&&(200===m.status?d(m.responseText):"undefined"!==typeof h&&h(m.status))};m.send()}
function Ga(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Ha(b,d){var h=d%8;return b[(d-h)/8]>>7-h&1}
function Ja(b){var d=JSON.parse(b);b=d.ne;var h=d.nf,m=d.n,t="undefined"===typeof btoa?Buffer.from(d.data,"base64").toString("latin1"):atob(d.data),k=t.length,A;d=new Uint8Array(k);for(A=0;A<k;++A)d[A]=t.charCodeAt(A);t=new Float32Array(m);k=new Float32Array(h);A=b+h+1;var l,g;for(l=0;l<m;++l){var q=A*l;var x=0===Ha(d,q)?1:-1;var C=q+1;var F=1,J=0;for(g=C+b-1;g>=C;--g)J+=F*Ha(d,g),F*=2;g=J;C=d;F=q+1+b;J=k;var G=0,L=J.length;for(q=F;q<F+L;++q)J[G]=Ha(C,q),++G;for(q=C=0;q<h;++q)C+=k[q]*Math.pow(2,-q-
1);x=0===C&&0===g?0:x*(1+C)*Math.pow(2,1+g-Math.pow(2,b-1));t[l]=x}return t}
var y=function(){function b(e,r){e=a.createShader(e);a.shaderSource(e,r);a.compileShader(e);return a.getShaderParameter(e,a.COMPILE_STATUS)?e:!1}function d(e,r){e=b(a.VERTEX_SHADER,e);r=b(a.FRAGMENT_SHADER,r);var B=a.createProgram();a.attachShader(B,e);a.attachShader(B,r);a.linkProgram(B);return B}function h(e){void 0===e.fa&&(e.fa="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===e.Qa&&(e.Qa=["a0"]);void 0===e.ua&&(e.ua=
[2]);if(void 0===e.precision||"highp"===e.precision)e.precision=g;e.id=A++;void 0!==e.mc&&e.mc.forEach(function(B,aa){e.c=e.c.replace(B,e.oa[aa])});e.Na=0;e.ua.forEach(function(B){e.Na+=4*B});e.na=d(e.fa,"precision "+e.precision+" float;\n"+e.c);e.o={};e.f.forEach(function(B){e.o[B]=a.getUniformLocation(e.na,B)});e.attributes={};e.$=[];e.Qa.forEach(function(B){var aa=a.getAttribLocation(e.na,B);e.attributes[B]=aa;e.$.push(aa)});if(e.g){a.useProgram(e.na);k=e;t=e.id;for(var r in e.g)a.uniform1i(e.o[r],
e.g[r])}e.Zc=!0}function m(e){Ka.rc(Q);t!==e.id&&(Q.Y(),t=e.id,k=e,a.useProgram(e.na),e.$.forEach(function(r){0!==r&&a.enableVertexAttribArray(r)}))}var t=-1,k=!1,A=0,l=!1,g="highp",q=["u1"],x=["u0"],C={u1:0},F={u0:0},J={u1:0,u2:1},G={u3:0},L={s0:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:q,g:C},s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:q,g:C,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
f:["u1","u2"],g:J},s3:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:q,g:C},s4:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",f:["u1","mask"],g:J},s5:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:q,g:C},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
f:q,g:C},s7:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],g:F},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",f:["u0","u4"],g:F},s9:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
f:q,g:C},s10:{c:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",f:["u1","u5","u6"],g:{u1:0,u5:1}},s11:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",f:["u1","u7"],g:C},s12:{c:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
f:["u1","u8"],g:C},s13:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:x,g:F},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",f:x,g:F},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",f:x,g:F},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
f:x,g:F},s17:{c:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u6","u9"],g:{u0:0,u6:1,u9:2}},s18:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",f:x,g:F},s19:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
f:x,g:F},s20:{c:"uniform sampler2D u0;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=exp(a);}",f:["u0","u10"],g:F},s21:{c:"uniform sampler2D u0,u11;uniform float u12;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,f);float b=u12*u12;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u13","u12"],g:{u0:0,u13:1}},s22:{c:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),g=floor(u14.x*fract(b*u14.y)),f=(g*u14.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
f:["u1","u14"],g:C},s23:{c:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),e=texture2D(u16,c);gl_FragColor=d*e;}",f:["u15","u16","u17"],g:{u16:0,u15:1,u17:2}},s24:{c:"uniform float u18;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 a=fract(vv0*u18);vec4 b=texture2D(u15,vv0),c=texture2D(u16,a);gl_FragColor=b*c;}",f:["u16","u15","u18"],g:{u16:0,u15:1}},s25:{c:"uniform float u18;uniform sampler2D u15,u16,u19,u20,u21,u22;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u18,m=floor(i),c=i-m;vec4 n=texture2D(u15,vv0),d=texture2D(u16,c),a=texture2D(u22,vv0);a=a*255.;vec4 o=texture2D(u19,c),p=texture2D(u20,c),q=texture2D(u21,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
f:"u15 u16 u18 u22 u19 u20 u21".split(" "),g:{u16:0,u15:1,u22:3,u19:4,u20:5,u21:6}},s26:{c:"uniform sampler2D u15,u16,u23;uniform float u18,u24,u25,u26;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u24*vv0),g=u24*vv0-a;float b=u18/u24;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u24;float l=u24*u26/u18;vec2 m=l*c,i=(m+d*u25)/u26,e=step(i,j);vec4 n=texture2D(u15,h),o=texture2D(u16,i),p=n*o*e.x*e.y,k=texture2D(u23,h);gl_FragColor=p*u25*u25+k;}",f:"u15 u16 u18 u24 u25 u26 u23".split(" "),g:{u16:0,
u15:1,u23:2}},s27:{c:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",f:["u15","u16"],g:{u16:0,u15:1}},s28:{c:"uniform sampler2D u1,u23;uniform float u27;varying vec2 vv0;void main(){gl_FragColor=texture2D(u23,vv0)+u27*texture2D(u1,vv0);}",f:["u1","u23","u27"],g:{u1:0,u23:1}},s29:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
f:q,g:C,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 e=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(dot(a,e),dot(b,e),dot(c,e),dot(d,e));}",f:["u1","u28"],g:C,precision:"lowp"},s31:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
f:["u1","u28"],g:C,precision:"lowp"},s32:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u29))*2.,b-=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,b+=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u29))*2.,b+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
f:["u1","u2","u29"],g:J},s33:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u29,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u1,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,c).r-i/g)*j;}",f:["u1","u2","u29"],g:J},s34:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
f:["u3","u7"],g:G},s35:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u7"],g:G},s36:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
f:["u1"],g:C,precision:"lowp"},s37:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",f:["u7","u1"],g:C,precision:"lowp"},s38:{c:"uniform sampler2D u1,u30,u31;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u30,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
f:["u1","u30","u31"],g:{u1:0,u30:1,u31:2}}},K={s39:{c:"uniform float u18,u32;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(.01,.01);void main(){vec4 sum=texture2D(u23,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u18+eps2);float weightSize=toSparsity*u18;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:["u18","u15","u16","u23","u32"],oa:["1.1111","gl_FragColor\\*=2.2222;"]},s40:{c:"uniform float u18,u32,u26;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(.01,.01);void main(){vec4 sum=texture2D(u23,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u26,xyTo=floor(vv0*u18+eps2);float weightSize=fromSparsity*u26;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u18;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u26,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:"u18 u26 u15 u16 u23 u32".split(" "),oa:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},Q={Da:function(){return l},m:function(){if(!l){g="highp";for(var e in L)h(L[e],e);y.set("s0");a.enableVertexAttribArray(0);e=La.m();l=!0;return e}},vb:function(e){e.forEach(function(r){Q.Pa(r)})},Pa:function(e){L[e.id]=e;h(e,e.id)},bb:function(e,r,B){r||(r=e);L[r]=Object.create(K[e]);K[e].oa&&K[e].oa.forEach(function(aa,Aa){L[r].c=L[r].c.replace(new RegExp(aa,"g"),B[Aa])});h(L[r],r)},set:function(e){m(L[e])},
Mb:function(e){return"undefined"!==typeof L[e]},Mc:function(){return k.Jc},Y:function(){-1!==t&&(t=-1,k.$.forEach(function(e){0!==e&&a.disableVertexAttribArray(e)}))},Ia:function(){var e=0;k.$.forEach(function(r,B){B=k.ua[B];a.vertexAttribPointer(r,B,a.FLOAT,!1,k.Na,e);e+=4*B})},Ic:function(){a.enableVertexAttribArray(0)},Ja:function(){a.vertexAttribPointer(k.$[0],2,a.FLOAT,!1,8,0)},kd:function(e,r){a.uniform1i(k.o[e],r)},I:function(e,r){a.uniform1f(k.o[e],r)},M:function(e,r,B){a.uniform2f(k.o[e],
r,B)},ld:function(e,r){a.uniform2fv(k.o[e],r)},nd:function(e,r){a.uniform3fv(k.o[e],r)},md:function(e,r,B,aa){a.uniform3f(k.o[e],r,B,aa)},pa:function(e,r){a.uniform4fv(k.o[e],r)},od:function(e,r){a.uniformMatrix2fv(k.o[e],!1,r)},pd:function(e,r){a.uniformMatrix3fv(k.o[e],!1,r)},qd:function(e,r){a.uniformMatrix4fv(k.o[e],!1,r)},F:function(e,r){Q.set(e);r.forEach(function(B){switch(B.type){case "4f":a.uniform4fv(k.o[B.name],B.value);break;case "3f":a.uniform3fv(k.o[B.name],B.value);break;case "2f":a.uniform2fv(k.o[B.name],
B.value);break;case "1f":a.uniform1f(k.o[B.name],B.value);break;case "1i":a.uniform1i(k.o[B.name],B.value);break;case "mat2":a.uniformMatrix2fv(k.o[B.name],!1,B.value);break;case "mat3":a.uniformMatrix3fv(k.o[B.name],!1,B.value);break;case "mat4":a.uniformMatrix4fv(k.o[B.name],!1,B.value)}})}};return Q}(),a=!1,Oa=function(){function b(g){console.log("ERROR in ContextFeedForward : ",g);return!1}var d=!1,h=!1,m=!1,t=!1,k=!0,A=!1,l={B:function(){return d.width},L:function(){return d.height},Nc:function(){return d},
Lc:function(){return a},s:function(){return k},flush:function(){a.flush()},Qb:function(){A||(A=new Uint8Array(d.width*d.height*4));a.readPixels(0,0,d.width,d.height,a.RGBA,a.UNSIGNED_BYTE,A);return A},Pc:function(){return d.toDataURL("image/jpeg")},Qc:function(){M.J();h||(h=document.createElement("canvas"),m=h.getContext("2d"));h.width=d.width;h.height=d.height;var g=l.Qb(),q=m.createImageData(h.width,h.height),x,C,F=h.width,J=h.height,G=q.data;for(C=0;C<J;++C){var L=J-C-1;for(x=0;x<F;++x){var K=
4*(C*F+x);var Q=4*(L*F+x);G[K]=g[Q];G[K+1]=g[Q+1];G[K+2]=g[Q+2];G[K+3]=g[Q+3]}}m.putImageData(q,0,0);return h.toDataURL("image/png")},Oc:function(g){!h&&g&&(h=document.createElement("canvas"),m=h.getContext("2d"));var q=g?h:document.createElement("canvas");q.width=d.width;q.height=d.height;(g?m:q.getContext("2d")).drawImage(d,0,0);return q},m:function(g){g.Eb&&!g.ba?d=document.getElementById(g.Eb):g.ba&&(d=g.ba);d||(d=document.createElement("canvas"));d.width=g&&void 0!==g.width?g.width:512;d.height=
g&&void 0!==g.height?g.height:512;"undefined"===typeof g&&(g={});void 0===g.premultipliedAlpha&&(g.premultipliedAlpha=!1);void 0===g.eb&&(g.eb=!0);void 0===g.antialias&&(g.antialias=!1);var q={antialias:g.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:g.premultipliedAlpha,stencil:!1,depth:g.eb},x;if(x=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream)x=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),x=12===parseInt(x[1],10);x||(a=d.getContext("webgl2",q));a?k=!0:
((a=d.getContext("webgl",q))||(a=d.getContext("experimental-webgl",q)),k=!1);if(!a)return b("WebGL is not enabled");(t=a.getExtension("WEBGL_lose_context"))&&d.addEventListener("webglcontextlost",g.ic,!1);if(!Na.m())return b("Not enough capabilities");if(!Na.Ab()&&k)return b("Your configuration cannot process color buffer float");a.clearColor(0,0,0,0);a.disable(a.DEPTH_TEST);a.disable(a.BLEND);a.disable(a.DITHER);a.disable(a.STENCIL_TEST);a.GENERATE_MIPMAP_HINT&&a.hint(a.GENERATE_MIPMAP_HINT,a.FASTEST);
a.disable(a.SAMPLE_ALPHA_TO_COVERAGE);a.disable(a.SAMPLE_COVERAGE);return!0},Zb:function(){if(!y.m())return!1;a.depthFunc(a.LEQUAL);a.clearDepth(1);return!0}};return l}(),Ka=function(){var b="undefined"===typeof y?JEShaders:y;return{rc:function(d){b!==d&&(b.Y(),b=d)},Da:function(){return b.Da()},Ja:function(){b.Ja()},Ia:function(){b.Ia()},Y:function(){b.Y()},set:function(d){b.set(d)}}}(),P=function(){var b,d,h=0,m=-2,t=-2,k=!1,A={reset:function(){t=m=-2},m:function(){k||(b=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,
b),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),a.STATIC_DRAW),d=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),a.STATIC_DRAW),A.va(),k=!0)},a:function(l){var g=h++,q=l.O?l.O.length:0,x="undefined"===typeof l.mode?a.STATIC_DRAW:l.mode,C=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,C);a.bufferData(a.ARRAY_BUFFER,l.tb instanceof Float32Array?l.tb:new Float32Array(l.tb),x);m=g;if(l.O){var F=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,
F);if(65536>l.O.length){var J=Uint16Array;var G=a.UNSIGNED_SHORT;var L=2}else J=Uint32Array,G=a.UNSIGNED_INT,L=4;a.bufferData(a.ELEMENT_ARRAY_BUFFER,l.O instanceof J?l.O:new J(l.O),x);t=g}var K={zb:function(Q){m!==g&&(a.bindBuffer(a.ARRAY_BUFFER,C),m=g);Q&&Ka.Ia()},xb:function(){t!==g&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,F),t=g)},bind:function(Q){K.zb(Q);K.xb()},Gc:function(){a.drawElements(a.TRIANGLES,q,G,0)},Hc:function(Q,e){a.drawElements(a.TRIANGLES,Q,G,e*L)},remove:function(){a.deleteBuffer(C);
l.O&&a.deleteBuffer(F);K=null}};return K},va:function(){-1!==m&&(a.bindBuffer(a.ARRAY_BUFFER,b),m=-1);-1!==t&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d),t=-1)},i:function(l,g){l&&P.va();g&&Ka.Ja();a.drawElements(a.TRIANGLES,3,a.UNSIGNED_SHORT,0)},Pb:function(){a.deleteBuffer(b);a.deleteBuffer(d)}};return A}(),M=function(){var b,d,h,m=!1,t={A:-2,Nb:1};return{m:function(){if(!m){b=a.createFramebuffer();var k=Na.s();d=k&&a.DRAW_FRAMEBUFFER?a.DRAW_FRAMEBUFFER:a.FRAMEBUFFER;h=k&&a.READ_FRAMEBUFFER?a.READ_FRAMEBUFFER:
a.FRAMEBUFFER;m=!0}},Sc:function(){return d},Aa:function(){return h},T:function(){return a.FRAMEBUFFER},Uc:function(){return t},Kc:function(){return b},a:function(k){void 0===k.cb&&(k.cb=!1);var A=k.X?k.X:!1,l=k.width,g=void 0!==k.height?k.height:k.width,q=b,x=!1,C=!1,F=0;A&&(l=l?l:A.B(),g=g?g:A.L());var J={qb:function(){C||(q=a.createFramebuffer(),C=!0,F=t.Nb++)},ub:function(){J.qb();J.l();x=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,x);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,
l,g);a.framebufferRenderbuffer(d,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,x);a.clearDepth(1)},bind:function(G,L){F!==t.A&&(a.bindFramebuffer(d,q),t.A=F);A&&A.l();L&&a.viewport(0,0,l,g);G&&a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},zc:function(){F!==t.A&&(a.bindFramebuffer(d,q),t.A=F)},clear:function(){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},Cc:function(){a.clear(a.COLOR_BUFFER_BIT)},Dc:function(){a.clear(a.DEPTH_BUFFER_BIT)},sc:function(){a.viewport(0,0,l,g)},l:function(){F!==t.A&&(a.bindFramebuffer(d,
q),t.A=F)},rtt:function(G){A=G;t.A!==F&&(a.bindFramebuffer(a.FRAMEBUFFER,q),t.A=F);G.l()},J:function(){a.bindFramebuffer(d,null);t.A=-1},resize:function(G,L){l=G;g=L;x&&(a.bindRenderbuffer(a.RENDERBUFFER,x),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,l,g))},remove:function(){a.bindFramebuffer(d,q);a.framebufferTexture2D(d,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0);x&&a.framebufferRenderbuffer(d,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,null);a.bindFramebuffer(d,null);a.deleteFramebuffer(q);x&&
a.deleteRenderbuffer(x);J=null}};k.cb&&J.ub();return J},J:function(){a.bindFramebuffer(d,null);t.A=-1},vc:function(){a.bindFramebuffer(d,null);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);a.viewport(0,0,Na.B(),Na.L());t.A=-1},reset:function(){t.A=-2},N:function(){0!==t.A&&(a.bindFramebuffer(d,b),t.A=0)},clear:function(){a.viewport(0,0,Na.B(),Na.L());a.clear(a.COLOR_BUFFER_BIT)}}}(),Z=function(){function b(c){a.bindTexture(a.TEXTURE_2D,c)}function d(c){Aa[0]=c;c=Ba[0];var E=c>>16&32768,I=c>>12&2047,
R=c>>23&255;return 103>R?E:142<R?E|31744|((255==R?0:1)&&c&8388607):113>R?(I|=2048,E|(I>>114-R)+(I>>113-R&1)):E=(E|R-112<<10|I>>1)+(I&1)}function h(c){var E=new Uint16Array(c.length);c.forEach(function(I,R){E[R]=d(I)});return E}function m(){if(null!==ra.Ba)return ra.Ba;var c=k(h([1,1,1,1]));return null===c?!0:ra.Ba=c}function t(){if(null!==ra.Ca)return ra.Ca;var c=k(new Uint8Array([255,255,255,255]));return null===c?!0:ra.Ca=c}function k(c){if(!Ka.Da()||!G)return null;c=W.a({isFloat:!1,G:!0,array:c,
width:1});M.J();a.viewport(0,0,1,1);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);Ka.set("s0");c.Ra(0);P.i(!1,!0);var E=new Uint8Array(4);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,E);E=.9<E[0];c.remove();M.N();return E}var A=0,l,g=0,q,x=!1,C,F,J,G=!1,L=!1,K,Q,e,r=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],B=!1,aa=!1,Aa=new Float32Array(1),Ba=new Int32Array(Aa.buffer),ra={Ba:null,Ca:null},W={m:function(){if(!G){F=[a.RGB,!1,a.RGB,a.RGBA];J=[a.RGB,!1,a.RGB,a.RGBA];l=[a.TEXTURE0,a.TEXTURE1,a.TEXTURE2,
a.TEXTURE3,a.TEXTURE4,a.TEXTURE5,a.TEXTURE6,a.TEXTURE7];B="undefined"!==typeof JEContext;aa="undefined"!==typeof Na;B&&JEContext.ed()&&l.push(a.TEXTURE8,a.TEXTURE9);q=[-1,-1,-1,-1,-1,-1,-1,-1];C=[a.UNSIGNED_BYTE,a.FLOAT,a.FLOAT];if(!x){for(var c=new Float32Array(16384),E=0;16384>E;++E)c[E]=2*Math.random()-1;x={random:W.a({isFloat:!0,isPot:!0,array:c,width:64}),sb:W.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}G=!0}},Yb:function(){W.xc()},Xc:function(){return x.sb},xc:function(){C[1]=
Na.ia()},oc:function(){J=F=[a.RGBA,a.RGBA,a.RGBA,a.RGBA]},gd:function(c,E){y.set("s1");M.J();var I=c.B(),R=c.L();a.viewport(0,0,I,R);c.b(0);P.i(!1,!1);a.readPixels(0,0,I,R,a.RGBA,a.UNSIGNED_BYTE,E)},Ob:function(c,E,I){a.activeTexture(a.TEXTURE0);A=0;var R=a.createTexture();b(R);var U=Na.s()&&a.RGBA32F?a.RGBA32F:a.FLOAT;E=E instanceof Float32Array?E:new Float32Array(E);var X=Math.log(E.length)/Math.log(2);X!==Math.floor(X)&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,I);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,c.B(),c.L(),0,a.RGBA,U,E);b(null);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);M.N();y.set("s0");c.H();a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);b(R);P.i(!0,!1);a.deleteTexture(R)},a:function(c){function E(){b(ba);va&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,va);c.isPot?(a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_S,c.gb?a.MIRRORED_REPEAT:a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,c.P?a.MIRRORED_REPEAT:a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));c.la&&"undefined"!==typeof JESETTINGS&&a.texParameterf(a.TEXTURE_2D,JEContext.Rc().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.yc);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,c.isLinear?a.LINEAR:a.NEAREST);c.isLinear?a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MIN_FILTER,c.isMipmap&&!xa?a.NEAREST_MIPMAP_LINEAR:a.LINEAR):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,c.isMipmap&&!xa?a.NEAREST_MIPMAP_NEAREST:a.NEAREST);ka=F[c.ea-1];da=J[c.ea-1];ha=C[I];if(Na.s()){var u=a.RGBA32F;ka===a.RGBA&&ha===a.FLOAT&&u&&(da=u);ka===a.RGB&&ha===a.FLOAT&&u&&(da=u,ka=a.RGBA)}if(c.G&&!c.isFloat||c.isFloat&&c.isMipmap&&La.ac())(u=a.RGBA16F)&&(da=u),ha=Na.ia();c.jb&&"undefined"!==typeof a.texStorage2D&&(pa=c.jb);c.hb&&4===c.ea&&(ka=JEContext.Vc());if(c.v)a.texImage2D(a.TEXTURE_2D,
0,da,ka,ha,c.v);else if(c.url)a.texImage2D(a.TEXTURE_2D,0,da,ka,ha,la);else if(Y){try{a.getError(),a.texImage2D(a.TEXTURE_2D,0,da,w,z,0,ka,ha,Y),a.getError()!==a.NO_ERROR&&(a.texImage2D(a.TEXTURE_2D,0,da,w,z,0,ka,ha,null),a.getError()!==a.NO_ERROR&&a.texImage2D(a.TEXTURE_2D,0,a.RGBA,w,z,0,a.RGBA,a.UNSIGNED_BYTE,null))}catch(f){a.texImage2D(a.TEXTURE_2D,0,da,w,z,0,ka,ha,null)}c.isKeepArray||(Y=null)}else a.texImage2D(a.TEXTURE_2D,0,da,w,z,0,ka,ha,null);if(c.isMipmap)if(!xa&&V)V.za(),Ea=!0;else if(xa){u=
Math.log(Math.min(w,z))/Math.log(2);var S;Ca=Array(1+u);Ca[0]=ba;for(S=1;S<=u;++S){var sa=Math.pow(2,S);var ya=w/sa;sa=z/sa;var ia=a.createTexture();b(ia);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,da,ya,sa,0,ka,ha,null);b(null);Ca[S]=ia}Ea=!0}b(null);q[A]=-1;va&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);N=!0;n&&V&&(n(V),n=!1)}"undefined"===typeof c.isFloat&&(c.isFloat=!1);"undefined"===typeof c.G&&
(c.G=!1);"undefined"===typeof c.isPot&&(c.isPot=!0);"undefined"===typeof c.isLinear&&(c.isLinear=!1);"undefined"===typeof c.isMipmap&&(c.isMipmap=!1);"undefined"===typeof c.wa&&(c.wa=!1);void 0===c.la&&(c.la=!1);void 0===c.P&&(c.P=!1);void 0===c.gb&&(c.gb=!1);void 0===c.hb&&(c.hb=!1);void 0===c.ea&&(c.ea=4);void 0===c.fb&&(c.fb=!1);"undefined"===typeof c.isFlipY&&(c.isFlipY=c.url||c.array?!0:!1);"undefined"===typeof c.isKeepArray&&(c.isKeepArray=!1);c.data&&(c.array="string"===typeof c.data?Ja(c.data):
c.isFloat?new Float32Array(c.data):new Uint8Array(c.data),c.isFlipY=!1);var I=0,R=c.v?!0:!1,U=null,X=null,ea=!1,ma=null;c.isFloat&&(c.G=!0);c.G&&(I=1);c.fb||Na.s()||!c.isFloat||!aa||Na.Ta()||(c.isFloat=!1);c.isFloat&&(I=2);c.la&&B&&!JEContext.$c()&&(c.la=!1);var ba=a.createTexture(),n=c.wa,la=null,Y=!1,w=0,z=0,N=!1,fa=g++,na=!1,ca,za,Da,O,da,ka,ha,va=c.isFlipY,xa=c.G&&c.isMipmap&&"undefined"!==typeof La&&!La.Cb()?!0:!1,Ca,pa=-1,Ea=!1;"undefined"!==typeof c.width&&c.width&&(w=c.width,z="undefined"!==
typeof c.height&&c.height?c.height:w);var V={get:function(){return ba},B:function(){return w},L:function(){return z},Yc:function(){return c.url},ad:function(){return c.isFloat},cd:function(){return c.G},dd:function(){return c.isLinear},za:function(){a.generateMipmap(a.TEXTURE_2D)},Sa:function(u,S){xa?(u||(u=V.$a()),V.ta(S),b(Ca[u]),q[S]=-1):V.b(S)},$a:function(){-1===pa&&(pa=Math.log(w)/Math.log(2));return pa},Za:function(u){if(xa){u||(u=V.$a());y.set("s11");V.ta(0);var S,sa=w,ya=z;for(S=1;S<=u;++S)sa/=
2,ya/=2,y.M("u7",.25/sa,.25/ya),a.viewport(0,0,sa,ya),b(Ca[S-1]),a.framebufferTexture2D(M.T(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,Ca[S],0),P.i(!1,1===S);q[0]=-1}else V.za()},ta:function(u){u!==A&&(a.activeTexture(l[u]),A=u)},b:function(u){if(!N)return!1;V.ta(u);if(q[u]===fa)return!1;b(ba);q[u]=fa;return!0},Ra:function(u){a.activeTexture(l[u]);A=u;b(ba);q[u]=fa},l:function(){a.framebufferTexture2D(M.T(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ba,0)},H:function(){a.viewport(0,0,w,z);a.framebufferTexture2D(M.T(),
a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ba,0)},td:function(){a.framebufferTexture2D(M.T(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0)},resize:function(u,S){w=u;z=S;E()},clone:function(u){u=W.a({width:w,height:z,G:c.G,isFloat:c.isFloat,isLinear:c.isLinear,P:c.P,isFlipY:u?!va:va,isPot:c.isPot});Ka.set("s0");M.N();u.l();a.viewport(0,0,w,z);V.b(0);P.i(!0,!0);return u},sc:function(){a.viewport(0,0,w,z)},remove:function(){a.deleteTexture(ba);V=null},refresh:function(){V.Ra(0);va&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,
!0);R?a.texImage2D(a.TEXTURE_2D,0,da,ka,a.UNSIGNED_BYTE,c.v):a.texImage2D(a.TEXTURE_2D,0,da,w,z,0,ka,ha,Y);va&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},Va:function(){var u=w*z*4;za=[new Uint8Array(u),new Uint8Array(u),new Uint8Array(u),new Uint8Array(u)];ca=[new Float32Array(za[0].buffer),new Float32Array(za[1].buffer),new Float32Array(za[2].buffer),new Float32Array(za[3].buffer)];Da=new Uint8Array(4*u);O=new Float32Array(Da.buffer);na=!0},ob:function(){na||V.Va();a.readPixels(0,0,w,4*z,a.RGBA,a.UNSIGNED_BYTE,
Da);var u,S=w*z,sa=2*S,ya=3*S;for(u=0;u<S;++u)ca[0][u]=O[u],ca[1][u]=O[u+S],ca[2][u]=O[u+sa],ca[3][u]=O[u+ya];return ca},Wa:function(){M.J();y.set("s12");V.b(0);for(var u=0;4>u;++u)a.viewport(0,z*u,w,z),y.pa("u8",r[u]),P.i(!1,0===u)},wc:function(u){var S=ha===C[0]&&!t();b(ba);va&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,va);S?(ea||(U=document.createElement("canvas"),U.width=w,U.height=z,X=U.getContext("2d"),ma=X.createImageData(w,z),ea=!0),ma.data.set(u),X.putImageData(ma,0,0),a.texImage2D(a.TEXTURE_2D,
0,da,ka,ha,U)):a.texImage2D(a.TEXTURE_2D,0,da,w,z,0,ka,ha,u);q[A]=fa;va&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},ud:function(u,S){b(ba);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,S);a.texImage2D(a.TEXTURE_2D,0,da,ka,ha,u);q[A]=fa;S&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},jd:function(u,S){var sa=w*z,ya=4*sa;u=c.G?u?"RGBE":"JSON":"RGBA";S&&(u=S);S=Na.s()&&!1;switch(u){case "RGBE":var ia="s41";break;case "JSON":ia=S?"s0":"s12";break;case "RGBA":case "RGBAARRAY":ia="s6"}na||("RGBA"===u||"RGBE"===u||"RGBAARRAY"===
u?(za=new Uint8Array(ya),na=!0):"JSON"!==u||S||V.Va());M.J();y.set(ia);V.b(0);if("RGBA"===u||"RGBE"===u||"RGBAARRAY"===u){a.viewport(0,0,w,z);P.i(!0,!0);a.readPixels(0,0,w,z,a.RGBA,a.UNSIGNED_BYTE,za);if("RGBAARRAY"===u)return{data:za};L||(K=document.createElement("canvas"),Q=K.getContext("2d"),L=!0);K.width=w;K.height=z;e=Q.createImageData(w,z);e.data.set(za);Q.putImageData(e,0,0);var f=K.toDataURL("image/png")}else if("JSON"===u)if(S)f=new Float32Array(sa),a.viewport(0,0,w,z),P.i(!0,!0),a.readPixels(0,
0,w,z,a.RGBA,a.FLOAT,f);else{for(f=0;4>f;++f)a.viewport(0,z*f,w,z),y.pa("u8",r[f]),P.i(!f,!f);V.ob();f=Array(sa);for(ia=0;ia<sa;++ia)f[4*ia]=ca[0][ia],f[4*ia+1]=ca[1][ia],f[4*ia+2]=ca[2][ia],f[4*ia+3]=ca[3][ia]}return{format:u,data:f,width:w,height:z,isMirrorY:c.P,isFlipY:"RGBA"===u?c.isFlipY:!c.isFlipY}}};c.isMipmap&&!xa&&N&&!Ea&&(V.za(),Ea=!0);if(c.url)b(ba),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,null),la=new Image,la.Fc="Anonymous",la.crossOrigin="Anonymous",la.src=c.url,
la.onload=function(){w=la.width;z=la.height;E()};else if(c.v){var Fa=function(){w=void 0!==c.v.videoWidth?c.v.videoWidth:c.v.width;z=void 0!==c.v.videoHeight?c.v.videoHeight:c.v.height;w?E():setTimeout(Fa,1)};Fa()}else c.array?(c.G&&!c.isFloat?c.array instanceof Uint16Array?(Y=c.array,E()):m()?(Y=h(c.array),E()):(E(),W.Ob(V,c.array,va)):(Y=c.isFloat?c.array instanceof Float32Array?c.array:new Float32Array(c.array):c.array instanceof Uint8Array?c.array:new Uint8Array(c.array),E()),c.isKeepArray||(Y&&
Y!==c.array&&(Y=null),delete c.array)):E();V.Vb=V.B;n&&N&&(n(V),n=!1);return V},J:function(c){c!==A&&(a.activeTexture(l[c]),A=c);q[c]=-1;b(null)},Ac:function(c){x.random.b(c)},reset:function(){for(var c=0;c<l.length;++c)q[c]=-1;A=-1},hd:function(){A=-1},rd:function(){for(var c=0;c<l.length;++c)W.J(c)},Pb:function(){x&&(x.random.remove(),x.sb.remove())},sd:function(c,E){if("RGBA"===c.format||"RGBE"===c.format){var I=new Image;I.src=c.data;I.onload=function(){W.a({P:c.isMirrorY,isFlipY:c.isFlipY,isFloat:!1,
v:I,wa:function(R){if("RGBA"===c.format)E(R);else{var U=c.width,X=c.height,ea=W.a({P:c.isMirrorY,isFloat:!0,width:U,height:X,isFlipY:c.isFlipY});M.N();a.viewport(0,0,U,X);y.set("s42");ea.l();R.b(0);P.i(!0,!0);W.J(0);E(ea);a.flush();setTimeout(R.remove,50)}}})}}else"JSON"===c.format?E(W.a({isFloat:!0,isFlipY:c.isFlipY,width:c.width,height:c.height,array:new Float32Array(c.data)})):E(!1)}};return W}(),Na=function(){function b(){d="undefined"===typeof Oa?JEContext:Oa;h=!0}var d,h=!1,m=!1,t=!1,k=!1,A=
!1,l=!1,g=!1,q=!1,x=!1,C=!1,F=!1,J=!0,G=!0,L=!0,K=!1,Q="undefined"===typeof window?{}:window,e={m:function(){if(h)return!0;b();e.Ya();e.ya();e.Kb();e.Lb();M.m();Z.m();if(!e.Fb())return!1;P.m();Z.Yb();return!0},B:function(){h||b();return d.B()},L:function(){h||b();return d.L()},s:function(){h||b();return d.s()},Kb:function(){F=(C=a.getExtension("EXT_color_buffer_float")||a.getExtension("WEBGL_color_buffer_float")||a.getExtension("OES_color_buffer_float"))?!0:!1;Q.GL_EXT_COLORBUFFERFLOAT=C},Lb:function(){a.getExtension("EXT_color_buffer_half_float")||
a.getExtension("WEBGL_color_buffer_half_float")||a.getExtension("OES_color_buffer_half_float")},Ya:function(){if(!m){this.s()||(t=a.getExtension("OES_texture_float")||a.getExtension("MOZ_OES_texture_float")||a.getExtension("WEBKIT_OES_texture_float"),A=(Q.GL_EXT_FLOAT=t)?!0:!1);if(A||this.s())k=a.getExtension("OES_texture_float_linear")||a.getExtension("MOZ_OES_texture_float_linear")||a.getExtension("WEBKIT_OES_texture_float_linear"),Q.GL_EXT_FLOATLINEAR=k;m=!0}},ya:function(){if(!x){if(!this.s()){if(l=
a.getExtension("OES_texture_half_float")||a.getExtension("MOZ_OES_texture_half_float")||a.getExtension("WEBKIT_OES_texture_half_float"))K=l.HALF_FLOAT_OES,g=!0;!K&&a.HALF_FLOAT&&(K=a.HALF_FLOAT);!K&&a.FLOAT&&(K=a.FLOAT);Q.GL_EXT_HALFFLOAT=l}if(g||this.s())q=a.getExtension("OES_texture_half_float_linear")||a.getExtension("MOZ_OES_texture_half_float_linear")||a.getExtension("WEBKIT_OES_texture_half_float_linear"),Q.GL_EXT_HALFFLOATLINEAR=q;x=!0}},ia:function(){if(e.s())return a.HALF_FLOAT;e.ya();return g?
K:a.FLOAT},Ta:function(){return J},Bb:function(){return G},Bc:function(){return L},Ab:function(){return F},Hb:function(){G=J=!0;var r=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,r);var B=a.createTexture();a.bindTexture(a.TEXTURE_2D,B);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,e.s()&&a.RGBA32F?a.RGBA32F:a.RGBA,1,1,0,a.RGBA,a.FLOAT,null);a.framebufferTexture2D(M.T(),a.COLOR_ATTACHMENT0,
a.TEXTURE_2D,B,0);var aa=a.checkFramebufferStatus(M.Aa());aa!==a.FRAMEBUFFER_COMPLETE&&(J=!1);a.texImage2D(a.TEXTURE_2D,0,e.s()&&a.RGBA16F?a.RGBA16F:a.RGBA,1,1,0,a.RGBA,e.ia(),null);a.framebufferTexture2D(M.T(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,B,0);aa=a.checkFramebufferStatus(M.Aa());aa!==a.FRAMEBUFFER_COMPLETE&&(G=!1);a.bindTexture(a.TEXTURE_2D,null);a.bindFramebuffer(a.FRAMEBUFFER,null);a.deleteTexture(B);a.deleteFramebuffer(r)},Gb:function(){var r=M.a({width:1});r.qb();var B=Z.a({width:1,isFloat:!0,
ea:3});r.l();B.l();a.flush();a.checkFramebufferStatus(M.Aa())!==a.FRAMEBUFFER_COMPLETE?(Z.oc(),L=!1):L=!0;r.remove();B.remove()},Fb:function(){e.Hb();if(!J&&!G)return!1;e.Gb();return!0}};return e}(),La=function(){var b=!1,d=[.8,1,.8,1],h=0,m,t=new Uint8Array(4),k=d.concat(d,d,d),A=!0,l={m:function(){function g(G,L,K,Q){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,Q?a.NEAREST_MIPMAP_NEAREST:a.LINEAR);try{var e=a.getError();e!==a.NO_ERROR&&console.log("GLERR in test_mipmapping() :",e);a.texImage2D(a.TEXTURE_2D,
0,G,2,2,0,a.RGBA,L,K);e=a.getError();if(e!==a.NO_ERROR)return!1}catch(r){return!1}Q&&a.generateMipmap(a.TEXTURE_2D);P.va();P.i(!1,!0);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,t);e=a.getError();e===a.INVALID_OPERATION&&"undefined"!==typeof a.PIXEL_PACK_BUFFER&&(a.bindBuffer(a.PIXEL_PACK_BUFFER,null),a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,t),e=a.getError());return e!==a.NO_ERROR?!1:0!==t[0]}function q(G){return Na.Ta()&&g(C,a.FLOAT,new Float32Array(k),G)?(h=3,!0):!1}function x(G){return Na.Bb()?
g(F,Na.ia(),new Uint16Array(k),G)||g(F,a.FLOAT,new Float32Array(k),G)?(h=2,!0):!1:!1}Na.Ya();Na.ya();var C=a.RGBA,F=a.RGBA;if(Oa.s()){var J=a.RGBA32F;J&&(C=J);(J=a.RGBA16F)&&(F=J)}P.m();M.reset();M.J();a.viewport(0,0,1,1);y.set("s0");b=!0;m=a.createTexture();a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,m);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);if(x(!0)||q(!0))return!0;
A=!1;if(x(!1)||q(!1))return!0;if(Oa.s()){F=C=a.RGBA;if(x(!0)||q(!0))return!0;A=!1;if(x(!1)||q(!1))return!0}return!1},Cb:function(){return A},Tc:function(){return h},bd:function(){b||l.m();return 3===h},ac:function(){b||l.m();return 2===h}};return l}(),Pa={a:function(b){var d=Z.a(b.alpha),h=Z.a(b.beta);return{Jb:function(){d.b(1);h.b(2)}}}},Sa={a:function(b){var d=b.tc;d.index=b.index;d.R=b.R;d.parent=b.parent;switch(d.type){case "input":b=Qa.a(d);break;default:b=Ra.a(d)}return b}},Qa={a:function(b){"undefined"===
typeof b.sift&&(b.sift=!1);"undefined"===typeof b.DWT&&(b.DWT=!1);"undefined"===typeof b.blur&&(b.blur=!1);"undefined"===typeof b.siftOutWidth&&(b.siftOutWidth=!1);"undefined"===typeof b.density&&(b.density=1);var d=!1;if(b.mask){d=!0;SETTINGS&&void 0!==SETTINGS.wb&&(b.mask=SETTINGS.wb+b.mask);var h=Z.a({isFloat:!1,url:b.mask})}var m=!1,t="undefined"!==typeof b.preprocessing?b.preprocessing:!1,k=!1,A=!1;b.sift?Sift.m({Xb:a,ba:!1,width:b.size,fd:b.siftOutWidth}):b.DWT&&DWT.m({Xb:a,ba:!1,width:b.size});
var l=!1;b.customInputShader&&(l="s43",y.Pa({name:"_",id:l,c:b.customInputShader,f:["uSource"],precision:"lowp"}),y.F(l,[{type:"1i",name:"_",value:0}]));switch(t){case "sobel":var g="s32";k=!0;break;case "meanNormalization":g="s33";k=!0;break;case "grayScale":g="s29";k=!1;break;case "grayScaleTilt":g="s30";A=!0;k=!1;break;case "rgbGrayTilt":g="s31";A=!0;k=!1;break;case "copy":g=l?l:"s0";break;case "inputLightRegulation":g=l?l:"s29";Ta.m({width:b.size,kb:b.nBlurPass,$b:!1});m=!0;break;case "direct":case "none":g=
!1;break;default:g="s3"}A&&y.F(g,[{name:"u28",type:"1f",value:b.tilt}]);d&&(g+="Mask");if(b.blur)var q=Z.a({isFloat:!1,isPot:!1,width:b.size});var x=Z.a({isFloat:!1,isPot:!1,width:b.size}),C={B:function(){return b.sift?Sift.da():b.size},da:function(){return C.B()},Tb:function(){return b.sift?Sift.ja():b.DWT?DWT.ja():m?Ta.ja():x},D:function(){M.N();b.blur&&(q.H(),y.set("s44"),y.M("u7",1/b.size,1/b.size),P.i(!1,!0),q.b(0));g&&(y.set(g),k&&y.I("u29",1/b.size),x.H(),d&&h.b(1),P.i(!1,!1),x.b(0),m?Ta.Ha(x):
b.sift?(y.Y(),Sift.Ha()):b.DWT&&(y.Y(),DWT.Ha(4)))}};return C}},Ra={a:function(b){"undefined"===typeof b.disableNormalize&&(b.disableNormalize=!1);var d=[],h=[],m,t,k=!1,A,l=!0,g,q,x=b.isReorganize?b.isReorganize:!1,C=b.kernelsNumber?!0:!1,F=b.dynPelu?Pa.a(b.dynPelu):!1,J=F?!0:!1,G={isEnabled:!1},L;if("softmax"===b.type){b.activation="softmax";b.size=Math.pow(2,Math.ceil(Math.log(Math.sqrt(b.num_classes))/Math.log(2)));b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.R.da();b.gain="undefined"!==
typeof b.gain?b.gain:1;y.F("s20",[{type:"1f",name:"u10",value:b.gain}]);var K=Z.a({isFloat:!0,isPot:!1,width:b.size}),Q=Z.a({isFloat:!0,isPot:!1,width:b.size,isMipmap:!0});l=!1;var e=new Uint8Array(Math.pow(4*b.size,2)),r;for(r=0;r<b.size*b.size;++r){var B=r<b.num_classes?255:0;e[4*r]=B;e[4*r+1]=B;e[4*r+2]=B;e[4*r+3]=B}var aa=Z.a({isFloat:!1,isPot:!1,width:b.size,array:e})}else b.cost?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.R.da(),l=!1):"full"===b.connectivityUp&&(b.sparsity=b.R.da());
var Aa={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",softmax:"s20",dynPelu:"s17"}[b.activation],Ba=b.sparsity*b.sparsity,ra=!1,W=b.size;if(b.maxPooling){switch(b.maxPooling.size){case 2:var c="s34";break;case 4:c="s35"}ra=!0;W/=b.maxPooling.size;var E=Z.a({isFloat:!0,isPot:!1,width:W})}var I=void 0!==b.hc&&b.hc?!0:!1,R=null,U=null,X=null;I&&(R="s45"+b.index.toString(),y.bb("s45",R,[((b.normalization.n-1)/2).toFixed(1)]),y.F(R,[{type:"1i",name:"u1",value:0},
{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},{type:"1f",name:"u33",value:b.normalization.k}]),U=Z.a({isFloat:!0,isPot:!0,width:b.size}),X=Z.a({isFloat:!0,isPot:!0,width:b.size}));var ea,ma,ba,n;l&&(n=Z.a({isFloat:!0,isPot:!1,width:b.size}));var la=Z.a(b.bias),Y,w={B:function(){return b.size},da:function(){return W},ab:function(){return b.num_classes},yb:function(z){L.b(z)},kc:function(){b.remap&&
b.remap.isEnabled&&(G={isEnabled:!0,cc:Z.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),layers:b.remap.layers.map(function(z){return b.parent.Sb(z)}),depth:b.remap.depth})},qc:function(){switch(b.connectivityUp){case "gaussian":Y=Ua.a(b.connectivity);break;case "direct":Y=Va.a(b.connectivity);break;case "square":Y=Wa.a(b.connectivity);break;case "squareFast":Y=Xa.a(b.connectivity,b.activation);break;case "full":Y=Ya.a(b.connectivity);
break;case "conv":q=b.kernelsNumber,Y=Za.a(b.connectivity),x&&(g=Z.a({width:W,isFloat:!0,isFlipY:!1,isPot:!1}))}if(Y.S){var z=b.size*b.sparsity;ma=Math.log(z/b.size)/Math.log(2);ea=Z.a({isMipmap:!0,isFloat:!0,isPot:!0,width:z,jb:ma});ba=Z.a({isFloat:!0,isPot:!0,width:b.size})}},D:function(z,N){L=z;Y.S?(ea.H(),C&&la.b(2),Y.D(G),ea.b(0),ea.Za(ma),ba.H(),C?y.set("s0"):(y.set("s28"),y.I("u27",Ba),la.b(1)),ea.Sa(ma,0),P.i(!1,!1),y.set(Aa),I?U.l():n.l(),ba.b(0),J&&F.Jb(),P.i(!1,!1)):(n.H(),la.b(1),Y.D());
I&&(y.set(R),X.l(),U.b(0),P.i(!1,!1),y.set("s46"),y.I("u6",1),n.l(),X.b(1),P.i(!1,!1));if(l)return ra?(E.H(),n.b(0),y.set(c),y.M("u7",1/b.size,1/b.size),P.i(!1,!1),N=E):N=n,N.b(0),x&&(g.l(),y.set("s22"),y.M("u14",q,W/q),P.i(!1,!1),N=g,g.b(0)),N;if("softmax"===b.type){y.set("s20");n.b(0);K.l();P.i(!1,!1);b.disableNormalize?z=K:(y.set("s2"),K.b(0),aa.b(1),Q.l(),P.i(!1,!1),y.set("s0"),t.H(),Q.b(0),Q.Za(!1),P.i(!1,!1),y.set("s21"),m.H(),Q.Sa(!1,0),y.I("u12",n.Vb()),t.b(1),P.i(!1,!1),z=m);if(N){switch(k){case "cpuRGBAAvg":break;
default:var fa=w.nb(z)}return fa}return!1}if(b.cost){y.set("gpuRawAvg"===k?"s8":"s7");N=n;b.disableNormalize||(y.I("u4",1/b.size),m.H(),n.b(0),P.i(!1,!1),N=m);switch(k){case "cpuRGBA2Float":N.Wa();fa=w.nb(N);A(fa);break;case "gpuRawAvg":case "gpuRaw":N.b(0),A(N)}return!1}},Db:function(z){z&&"undefined"!==typeof z.mb&&(k=z.mb,A=z.jc);n=Z.a({isFloat:!0,isPot:!0,isMipmap:"softmax"===b.type,width:b.size});"softmax"===b.type&&(t=Z.a({isFloat:!0,isPot:!0,width:1}));var N=0,fa=0,na="undefined"!==typeof b.num_classes&&
b.num_classes?b.num_classes:b.size*b.size;for(z=0;z<na;++z)d.push(N+(b.size-1-fa)*b.size),h.push([-1,-1,-1,-1]),++N,N===b.size&&(N=0,++fa);b.disableNormalize||(m=Z.a({isFloat:!0,isPot:!0,width:b.size}))},nb:function(z){z.Wa();var N=z.ob();d.forEach(function(fa,na){h[na][0]=N[0][fa];h[na][1]=N[1][fa];h[na][2]=N[2][fa];h[na][3]=N[3][fa]});return h}};b.R&&w.qc(b.R);return w}};
function $a(){var b,d,h,m;b||(b={});this.Sb=function(t){return d[t]};this.nc=function(t){var k=!1;d=t.map(function(A,l){return k=A=Sa.a({index:l,parent:this,tc:A,R:k})});h=d[0];m=d[d.length-1];d.forEach(function(A,l){0!==l&&A.kc()})};this.D=function(t,k){var A=k;d.forEach(function(l){A=l.D(A,t)});return A};this.Rb=function(){return h.B()};this.Ub=function(){return m.B()};this.ja=function(){return m.Tb()};this.pc=function(t){m.Db(t)};this.ab=function(){return m.ab()}}
var Va={a:function(b){var d=Z.a(b.weights);delete b.weights.data;return{S:!0,ca:function(){return 1},Wb:function(){return d},D:function(){y.set("s27");d.b(1);P.i(!1,!1)}}}},Ya={a:function(b){var d=b.fromLayerSize,h=Z.a(b.weights);return{S:!0,ca:function(){return d},D:function(m){if(m.isEnabled){y.set("s25");m.cc.b(3);var t,k=Math.min(m.layers.length,m.depth);for(t=0;t<k;++t)m.layers[t].yb(4+t)}else y.set("s24");y.I("u18",b.toLayerSize);h.b(1);P.i(!1,!1)}}}},Ua={a:function(b){var d=b.toSparsity*b.toLayerSize,
h=d/b.fromLayerSize,m=Z.a(b.weights);Z.a({width:d,isFloat:!0,array:new Float32Array(b.fromBindings),isPot:!0});var t=Z.a({width:d,isFloat:!0,array:new Float32Array(b.toBindings),isPot:!0});return{S:!0,ca:function(){return h},D:function(){y.set("s23");m.b(1);t.b(2);P.i(!1,!0)}}}},Wa={a:function(b){var d=b.fromLayerSize,h=b.toLayerSize,m=b.toSparsity,t=m*h,k=t/d,A=d/h,l,g,q,x,C=0,F=0,J=0,G=Array(m*h*m*h*4),L=Array(m*h*m*h*4),K=Array(d*d);for(l=0;l<K.length;++l)K[l]=0;var Q=Math.floor(m/2),e=.5/h,r=
.5/d,B=.5/t;for(l=0;l<h;++l)for(g=0;g<h;++g){var aa=Math.round(l*A);var Aa=Math.round(g*A);var Ba=l/h;var ra=g/h;Ba+=e;ra+=e;for(q=0;q<m;++q)for(x=0;x<m;++x){var W=C/t;var c=F/t;var E=aa+q-Q;var I=Aa+x-Q;0>E&&(E+=d);0>I&&(I+=d);E>=d&&(E-=d);I>=d&&(I-=d);var R=E/d;var U=I/d;c=1-c-1/t;R+=r;U+=r;W+=B;c+=B;var X=l*m+q,ea=g*m+x;ea=h*m-ea-1;X=ea*h*m+X;G[4*X]=W;G[4*X+1]=c;G[4*X+2]=R;G[4*X+3]=U;R=K[I*d+E]++;U=R%k;E=E*k+U;I=I*k+(R-U)/k;I=d*k-1-I;I=I*d*k+E;L[4*I]=W;L[4*I+1]=c;L[4*I+2]=Ba;L[4*I+3]=ra;++C>=t&&
(C=0,++F);++J}}var ma=Z.a(b.weights);Z.a({width:t,isFloat:!0,array:new Float32Array(L),isPot:!0});L=null;var ba=Z.a({width:t,isFloat:!0,array:new Float32Array(G),isPot:!0});G=null;return{S:!0,ca:function(){return k},D:function(){y.set("s23");ma.b(1);ba.b(2);P.i(!1,!1)}}}},Za={a:function(b){var d=b.kernelsNumber,h=b.toSparsity,m=h*b.toLayerSize/b.fromLayerSize,t=Z.a(b.weights);return{S:!0,ca:function(){return m},Wc:function(){return h},Wb:function(){return t},D:function(){y.set("s26");y.I("u24",d);
y.I("u25",h);y.I("u18",b.toLayerSize);y.I("u26",b.fromLayerSize);t.b(1);P.i(!1,!1)}}}},Xa={a:function(b,d){var h=b.fromLayerSize,m=b.toLayerSize,t=b.toSparsity,k=b.stride?b.stride:1,A=t*m/h,l=m<h,g=h/m,q=Z.a(b.weights),x="s47"+[h.toString(),m.toString(),t.toString(),k.toString(),d].join("_");y.Mb(x)||(b=Ga(d),m=[{type:"1f",name:"u18",value:m},{type:"1f",name:"u32",value:k}],l&&m.push({type:"1f",name:"u26",value:h}),h=[(l?A:t).toFixed(1),b],l&&h.push(g.toFixed(1)),y.bb(l?"s40":"s39",x,h),y.F(x,m.concat([{type:"1i",
name:"u16",value:0},{type:"1i",name:"u23",value:1},{type:"1i",name:"u15",value:3}])));return{S:!1,ca:function(){return A},D:function(){y.set(x);q.b(3);P.i(!1,!1)}}}},Ta=function(){var b,d,h,m,t,k,A,l,g;return{m:function(q){b=q.kb?q.kb:3;d=q.width?q.width:64;m=q.$b?!0:!1;q={isFloat:!1,width:d,isPot:!1,isFlipY:!1};t=Z.a(q);k=Z.a(q);A=Z.a(q);l=Z.a(q);g=Z.a({isFloat:!0,width:d,isPot:!1,isFlipY:!1});h=1/d},Ha:function(q){y.set("s37");for(var x=0;x<b;++x)t.l(),y.M("u7",h,0),P.i(m,!1),k.l(),t.b(0),y.M("u7",
0,h),P.i(m,!1),k.b(0);y.set("s36");l.l();q.b(0);P.i(m);y.set("s37");for(x=0;x<b;++x)A.l(),l.b(0),y.M("u7",h,0),P.i(m,!1),l.l(),A.b(0),y.M("u7",0,h),P.i(m,!1);y.set("s38");g.l();q.b(0);k.b(1);l.b(2);P.i(m,!1);g.b(0)},ja:function(){return g}}}();
window.JEEARAPI=function(){var b,d,h;function m(f,v){for(var D in f)"undefined"!==typeof v[D]&&(f[D]=v[D])}function t(f){if(f){var v=f.w,D=f.h;n.u.aa[0]=-1+2*(f.x+v/2)/n.W;n.u.aa[1]=-1+2*(f.y+D/2)/n.V;n.u.scale[0]=v/n.W;n.u.scale[1]=D/n.V}else n.u.aa[0]=0,n.u.aa[1]=0,n.u.scale[0]=1,n.u.scale[1]=1;n.width=n.W*n.u.scale[0];n.height=n.V*n.u.scale[1]}function k(){var f=[{type:"2f",name:"u34",value:n.u.aa},{type:"2f",name:"u35",value:n.u.scale}];y.F("s49",f.concat([{type:"1f",name:"u36",value:n.W/n.V}]));
y.F("s50",f)}function A(f,v,D){var H=g(f,v,"dx")*n.U[0],T=g(f,v,"dy")*n.U[1];f=D[2]*g(f,v,"ds");if(ea){v=Math.cos(ma);var ta=Math.sin(ma),ua=-ta*H+v*T;H=v*H+ta*T;T=ua}H*=D[0];T*=D[1];D=w.j[2];v=w.j[3];w.j[0]-=H*D*aa[0];w.j[1]-=T*v*aa[1];w.j[2]-=f*D*aa[2];w.j[2]=Math.min(Math.max(w.j[2],r.pb[0]*n.U[0]),r.pb[1]*n.U[0]);w.j[0]=Math.min(Math.max(w.j[0],0),1);w.j[3]=w.j[2]*n.aspectRatio/n.ka;w.j[1]=Math.min(Math.max(w.j[1],0),1)}function l(f){var v=w.j[2],D=w.j[3],H=(2*Math.random()-1)*f,T=(2*Math.random()-
1)*f;w.j[0]+=(2*Math.random()-1)*f*v;w.j[1]+=H*D;w.j[2]+=T*v;w.j[3]=w.j[2]*n.aspectRatio/n.ka}function g(f,v,D){v=na[v].ib[D];return(f[v][0]+f[v][1]+f[v][2]+f[v][3])/4}function q(f,v,D,H){v=na[v].ib[D];return(f[v][0]+f[v][1]+f[v][2]+f[v][3])/4*(1-H)+H*Math.min(f[v][0],f[v][1],f[v][2],f[v][3])}function x(f,v,D){var H=q(f,v,"here",D);f=sa*q(f,v,"notHere",D);return(H-f)/na[v].Ma}function C(){ma=0;ea&&null!==ba&&(ma=ba[0]+Math.random()*(ba[1]-ba[0]));N=z.Z;var f=la[Y];f&&(w.j[0]=f[0],w.j[1]=f[1],w.j[2]=
f[2],w.j[3]=f[3]);Y=(Y+1)%la.length}function F(f,v){ra&&(pa.roll=ea?ma:c);W&&(pa.pitch=E);pa.label=na[O.C].label;pa.distance=na[O.C].Ib;pa.positionScale[0]=.5+(w.j[0]-.5)/n.u.scale[0];pa.positionScale[1]=.5+(w.j[1]-.5)/n.u.scale[1];pa.positionScale[2]=w.j[2];pa.positionScale[3]=w.j[3];pa.detectScore=v;pa.yaw=f}function J(f){var v=-1,D=-1E12;-1!==[z.Z,z.ra].indexOf(N)&&na.forEach(function(oa,qa){oa=x(f,qa,0);oa>D&&(D=oa,v=qa)});switch(N){case z.Z:N=z.ra;A(f,v,[1,1,1]);h=0;break;case z.ra:++h;D>Ea?
(Fa?(N=z.ga_,Da=v,O.C=v,O.Ga=0):(N=z.Oa,za=0,Da=v),A(f,Da,[1,1,1])):h>r.ec?C():A(f,v,[1,1,1]);break;case z.Oa:++za>r.gc&&(N=z.ga_,O.n=0,O.lb=0,O.qa=0,O.C=Da,O.K[0]=0,O.K[1]=0);A(f,Da,[1,1,1]);l(r.bc);break;case z.ga_:if(Fa||++O.n>r.ma){var H=x(f,O.C,0);if(Fa||H>Ea+r.uc||u){ra&&(c=Aa*g(f,O.C,"roll"),ea&&(ma+=c));if(I){var T=Fa||u?Math.PI*g(f,O.C,"yaw"):Math.atan2(O.K[1],O.K[0]);if(W){var ta=.5+.5*g(f,O.C,"pitch");E=Ba[0]+(Ba[1]-Ba[0])*ta}F(T,H)}u?(A(f,O.C,S),H>V?O.Ga=0:++O.Ga>r.dc&&C()):I&&C()}else C()}else{A(f,
O.C,[1,1,1]);var ua=1-(r.ma-O.n)/r.ma;l(r.Ua*(1-ua));var wa=x(f,O.C,ua);O.qa+=wa;++O.lb>10*r.ma?C():na.some(function(oa,qa){return O.C===qa?!1:x(f,qa,ua)>wa*(ya*ua+(1-ua))?!0:!1})?(l(2*r.Ua),ma+=10*(2*Math.random()-1)*Math.PI/180,O.n=0,O.qa=0,O.K[0]=0,O.K[1]=0):(H=Math.PI*g(f,O.C,"yaw"),O.K[0]+=Math.cos(H),O.K[1]+=Math.sin(H))}}}function G(){y.vb([{id:"s49",name:"_",fa:"attribute vec2 a0;uniform vec4 u37;uniform vec2 u34,u35;uniform float u38,u36;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.);float a=u36*(u37.z/u37.w);a*=u35.x/u35.y;float b=cos(u38),c=sin(u38);vec2 d=mat2(b,-c*a,c/a,b)*a0,f=u34+d*u35;vv0=u37.xy+.5*u37.zw*f;}",
c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:"u1 u37 u35 u34 u38 u36".split(" "),precision:"lowp"},{id:"s51",name:"_",fa:"attribute vec2 a0;uniform vec4 u37;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u37.xy+.5*u37.zw*a0;}",c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec3 g=vec3(1.,1.,1.);float c[5];void main(){c[0]=texture2D(u1,vv0-u7*vec2(-1.,0.)).r,c[1]=texture2D(u1,vv0-u7*vec2(0.,-1.)).r,c[2]=texture2D(u1,vv0-u7).r,c[3]=texture2D(u1,vv0-u7*vec2(0.,1.)).r,c[4]=texture2D(u1,vv0-u7*vec2(1.,0.)).r;float a,b;a=min(c[0],c[1]),b=max(c[0],c[1]),c[0]=a,c[1]=b,a=min(c[0],c[2]),b=max(c[0],c[2]),c[0]=a,c[2]=b,a=min(c[0],c[3]),b=max(c[0],c[3]),c[0]=a,c[3]=b,a=min(c[0],c[4]),b=max(c[0],c[4]),c[0]=a,c[4]=b,a=min(c[1],c[2]),b=max(c[1],c[2]),c[1]=a,c[2]=b,a=min(c[1],c[3]),b=max(c[1],c[3]),c[1]=a,c[3]=b,a=min(c[1],c[4]),b=max(c[1],c[4]),c[1]=a,c[4]=b,a=min(c[2],c[3]),b=max(c[2],c[3]),c[2]=a,c[3]=b,a=min(c[2],c[4]),b=max(c[2],c[4]),c[2]=a,c[4]=b,gl_FragColor=vec4(c[2]*g,1.);}",
f:["u1","u37","u7"],precision:"lowp"},{id:"s50",name:"_",fa:"attribute vec2 a0;uniform vec2 u34,u35;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){gl_Position=vec4(a0,0.,1.);vec2 a=u34+a0*u35,b=(a+f)/2.;vv0=b;}",c:"uniform sampler2D u1;uniform vec4 u37;varying vec2 vv0;void main(){vec2 b=u37.xy-.5*u37.zw,c=u37.xy+.5*u37.zw,a=step(b,vv0)*step(vv0,c);gl_FragColor=mix(texture2D(u1,vv0),vec4(0.,1.,0.,1.),a.x*a.y*.5);}",f:["u1","u37","u35","u34"],precision:"lowp"}]);var f=[{type:"1i",name:"u1",
value:0}];y.F("s49",f);y.F("s51",f);y.F("s50",f);L()}function L(){ma=0;y.F("s49",[{type:"1f",name:"u38",value:0}]);pa.roll=0}function K(){n.aspectRatio=n.width/n.height;la.splice(0,la.length);Y=0;n.Ea=Math.round(n.width*B.margins);n.Fa=Math.round(n.height*B.margins);n.La=n.width-2*n.Ea;n.Ka=n.height-2*n.Fa;var f=Math.min(n.width,n.height),v,D,H;for(v=0;v<B.nSweepSsteps;++v){var T=B.sweepScaleRange[0]+v/(B.nSweepSsteps-1)*(B.sweepScaleRange[1]-B.sweepScaleRange[0]);T*=f;var ta=T/n.width;var ua=ta*
n.aspectRatio;var wa=(n.La-T)*(n.Ka-T);var oa=Math.min(Math.floor(wa/(B.sweepStepMinPx*B.sweepStepMinPx)),B.nSweepXYsteps);oa=wa/oa;var qa=Math.round(Math.sqrt(oa));var Ia=Math.round((n.La-T)/qa);var Ma=Math.round((n.Ka-T)/qa);for(H=0;H<Ma;++H)for(wa=n.Fa+Math.round(T/2+qa*H),wa/=n.height,D=0;D<Ia;++D)oa=n.Ea+Math.round(T/2+qa*D),oa/=n.width,la.push([oa,wa,ta,ua])}if(B.sweepShuffle)for(f=la,v=f.length-1;0<v;--v)T=Math.floor(Math.random()*(v+1)),ta=f[v],f[v]=f[T],f[T]=ta;else la.reverse()}function Q(f){xa=
{isLinear:!0,width:n.width,height:n.height,v:f,isPot:!1,isFlipY:!0,isFloat:!1};b=Z.a(xa);ka=!0}function e(f,v,D){if(!f.exportData||!f.exportData.labels)return v("INVALID_NN");var H=f.exportData;"undefined"===typeof H.paramsPerLabel&&(H.paramsPerLabel={});"undefined"!==typeof D&&D.paramsPerLabel&&(H.paramsPerLabel=Object.assign(H.paramsPerLabel,D.paramsPerLabel));ia.reset_state();R=new $a;R.nc(f.layers);R.pc({mb:"cpuRGBA2Float",jc:J});w.X=Z.a({isFloat:!1,isPot:!1,width:R.Rb()});aa=H.dxysFactors?H.dxysFactors:
r.Xa;H.rollMax?(Aa=H.rollMax,ra=!0):ra=!1;H.pitchRange?(Ba=H.pitchRange,W=!0):W=!1;ca=R.Ub();f="undefined"===typeof D?{}:D;sa="undefined"===typeof f.notHereFactor?1:f.notHereFactor;f=H.labels;D="undefined"===typeof H.paramsPerLabel?!1:H.paramsPerLabel;var T="undefined"===typeof H.inputAspectRatio?1:H.inputAspectRatio;n.U[0]=Math.sqrt(T);n.U[1]=1/Math.sqrt(T);T!==n.ka&&(n.ka=T,K());T=Array(f.length);var ta,ua;for(ua=0;ua<ca/8;++ua)for(ta=0;ta<ca;++ta){var wa=ta+ua*ca;if(wa>=f.length)break;var oa=ta;
var qa=8*ua;var Ia=f[wa];var Ma=D&&D[Ia]&&D[Ia].thresholdDetect?D[Ia].thresholdDetect:r.Ma;var ab=H.distances&&H.distances[wa]?H.distances[wa]:3;T[wa]={Ma:Ma,label:Ia,Ib:ab,ib:{here:oa+qa*ca,notHere:oa+(qa+1)*ca,yaw:oa+(qa+2)*ca,dx:oa+(qa+3)*ca,dy:oa+(qa+4)*ca,ds:oa+(qa+5)*ca,roll:oa+(qa+6)*ca,pitch:oa+(qa+7)*ca}}}na=T;v(!1)}var r={ha:512,Xa:[.05,.05,.15],lc:{margins:.1,nSweepXYsteps:36,nSweepSsteps:4,sweepScaleRange:[.3,.7],sweepStepMinPx:16,sweepShuffle:!0},pb:[1/15,.9],fc:3,ec:3,Ma:.68,gc:10,bc:.01,
ma:8,uc:-.02,Ua:.01,Ec:0,rb:.7,dc:20},B=Object.create(r.lc),aa=r.Xa,Aa,Ba,ra=!1,W=!1,c=0,E=0,I=!1,R,U=!1,X=!1,ea,ma=0,ba,n={aspectRatio:1,ka:1,U:[1,1],width:0,height:0,W:0,V:0,Ea:0,Fa:0,La:0,Ka:0,xa:"s49",u:{aa:[0,0],scale:[1,1]}},la=[],Y=0,w={X:!1,j:[0,0,0,0]},z={sa:-2,LOADING:-1,Z:0,ra:1,Oa:2,ga_:3},N=z.sa,fa=-2,na,ca;var za=h=0;var Da=-1;var O={n:0,lb:0,Ga:0,C:-1,qa:0,K:[0,0]};var da=0;var ka=b=d=!1;var ha=0;var va=-1;var xa=null;var Ca=!1,pa={distance:0,label:!1,positionScale:[0,0,0,0],detectScore:0,
yaw:0,pitch:0,roll:0},Ea=1,V=1,Fa=!1,u=!1,S=[2,2,2],sa=1,ya=r.rb,ia={init:function(f){function v(D){f.callbackReady&&f.callbackReady(D)}if(N!==z.sa)return v("ALREADY_INITIALIZED");N=z.LOADING;if("undefined"!==typeof f.canvas)U=f.canvas,X=!1;else if("undefined"===typeof f.canvasId)U=document.createElement("canvas"),X=!1;else{U=document.getElementById(f.canvasId);if(!U)return v("INVALID_CANVASID"),!1;X=!0}"undefined"!==typeof f.isDebugRender&&(X=f.isDebugRender);X&&(U.style.display="block");f.scanSettings&&
m(B,f.scanSettings);f.canvasSize&&(r.ha=f.canvasSize);ea="undefined"===typeof f.followZRot?!1:f.followZRot;ba="undefined"===typeof f.ZRotRange?null:f.ZRotRange;Ca="undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope;-1!==r.ha&&(U.width=r.ha,U.height=r.ha);ia.set_source(f.video,f.videoCrop);if(!Oa.m({ba:U,width:U.width,height:U.height,debug:!1,ic:v.bind(null,"GLCONTEXT_LOST"),premultipliedAlpha:!1})||!Oa.Zb())return v("GL_INCOMPATIBLE"),!1;0===da&&(Q(d),
K());G();k();N=z.Z;v(!1);return!0},set_source:function(f,v){"undefined"!==typeof f&&f?(d=f,da=0,"VIDEO"===f.tagName?(n.W=d.videoWidth,n.V=d.videoHeight,ha=1):(n.W=d.width,n.V=d.height,ha=2),t(v)):da=1;-1===[z.sa,z.LOADING].indexOf(N)&&(xa&&xa.v&&(xa.v=f),K(),k(),2===ha&&b.refresh())},set_NN:function(f,v,D){if(1===fa)v&&v("NN_LOADING");else{var H=function(T){fa=0;v&&v(T)};fa=1;"string"===typeof f?ja(f,function(T){if(!T)return H("INVALID_NN");try{var ta=JSON.parse(T)}catch(ua){return H("INVALID_NN")}e(ta,
H,D)},function(){H("NOTFOUND_NN")}):e(f,H,D)}},reset_state:function(){L();Y=0;N=z.Z},detect:function(f,v,D){if(N===z.LOADING||0!==fa)return pa;M.N();pa.label=!1;"undefined"!==typeof D&&(Ea=D.thresholdDetectFactor?D.thresholdDetectFactor:1,V=D.thresholdDetectFactorUnstitch?D.thresholdDetectFactorUnstitch:1,Fa=D.isSkipConfirmation?!0:!1,u=D.isKeepTracking?!0:!1,S=D.trackingFactors?D.trackingFactors:S,ya=D.secondNeighborFactor?D.secondNeighborFactor:r.rb);if(0===da)1===ha&&va!==d.currentTime&&(b.refresh(),
va=d.currentTime);else if(1===da){if(!ka){n.width=v.size.width;n.height=v.size.height;switch(D.cutShader){case "IOS":n.xa="s51";y.F("s51",[{name:"u7",type:"2f",value:[1/n.width,1/n.height]}]);break;default:n.xa="s49"}Q(null);K()}b.wc(v.buffer)}f=f?f:r.fc;for(v=0;v<f;++v)w.X.H(),y.set(n.xa),ea&&ra&&y.I("u38",N===z.ga_?ma:0),b.b(0),y.pa("u37",w.j),P.i(!1,!1),w.X.b(0),I=v===f-1,R.D(!1,w.X),M.N();M.vc();X&&(a.viewport(0,0,U.width,U.height),y.set("s50"),b.b(0),y.pa("u37",w.j),P.i(!1,!1),Ca&&a.commit?a.commit():
a.flush());return pa},get_aspectRatio:function(){return n.width/n.height},set_scanSettings:function(f){m(B,f);K()},set_videoCrop:function(f){t(f);k();K()}};return ia}();
;return JEEARAPI;})();